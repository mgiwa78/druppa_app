import{g as x}from"./assets.6f11792f.js";import"./Dropdown2.vue_vue_type_script_lang.c72317c6.js";import{T as G}from"./TableFooter.3f00d523.js";import{d as R,u as S,G as a,c as C,m as V,a4 as B,a3 as H,_ as $,b as v,i as e,j as f,t as r,p as N,o as u,k as g,Y as k,l as Y,x as D,F as T,e as J,v as W,ab as X}from"./index.f8ca9675.js";import{f as E}from"./formatDate.672d0471.js";import{d as w}from"./defaultData.9a1fdc93.js";import{E as U}from"./errorHandler.ce533688.js";import{S as Z}from"./colourMaps.8403b523.js";import"./TableFooter.vue_vue_type_script_lang.5421c060.js";const ee=R({name:"view_inventory_delivery_request",components:{},props:{InventoryDeliveryRequest:{type:Object}},setup(t){const i=S(),{token:m}=i,{API_URL:p,ASSETS_URL:h}=V,n=a(null);a();const l=C(()=>t.InventoryDeliveryRequest&&t.InventoryDeliveryRequest.id?(console.log(t.InventoryDeliveryRequest.inventory),console.log(w.InventoryDeliveryRequest),{customer:t.InventoryDeliveryRequest.customer,inventory:t.InventoryDeliveryRequest.inventory?t.InventoryDeliveryRequest.inventory:w.InventoryDeliveryRequest.inventory,id:t.InventoryDeliveryRequest.id||"",inventory_id:t.InventoryDeliveryRequest.inventory_id||"",deliveryAddress:t.InventoryDeliveryRequest.deliveryAddress||"",requestDescription:t.InventoryDeliveryRequest.requestDescription||"",requestQuantity:t.InventoryDeliveryRequest.requestQuantity||"",status:t.InventoryDeliveryRequest.status||""}):{...w.InventoryDeliveryRequest});return{getAssetPath:x,viewInventoryDeliveryRequest:l,ASSETS_URL:h,formatDate:E,ApproveButtonRef:n,handleInventryDeliveryRequestApproval:async()=>{var d,y;n.value&&(n.value.disabled=!0,n.value.setAttribute("data-kt-indicator","on"));const _=new FormData;_.append("inventoryDeliveryRequestID",`${(d=t.InventoryDeliveryRequest)==null?void 0:d.id}`),await B.post(p+"inventoryDeliveryRequest/approveRequest",_,{headers:{Authorization:`Bearer ${m}`}}).then(o=>{console.log(o),H.fire({text:"Request Approved",icon:"success",buttonsStyling:!1,confirmButtonText:"Close",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}})}).catch(o=>{U(o)}),(y=n.value)==null||y.removeAttribute("data-kt-indicator"),n.value.disabled=!1}}}}),te={class:"modal fade",id:"kt_modal_view_delivery",ref:"viewDeliveryModalRef",tabindex:"-1","aria-hidden":"true"},se={class:"modal-dialog modal-dialog-centered mw-650px"},oe={class:"modal-content"},ne={class:"modal-header",id:"kt_modal_add_delivery_header"},ae=e("h2",{class:"fw-bold"},"View Inventory Delivery Request",-1),re={id:"kt_modal_add_delivery_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},ie={class:"card-body p-10"},le={class:"d-flex flex-center flex-column mb-5"},de={href:"#",class:"fs-3 text-gray-800 text-hover-primary fw-bold mb-1"},ce={class:"d-flex flex-stack fs-4 py-3"},ve={class:"fw-bold rotate collapsible","data-bs-toggle":"collapse",href:"#kt_customer_view_details",role:"button","aria-expanded":"false","aria-controls":"kt_customer_view_details"},ue={class:"ms-2 rotate-180"},_e=e("div",{class:"separator separator-dashed my-3"},null,-1),ye={id:"kt_customer_view_details",class:"collapse show"},me={class:"py-5 fs-6"},pe={class:"row"},he={class:"row"},fe={class:"col-12"},be=e("div",{class:"fw-bold mt-5"},"Quantity",-1),ge={class:"text-gray-600"},we={class:"col-6"},De=e("div",{class:"fw-bold mt-5"},"Request Description",-1),qe={class:"text-gray-600"},Ie={class:"col-6"},Re=e("div",{class:"fw-bold mt-5"},"Request Quantity",-1),$e={class:"text-gray-600"},Ae={class:"col-6"},Pe=e("div",{class:"fw-bold mt-5"},"Delivery Address",-1),ke={class:"text-gray-600"},Te={class:"text-gray-600 text-hover-primary"},xe={class:"row"},Se={class:"col-6"},Ce=e("div",{class:"fw-bold mt-5"},"status",-1),Ve={class:"text-gray-600"},Be={class:"col-6"},Ne=e("span",{class:"indicator-label"}," Approve ",-1),Ee=e("span",{class:"indicator-progress"},[N(" Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),Ue=[Ne,Ee];function Fe(t,i,m,p,h,n){const l=g("KTIcon");return u(),v("div",te,[e("div",se,[e("div",oe,[e("div",ne,[ae,e("div",re,[f(l,{"icon-name":"cross","icon-class":"fs-1"})])]),e("div",ie,[e("div",le,[e("a",de,r(t.viewInventoryDeliveryRequest.inventory_id),1)]),e("div",ce,[e("div",ve,[N(" Details "),e("span",ue,[f(l,{"icon-name":"down","icon-class":"fs-3"})])])]),_e,e("div",ye,[e("div",me,[e("div",pe,[e("div",he,[e("div",fe,[be,e("div",ge,r(t.viewInventoryDeliveryRequest.inventory.quantity),1)])]),e("div",we,[De,e("div",qe,r(t.viewInventoryDeliveryRequest.requestDescription),1)]),e("div",Ie,[Re,e("div",$e,r(t.viewInventoryDeliveryRequest.requestQuantity),1)]),e("div",Ae,[Pe,e("div",ke,[e("span",Te,r(t.viewInventoryDeliveryRequest.deliveryAddress),1)])])]),e("div",xe,[e("div",Se,[Ce,e("div",Ve,r(t.viewInventoryDeliveryRequest.status),1)]),e("div",Be,[e("button",{ref:"ApproveButtonRef",type:"submit",id:"kt_Approve_inventry_request_submit",class:"btn btn-primary",onClick:i[0]||(i[0]=(...c)=>t.handleInventryDeliveryRequestApproval&&t.handleInventryDeliveryRequestApproval(...c))},Ue,512)])])])])])])])],512)}const Le=$(ee,[["render",Fe]]),Oe=R({name:"inventory_requests_table",components:{TableFooter:G,ViewInventoryDeliveryRequest:Le},props:{widgetClasses:String},emits:["page-change","on-sort","on-items-select","on-items-per-page-change"],setup(t,{emit:i}){const{API_URL:m,ASSETS_URL:p}=V,h=a({}),n=a(w.InventoryDeliveryRequest),l=a(w.InventoryDeliveryRequest),c=a([]),_=a(10),d=a([0]),y=a(0),o=S(),{user:F,token:L,refreshProfile:ut}=o,O=a(!0),b=a(1),Q=a([]);k(()=>_.value,s=>{b.value=1,i("on-items-per-page-change",s)});const j=C(()=>d.value?d.value.length<=_.value?y.value:d.value.length:0),K=async s=>{n.value=s},M=async s=>{l.value=s};k(()=>b.value,async s=>{const q=await P(s);c.value=q.data,console.log(q.data)});const z=s=>{b.value=s,i("page-change",s)},A=async s=>(await B.get(m+`inventoryDeliveryRequest?page=${s}`,{headers:{Authorization:`Bearer ${L}`}}).then(I=>I.data).catch(I=>{c.value=null,U(I)})).data,P=async s=>typeof s=="number"?await A(s):await A(1);return Y(async()=>{const s=await P(1);h.value=s,c.value=s.data,y.value=s.total,b.value=s.current_page}),{checkedRows:Q,getAssetPath:x,pageChange:z,currentPage:b,itemsPerPage:_,totalDeliveries:d,totalItems:j,dataToDisplay:c,itemsPerPageDropdownEnabled:O,ASSETS_URL:p,editProfileData:n,updateEditProfile:K,viewDeliveryData:l,updateViewProfile:M,formatDate:E,STATUS_COLOUR_MAP:Z}}}),Qe={class:"card-header border-0 pt-5"},je={class:"card-title align-items-start flex-column"},Ke=e("span",{class:"card-label fw-bold fs-3 mb-1"},"Inventory Delivery Request",-1),Me={class:"text-muted mt-1 fw-semobold fs-7"},ze={class:"card-body py-3"},Ge={key:0,class:"d-flex align-items-center justify-content-center w-100 py-5"},He=e("h4",null,"No Records",-1),Ye=[He],Je={key:1,class:"d-flex align-items-center justify-content-center w-100 py-5"},We=e("div",{class:"spinner-border spinner-border-sm align-middle ms-2 w-25px h-25px"},null,-1),Xe=[We],Ze={key:2,class:"table-responsive"},et={class:"table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3"},tt=e("thead",null,[e("tr",{class:"fw-bold text-muted"},[e("th",{class:"min-w-150px"},"Order Id"),e("th",{class:"min-w-120px"},"Customer"),e("th",{class:"min-w-140px"},"Delivery Address"),e("th",{class:"min-w-120px"},"Request Description"),e("th",{class:"min-w-120px"},"Status"),e("th",{class:"min-w-100px text-end"},"Actions")])],-1),st={class:"text-dark fw-bold text-hover-primary fs-6"},ot={class:"text-dark fw-bold text-hover-primary fs-6"},nt={class:"text-muted fw-semobold text-muted d-block fs-7"},at={class:"text-end"},rt=["onClick"],it={class:"px-10"};function lt(t,i,m,p,h,n){var d,y;const l=g("KTIcon"),c=g("TableFooter"),_=g("ViewInventoryDeliveryRequest");return u(),v(T,null,[e("div",{class:W([t.widgetClasses,"card"])},[e("div",Qe,[e("h3",je,[Ke,e("span",Me,r(t.totalItems)+" Requests",1)])]),e("div",ze,[!((d=t.dataToDisplay)!=null&&d.length)&&t.dataToDisplay?(u(),v("div",Ge,Ye)):D("",!0),t.dataToDisplay===null?(u(),v("div",Je,Xe)):D("",!0),((y=t.dataToDisplay)==null?void 0:y.length)&&t.dataToDisplay?(u(),v("div",Ze,[e("table",et,[tt,e("tbody",null,[(u(!0),v(T,null,J(t.dataToDisplay,o=>(u(),v("tr",{key:o.id},[e("td",null,[e("span",st,r(o.inventory_id),1)]),e("td",ot,r(o.customer.firstName+" "+o.customer.lastName),1),e("td",null,r(o.deliveryAddress),1),e("td",null,[e("span",nt,r(o.requestDescription),1)]),e("td",null,[e("span",null,r(o.status),1)]),e("td",at,[o.status==="pending"?(u(),v("button",{key:0,"data-bs-toggle":"modal","data-bs-target":"#kt_modal_view_delivery",class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",onClick:X(F=>t.updateViewProfile(o),["prevent"])},[f(l,{"icon-name":"switch","icon-class":"fs-3"})],8,rt)):D("",!0)])]))),128))])]),e("div",it,[f(c,{onPageChange:t.pageChange,"current-page":t.currentPage,itemsPerPage:t.itemsPerPage,"onUpdate:itemsPerPage":i[0]||(i[0]=o=>t.itemsPerPage=o),count:t.totalItems,"items-per-page-dropdown-enabled":t.itemsPerPageDropdownEnabled},null,8,["onPageChange","current-page","itemsPerPage","count","items-per-page-dropdown-enabled"])])])):D("",!0)])],2),f(_,{InventoryDeliveryRequest:t.viewDeliveryData},null,8,["InventoryDeliveryRequest"])],64)}const dt=$(Oe,[["render",lt]]),ct=R({name:"delivery_records",components:{InventoryRequestsTable:dt},props:{},setup(){return{}}});function vt(t,i,m,p,h,n){const l=g("InventoryRequestsTable");return u(),v("div",null,[f(l,{"widget-classes":"mb-5 mb-xl-8"})])}const Dt=$(ct,[["render",vt]]);export{Dt as default};
