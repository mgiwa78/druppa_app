import{g as U}from"./assets.6f11792f.js";import"./Dropdown2.vue_vue_type_script_lang.c72317c6.js";import{T as R}from"./TableFooter.3f00d523.js";import{d as L,G as o,u as j,Y as x,c as z,l as K,m as G,a4 as Y,a3 as S,_ as q,b as i,i as e,t as n,x as b,F as C,e as H,j as w,v as A,k as v,o as d,ab as J}from"./index.f8ca9675.js";import{f as Q}from"./formatDate.672d0471.js";import{d as E}from"./defaultData.9a1fdc93.js";import{V as W}from"./ViewDeliveryModal.509a3104.js";import{S as X}from"./colourMaps.8403b523.js";const Z=L({name:"kt-widget-12",components:{TableFooter:R,ViewDeliveryModal:W},props:{widgetClasses:String},emits:["page-change","on-sort","on-items-select","on-items-per-page-change"],setup(t,{emit:c}){const{API_URL:y,ASSETS_URL:D}=G,P=o({}),g=o(E.DeliveryEmpty),f=o(E.DeliveryEmpty),l=o([]),m=o(10),r=o([0]),u=o(0),a=j(),{user:V,token:B,refreshProfile:xe}=a,N=o(!0),p=o(1),$=o([]);x(()=>m.value,s=>{p.value=1,c("on-items-per-page-change",s)});const F=z(()=>r.value?r.value.length<=m.value?u.value:r.value.length:0),I=async s=>{g.value=s},M=async s=>{f.value=s};x(()=>p.value,async s=>{const _=await T(s);l.value=_.data,console.log(_.data)});const O=s=>{p.value=s,c("page-change",s)},k=async s=>(await Y.get(y+`deliveries?page=${s}`,{headers:{Authorization:`Bearer ${B}`}}).then(h=>h.data).catch(h=>{l.value=null,h.response.data.message?S.fire({text:h.response.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Error Fetching Data!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}}):S.fire({text:h.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Error Fetching Data!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}})})).data,T=async s=>typeof s=="number"?await k(s):await k(1);return K(async()=>{const s=await T(1);P.value=s,l.value=s.data,u.value=s.total,p.value=s.current_page}),{checkedRows:$,getAssetPath:U,pageChange:O,currentPage:p,itemsPerPage:m,totalDeliveries:r,totalItems:F,dataToDisplay:l,itemsPerPageDropdownEnabled:N,ASSETS_URL:D,editProfileData:g,updateEditProfile:I,viewDeliveryData:f,updateViewProfile:M,formatDate:Q,STATUS_COLOUR_MAP:X}}}),ee={class:"card-header border-0 pt-5"},te={class:"card-title align-items-start flex-column"},se=e("span",{class:"card-label fw-bold fs-3 mb-1"},"Deliveries",-1),ae={class:"text-muted mt-1 fw-semobold fs-7"},oe={class:"card-body py-3"},ne={key:0,class:"d-flex align-items-center justify-content-center w-100 py-5"},re=e("h4",null,"No Records",-1),le=[re],ie={key:1,class:"d-flex align-items-center justify-content-center w-100 py-5"},de=e("div",{class:"spinner-border spinner-border-sm align-middle ms-2 w-25px h-25px"},null,-1),ce=[de],me={key:2,class:"table-responsive"},ue={class:"table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3"},pe=e("thead",null,[e("tr",{class:"fw-bold text-muted"},[e("th",{class:"min-w-150px"},"Order Id"),e("th",{class:"min-w-120px"},"Customer"),e("th",{class:"min-w-140px"},"Origin"),e("th",{class:"min-w-120px"},"Destination"),e("th",{class:"min-w-120px"},"State"),e("th",{class:"min-w-120px"},"Status"),e("th",{class:"min-w-100px text-end"},"Actions")])],-1),he={href:"#",class:"text-dark fw-bold text-hover-primary fs-6"},fe={class:"text-dark fw-bold text-hover-primary fs-6"},ge={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},_e={class:"text-muted fw-semobold text-muted d-block fs-7"},be={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},we={class:"text-muted fw-semobold text-muted d-block fs-7"},ve={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},ye={class:"text-muted fw-semobold text-muted d-block fs-7"},De={class:"text-end"},Pe=["onClick"],ke={class:"px-10"};function Te(t,c,y,D,P,g){var r,u;const f=v("KTIcon"),l=v("TableFooter"),m=v("ViewDeliveryModal");return d(),i(C,null,[e("div",{class:A([t.widgetClasses,"card"])},[e("div",ee,[e("h3",te,[se,e("span",ae,n(t.totalItems)+" Deliveries",1)])]),e("div",oe,[t.dataToDisplay===null?(d(),i("div",ne,le)):b("",!0),!((r=t.dataToDisplay)!=null&&r.length)&&t.dataToDisplay?(d(),i("div",ie,ce)):b("",!0),((u=t.dataToDisplay)==null?void 0:u.length)&&t.dataToDisplay?(d(),i("div",me,[e("table",ue,[pe,e("tbody",null,[(d(!0),i(C,null,H(t.dataToDisplay,a=>(d(),i("tr",{key:a.id},[e("td",null,[e("a",he,n(a.tracking_number),1)]),e("td",fe,n(a.customer.firstName+" "+a.customer.lastName),1),e("td",null,[e("a",ge,n(a.customer_order_id),1),e("span",_e,n(t.formatDate(a.pickup_date)),1)]),e("td",null,[e("a",be,n(a.customer_order_id),1),e("span",we,n(t.formatDate(a.delivery_date)),1)]),e("td",null,[e("a",ve,n(a.customer_order_id),1),e("span",ye,n(a.customer_order_id),1)]),e("td",null,[e("span",{class:A([`badge-light-${a.status?t.STATUS_COLOUR_MAP[a.status].color:"gray"}`,"badge"])},n(a.status),3)]),e("td",De,[e("button",{"data-bs-toggle":"modal","data-bs-target":"#kt_modal_view_delivery",class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",onClick:J(V=>t.updateViewProfile(a),["prevent"])},[w(f,{"icon-name":"switch","icon-class":"fs-3"})],8,Pe)])]))),128))])]),e("div",ke,[w(l,{onPageChange:t.pageChange,"current-page":t.currentPage,itemsPerPage:t.itemsPerPage,"onUpdate:itemsPerPage":c[0]||(c[0]=a=>t.itemsPerPage=a),count:t.totalItems,"items-per-page-dropdown-enabled":t.itemsPerPageDropdownEnabled},null,8,["onPageChange","current-page","itemsPerPage","count","items-per-page-dropdown-enabled"])])])):b("",!0)])],2),w(m,{DeliveryData:t.viewDeliveryData},null,8,["DeliveryData"])],64)}const Fe=q(Z,[["render",Te]]);export{Fe as D};
