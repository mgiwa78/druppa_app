import{g as F}from"./assets.6f11792f.js";import{T as B}from"./TableFooter.3f00d523.js";import{d as N,G as o,u as j,Y as M,c as z,l as K,m as G,a4 as H,_ as U,b as r,i as t,t as n,x as y,F as V,e as Y,j as w,k as P,o as i,v as q,ab as J}from"./index.f8ca9675.js";import{f as Q}from"./formatDate.672d0471.js";import{d as E}from"./defaultData.9a1fdc93.js";import{V as W}from"./ViewCustomerOrderModal.6697adf5.js";import{E as X}from"./errorHandler.ce533688.js";import{S as Z}from"./colourMaps.8403b523.js";import"./TableFooter.vue_vue_type_script_lang.5421c060.js";const O=N({name:"customer-Order-stats",components:{TableFooter:B,ViewCustomerOrderModal:W},props:{widgetClasses:String},emits:["page-change","on-sort","on-items-select","on-items-per-page-change"],setup(a,{emit:d}){const{API_URL:k,ASSETS_URL:D}=G,x=o({}),h=o(E.OrderEmpty),m=o(E.OrderEmpty),u=o(null),p=o(10),c=o([0]),e=o(0),g=j(),{user:C,token:f}=g,v=o(!0),l=o(1),b=o([]);M(()=>p.value,s=>{l.value=1,d("on-items-per-page-change",s)});const S=z(()=>c.value?c.value.length<=p.value?e.value:c.value.length:0),I=async s=>{h.value=s},L=async s=>{console.log(s),m.value=s};M(()=>l.value,async s=>{const _=await A(s);u.value=_.data});const R=s=>{l.value=s,d("page-change",s)},$=async s=>(await H.get(k+`customerorders/all/customer/${p.value}?page=${s}`,{headers:{Authorization:`Bearer ${f}`}}).then(T=>T.data).catch(T=>{u.value=null,X(T)})).data,A=async s=>typeof s=="number"?await $(s):await $(1);return K(async()=>{const s=await A(1);x.value=s;const{data:_}=s;u.value=_,console.log(_),e.value=s.total,l.value=s.current_page}),{checkedRows:b,getAssetPath:F,pageChange:R,currentPage:l,itemsPerPage:p,totalDeliveries:c,totalItems:S,dataToDisplay:u,itemsPerPageDropdownEnabled:v,ASSETS_URL:D,editOrderData:h,updateEditOrder:I,CustomerViewOrderData:m,updateViewOrder:L,formatDate:Q,STATUS_COLOUR_MAP:Z}}}),ee={class:"card"},te={class:"card-header border-0 pt-5"},se={class:"card-title align-items-start flex-column"},ae=t("span",{class:"card-label fw-bold fs-3 mb-1"},"Orders",-1),oe={class:"text-muted mt-1 fw-semobold fs-7"},ne={class:"card-body py-3"},le={key:0,class:"d-flex align-items-center justify-content-center w-100 py-5"},re=t("h4",null,"No Orders",-1),ie=[re],ce={key:1,class:"d-flex align-items-center justify-content-center w-100 py-5"},de=t("div",{class:"spinner-border spinner-border-sm align-middle ms-2 w-25px h-25px"},null,-1),me=[de],ue={key:2,class:"table-responsive"},pe={class:"table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3"},_e=t("thead",null,[t("tr",{class:"fw-bold text-muted"},[t("th",{class:"min-w-150px"},"Tracking Number"),t("th",{class:"min-w-120px"},"Driver"),t("th",{class:"min-w-140px"},"Origin"),t("th",{class:"min-w-120px"},"Destination"),t("th",{class:"min-w-120px"},"State"),t("th",{class:"min-w-120px"},"Status"),t("th",{class:"min-w-100px text-end"},"Actions")])],-1),he={href:"#",class:"text-dark fw-bold text-hover-primary fs-6"},ge={class:"text-dark fw-bold text-hover-primary fs-6"},fe={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},ve={class:"text-muted fw-semobold text-muted d-block fs-7"},be={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},ye={class:"text-muted fw-semobold text-muted d-block fs-7"},we={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},Pe={class:"text-muted fw-semobold text-muted d-block fs-7"},ke={class:"text-end"},De=["onClick"],xe={class:"px-10"};function Ce(a,d,k,D,x,h){var c;const m=P("KTIcon"),u=P("TableFooter"),p=P("ViewCustomerOrderModal");return i(),r(V,null,[t("div",ee,[t("div",te,[t("h3",se,[ae,t("span",oe,n(a.totalItems)+" Orders",1)])]),t("div",ne,[((c=a.dataToDisplay)==null?void 0:c.length)===0?(i(),r("div",le,ie)):y("",!0),a.dataToDisplay?y("",!0):(i(),r("div",ce,me)),a.dataToDisplay!==null?(i(),r("div",ue,[t("table",pe,[_e,t("tbody",null,[(i(!0),r(V,null,Y(a.dataToDisplay,e=>{var g,C,f,v,l,b;return i(),r("tr",{key:e.id},[t("td",null,[t("a",he,n(e.delivery?(g=e.delivery)==null?void 0:g.tracking_number:"Pending Pickup"),1)]),t("td",ge,n(e.delivery?((C=e.delivery)==null?void 0:C.driver.firstName)+" "+((f=e.delivery)==null?void 0:f.driver.lastName):"Pending Pickup"),1),t("td",null,[t("a",fe,n(e.pickup_address),1),t("span",ve,n(e.delivery?a.formatDate((v=e.delivery)==null?void 0:v.pickup_date):"Pending Delivery"),1)]),t("td",null,[t("a",be,n(e.dropoff_address),1),t("span",ye,n(a.formatDate(e.created_at)),1)]),t("td",null,[t("a",we,n(e.pickup_address),1),t("span",Pe,n(e.origin),1)]),t("td",null,[t("span",{class:q([`badge-light-${e!=null&&e.delivery?(l=a.STATUS_COLOUR_MAP[e==null?void 0:e.delivery.status])==null?void 0:l.color:(b=a.STATUS_COLOUR_MAP[e==null?void 0:e.status])==null?void 0:b.color}`,"badge"])},n(e!=null&&e.delivery?e==null?void 0:e.delivery.status:e==null?void 0:e.status),3)]),t("td",ke,[e.delivery?(i(),r("button",{key:0,"data-bs-toggle":"modal","data-bs-target":"#kt_modal_view_customer_order",class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",onClick:J(S=>e.delivery?a.updateViewOrder(e):null,["prevent"])},[w(m,{"icon-name":"switch","icon-class":"fs-3"})],8,De)):y("",!0)])])}),128))])]),t("div",xe,[w(u,{onPageChange:a.pageChange,"current-page":a.currentPage,itemsPerPage:a.itemsPerPage,"onUpdate:itemsPerPage":d[0]||(d[0]=e=>a.itemsPerPage=e),count:a.totalItems,"items-per-page-dropdown-enabled":a.itemsPerPageDropdownEnabled},null,8,["onPageChange","current-page","itemsPerPage","count","items-per-page-dropdown-enabled"])])])):y("",!0)])]),w(p,{CustomerOrderData:a.CustomerViewOrderData},null,8,["CustomerOrderData"])],64)}const Te=U(O,[["render",Ce]]),Se=N({name:"pending_orders",components:{MyOrders:Te},props:{},setup(){return{}}});function $e(a,d,k,D,x,h){const m=P("MyOrders",!0);return i(),r("div",null,[w(m,{"widget-classes":"mb-5 mb-xl-8"})])}const Fe=U(Se,[["render",$e]]);export{Fe as default};
