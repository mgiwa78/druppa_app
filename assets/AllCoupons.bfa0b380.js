import{g as M}from"./assets.6f11792f.js";import"./Dropdown2.vue_vue_type_script_lang.c72317c6.js";import{T as V}from"./TableFooter.3f00d523.js";import{d as k,G as o,u as B,Y as S,c as L,l as O,m as j,a9 as z,a4 as K,_ as x,b as l,i as e,t as r,x as b,F as Y,e as q,j as w,v,k as T,o as i,ab as G}from"./index.f8ca9675.js";import{f as H}from"./formatDate.672d0471.js";import{S as J}from"./colourMaps.8403b523.js";import{d as $}from"./defaultData.9a1fdc93.js";import{E as Q}from"./errorHandler.ce533688.js";import"./TableFooter.vue_vue_type_script_lang.5421c060.js";const W=k({name:"inventory_requests_table",components:{TableFooter:V},props:{widgetClasses:String},emits:["page-change","on-sort","on-items-select","on-items-per-page-change"],setup(s,{emit:c}){const{API_URL:g,ASSETS_URL:h}=j,_=o({}),f=o($.DeliveryEmpty),u=o($.DeliveryEmpty),d=o(null),p=o(10),n=o([0]),t=o(0),C=B(),{token:E}=C,I=o(!0),m=o(1),N=o([]);S(()=>p.value,a=>{m.value=1,c("on-items-per-page-change",a)});const F=L(()=>n.value?n.value.length<=p.value?t.value:n.value.length:0),R=a=>{z.push({name:"editCoupon",params:{couponId:a.id}})};S(()=>m.value,async a=>{const A=await P(a);d.value=A.data});const U=a=>{m.value=a,c("page-change",a)},D=async a=>(await K.get(g+`coupon?page=${a}`,{headers:{Authorization:`Bearer ${E}`}}).then(y=>y.data).catch(y=>{d.value=[],Q(y)})).data,P=async a=>typeof a=="number"?await D(a):await D(1);return O(async()=>{const a=await P(1);_.value=a,d.value=a.data,t.value=a.total,m.value=a.current_page}),{checkedRows:N,getAssetPath:M,pageChange:U,currentPage:m,itemsPerPage:p,totalCoupons:n,totalItems:F,dataToDisplay:d,itemsPerPageDropdownEnabled:I,ASSETS_URL:h,editProfileData:f,viewCouponData:u,routeToModifyCoupon:R,formatDate:H,STATUS_COLOUR_MAP:J}}}),X={class:"card-header border-0 pt-5"},Z={class:"card-title align-items-start flex-column"},ee=e("span",{class:"card-label fw-bold fs-3 mb-1"},"All Coupons",-1),te={class:"text-muted mt-1 fw-semobold fs-7"},se={class:"card-body py-3"},ae={key:0,class:"d-flex align-items-center justify-content-center w-100 py-5"},oe=e("div",{class:"spinner-border spinner-border-sm align-middle ms-2 w-25px h-25px"},null,-1),ne=[oe],re={key:1,class:"d-flex align-items-center justify-content-center w-100 py-5"},le=e("h4",null,"No Records",-1),ie=[le],ce={key:2,class:"table-responsive"},de={class:"table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3"},pe=e("thead",null,[e("tr",{class:"fw-bold text-muted"},[e("th",{class:"min-w-150px"},"Coupon Code"),e("th",{class:"min-w-120px"},"Valid from"),e("th",{class:"min-w-140px"},"Valid Till"),e("th",{class:"min-w-120px"},"Coupon Type"),e("th",{class:"min-w-120px"},"Coupom Amount"),e("th",{class:"min-w-120px"},"Status"),e("th",{class:"min-w-100px text-end"},"Actions")])],-1),ue={class:"text-dark fw-bold text-hover-primary fs-6"},me={class:"text-dark fw-bold text-hover-primary fs-6"},ge={class:"text-dark fw-bold text-hover-primary fs-6"},he={class:"text-end"},_e=["onClick"],fe={class:"px-10"};function ye(s,c,g,h,_,f){var p,n;const u=T("KTIcon"),d=T("TableFooter");return i(),l("div",{class:v([s.widgetClasses,"card"])},[e("div",X,[e("h3",Z,[ee,e("span",te,r(s.totalItems)+" Coupons",1)])]),e("div",se,[s.dataToDisplay===null?(i(),l("div",ae,ne)):b("",!0),((p=s.dataToDisplay)==null?void 0:p.length)===0&&s.dataToDisplay?(i(),l("div",re,ie)):b("",!0),((n=s.dataToDisplay)==null?void 0:n.length)&&s.dataToDisplay?(i(),l("div",ce,[e("table",de,[pe,e("tbody",null,[(i(!0),l(Y,null,q(s.dataToDisplay,t=>(i(),l("tr",{key:t.id},[e("td",null,[e("span",ue,r(t.code),1)]),e("td",me,r(s.formatDate(t.validFrom)),1),e("td",ge,r(s.formatDate(t.validUntill))+" ",1),e("td",null,[e("span",{class:v([`badge-light-${t.couponType==="percentageDiscount"?"warning":t.couponType==="reductionDiscount"?"primary":""}`,"badge"])},r(t.couponType==="percentageDiscount"?"Percentage Discount":t.couponType==="reductionDiscount"?"Reduction Discount":"No type"),3)]),e("td",null,r(t.couponType==="percentageDiscount"?t.percentageDiscount:t.couponType==="reductionDiscount"?t.reductionAmount:"NO TYPE")+" ",1),e("td",null,[e("span",{class:v([`badge-light-${t.status.toString()==="1"?"success":t.status.toString()==="1"?"danger":""}`,"badge"])},r(t.status.toString()==="1"?"Active":t.status.toString()==="1"?"In-Active":""),3)]),e("td",he,[e("button",{class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",onClick:G(C=>s.routeToModifyCoupon(t),["prevent"])},[w(u,{"icon-name":"pencil","icon-class":"fs-3"})],8,_e)])]))),128))])]),e("div",fe,[w(d,{onPageChange:s.pageChange,"current-page":s.currentPage,itemsPerPage:s.itemsPerPage,"onUpdate:itemsPerPage":c[0]||(c[0]=t=>s.itemsPerPage=t),count:s.totalItems,"items-per-page-dropdown-enabled":s.itemsPerPageDropdownEnabled},null,8,["onPageChange","current-page","itemsPerPage","count","items-per-page-dropdown-enabled"])])])):b("",!0)])],2)}const be=x(W,[["render",ye]]),ve=k({name:"all_coupons_view",components:{AllCouponsTable:be},props:{},setup(){return{}}});function we(s,c,g,h,_,f){const u=T("AllCouponsTable");return i(),l("div",null,[w(u,{"widget-classes":"mb-5 mb-xl-8"})])}const Ee=x(ve,[["render",we]]);export{Ee as default};
