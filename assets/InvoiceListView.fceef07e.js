import{g as M}from"./assets.6f11792f.js";import{T as R}from"./TableFooter.3f00d523.js";import{_ as S,b as d,i as t,j as w,w as j,t as a,k as x,o as i,p as U,d as L,G as c,u as q,Y as A,c as z,l as K,m as O,a4 as G,x as N,F,e as H,v as Y,ab as J}from"./index.f8ca9675.js";import{f as Q}from"./formatDate.672d0471.js";import{d as W}from"./defaultData.9a1fdc93.js";import{_ as X}from"./ViewInvoiceModal.vue_vue_type_script_lang.1dc20345.js";import{E as Z}from"./errorHandler.ce533688.js";import"./TableFooter.vue_vue_type_script_lang.5421c060.js";const tt={class:"modal fade",id:"kt_modal_view_reciept",ref:"viewInvoiceModalRef",tabindex:"-1","aria-hidden":"true"},et={class:"modal-dialog modal-dialog-centered mw-1000px"},st={class:"modal-content p-12"},at=t("div",{class:"card-header"},[t("div",{class:"card-title"},[t("h2",{class:"fw-bold"},"Invoice Details")])],-1),ot={class:"card-body pt-3"},nt={class:"mb-10"},rt=t("h5",{class:"mb-4"},"Billing Address:",-1),lt={class:"d-flex flex-wrap py-5"},ct={class:"flex-equal me-5"},dt={class:"table fs-6 fw-semobold gs-0 gy-2 gx-2 m-0"},it=t("td",{class:"text-gray-400 min-w-175px w-175px"},"Bill to:",-1),_t={class:"text-gray-800 min-w-200px"},mt=t("td",{class:"text-gray-400"},"Customer Name:",-1),pt={class:"text-gray-800"},ut=t("td",{class:"text-gray-400"},"Address:",-1),ht={class:"text-gray-800"},gt=t("td",{class:"text-gray-400"},"Phone:",-1),vt={class:"text-gray-800"},yt=t("td",{class:"text-gray-400"},"Pick up Location :",-1),ft={class:"text-gray-800"},bt=t("td",{class:"text-gray-400"},"Destination Address:",-1),wt={class:"text-gray-800"},xt={class:"flex-equal"},It={class:"table fs-6 fw-semobold gs-0 gy-2 gx-2 m-0"},Dt=t("td",{class:"text-gray-400 min-w-175px w-175px"}," Package type: ",-1),$t={class:"text-gray-800 min-w-200px"},Pt={href:"#",class:"text-gray-800 text-hover-primary"},kt=t("td",{class:"text-gray-400"},"Subscription Fees:",-1),Tt={class:"text-gray-800"},Ct=t("td",{class:"text-gray-400"},"Payment type:",-1),At={class:"text-gray-800"},Nt=t("td",{class:"text-gray-400"},"Currency:",-1),St={class:"text-gray-800"},Vt=t("td",{class:"text-gray-400"},"Location Type:",-1),Bt={class:"text-gray-800"},Et={class:"mb-0"},Ft=t("h5",{class:"mb-4"},"Bill:",-1),Lt={class:"table-responsive"},Mt={class:"table align-middle table-row-dashed fs-6 gy-4 mb-0"},Rt=t("thead",null,[t("tr",{class:"border-bottom border-gray-200 text-start text-gray-400 fw-bold fs-7 text-uppercase gs-0"},[t("th",{class:"min-w-150px"},"Service"),t("th",{class:"min-w-125px"},"Incoice ID"),t("th",{class:"min-w-125px"},"Payment type"),t("th",{class:"min-w-125px"},"Total")])],-1),jt={class:"fw-semobold text-gray-800"},Ut=t("label",{class:"w-150px"},null,-1),qt={class:"fw-normal text-gray-600"};function zt(e,_,I,D,$,l){var r,m,p,u,h,o,v,P,k,T,C,b,y,s,g,f,V,B;const n=x("router-link");return i(),d("div",tt,[t("div",et,[t("div",st,[at,t("div",ot,[t("div",nt,[rt,t("div",lt,[t("div",ct,[t("table",dt,[t("tr",null,[it,t("td",_t,[w(n,{to:"/subscriptions/view",class:"text-gray-800 text-hover-primary"},{default:j(()=>{var E;return[U(a((E=e.InvoiceData)==null?void 0:E.customer.address),1)]}),_:1})])]),t("tr",null,[mt,t("td",pt,a(((r=e.InvoiceData)==null?void 0:r.customer.firstName)+" "+((m=e.InvoiceData)==null?void 0:m.customer.lastName)),1)]),t("tr",null,[ut,t("td",ht,a((p=e.InvoiceData)==null?void 0:p.customer.address),1)]),t("tr",null,[gt,t("td",vt,a((u=e.InvoiceData)==null?void 0:u.customer.phone_number),1)]),t("tr",null,[yt,t("td",ft,a(((h=e.InvoiceData)==null?void 0:h.customer_order.pickup_address)+", "+((o=e.InvoiceData)==null?void 0:o.customer_order.pickup_state)),1)]),t("tr",null,[bt,t("td",wt,a(((v=e.InvoiceData)==null?void 0:v.customer_order.dropoff_address)+", "+((P=e.InvoiceData)==null?void 0:P.customer_order.dropoff_state)),1)])])]),t("div",xt,[t("table",It,[t("tr",null,[Dt,t("td",$t,[t("a",Pt,a((k=e.InvoiceData)==null?void 0:k.customer_order.package_type),1)])]),t("tr",null,[kt,t("td",Tt," \u20A6"+a((T=e.InvoiceData)==null?void 0:T.customer_order.total_payment),1)]),t("tr",null,[Ct,t("td",At,a((C=e.InvoiceData)==null?void 0:C.customer_order.payment_type),1)]),t("tr",null,[Nt,t("td",St,a((b=e.InvoiceData)==null?void 0:b.payment.currency),1)]),t("tr",null,[Vt,t("td",Bt,a((y=e.InvoiceData)==null?void 0:y.customer_order.location_type),1)])])])])]),t("div",Et,[Ft,t("div",Lt,[t("table",Mt,[Rt,t("tbody",jt,[t("tr",null,[t("td",null,[Ut,t("div",qt,a((s=e.InvoiceData)!=null&&s.created_at?e.formatDate((g=e.InvoiceData)==null?void 0:g.created_at):""),1)]),t("td",null,a((f=e.InvoiceData)==null?void 0:f.id),1),t("td",null,a((V=e.InvoiceData)==null?void 0:V.payment.payment_method),1),t("td",null,"\u20A6 "+a((B=e.InvoiceData)==null?void 0:B.customer_order.total_payment),1)])])])])])])])])],512)}const Kt=S(X,[["render",zt]]),Ot=L({name:"invoice-table",components:{TableFooter:R,ViewInvoiceModal:Kt},props:{widgetClasses:String},emits:["page-change","on-sort","on-items-select","on-items-per-page-change"],setup(e,{emit:_}){const{API_URL:I,ASSETS_URL:D}=O,$=c({}),l=c(),n=c(4),r=c([0]),m=c(0),p=q(),{token:u}=p,h=c(!0),o=c(1),v=c(W.InvoiceEmpty),P={Pending:"warning","In Progress":"primary",Delivered:"success"};A(()=>n.value,s=>{o.value=1,_("on-items-per-page-change",s)});const k=z(()=>r.value?r.value.length<=n.value?m.value:r.value.length:0);A(()=>o.value,async s=>{const g=await y(s);l.value=g.data}),A(()=>n.value,async()=>{const s=await y(0);l.value=s.data});const T=async s=>{v.value=s},C=s=>{o.value=s,_("page-change",s)},b=async s=>{const g=await G.get(I+`invoice/customer/${n.value}?page=${s}`,{headers:{Authorization:`Bearer ${u}`}}).then(f=>f.data).catch(f=>{l.value=null,Z(f)});return console.log(g),g.data},y=async s=>typeof s=="number"?await b(s):await b(1);return K(async()=>{const s=await y(1);console.log(s),$.value=s,l.value=s.data,m.value=s.total,o.value=s.current_page}),{getAssetPath:M,pageChange:C,currentPage:o,itemsPerPage:n,totalOrders:r,totalItems:k,dataToDisplay:l,itemsPerPageDropdownEnabled:h,ASSETS_URL:D,formatDate:Q,statusFilter:P,updateViewInvoice:T,viewInvoiceData:v}}}),Gt={class:"card-header border-0 pt-5"},Ht={class:"card-title align-items-start flex-column"},Yt=t("span",{class:"card-label fw-bold fs-3 mb-1"},"Invoices",-1),Jt={class:"text-muted mt-1 fw-semobold fs-7"},Qt={class:"card-body py-3"},Wt={key:0,class:"d-flex align-items-center justify-content-center w-100 py-5"},Xt=t("h4",null,"No Invoices",-1),Zt=[Xt],te={key:1,class:"d-flex align-items-center justify-content-center w-100 py-5"},ee=t("div",{class:"spinner-border spinner-border-sm align-middle ms-2 w-25px h-25px"},null,-1),se=[ee],ae={key:2,class:"table-responsive"},oe={class:"table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3"},ne=t("thead",null,[t("tr",{class:"fw-bold text-muted"},[t("th",{class:"min-w-150px"},"Reciept Id"),t("th",{class:"min-w-120px"},"Date Issued"),t("th",{class:"min-w-140px"},"Issued To"),t("th",{class:"min-w-120px"},"Payment ID"),t("th",{class:"min-w-120px"},"Cost"),t("th",{class:"min-w-120px"},"Payment Type"),t("th",{class:"min-w-100px text-end"},"Actions")])],-1),re={href:"#",class:"text-dark fw-bold text-hover-primary fs-6"},le={class:"text-dark fw-bold text-hover-primary fs-6"},ce={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},de={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},ie={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},_e={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},me={class:"text-end"},pe=["onClick"],ue={class:"px-10"};function he(e,_,I,D,$,l){var p,u,h;const n=x("KTIcon"),r=x("TableFooter"),m=x("ViewInvoiceModal");return i(),d(F,null,[t("div",{class:Y([e.widgetClasses,"card"])},[t("div",Gt,[t("h3",Ht,[Yt,t("span",Jt,a((p=e.dataToDisplay)==null?void 0:p.length)+" Invoices",1)])]),t("div",Qt,[((u=e.dataToDisplay)==null?void 0:u.length)===0?(i(),d("div",Wt,Zt)):N("",!0),e.dataToDisplay?N("",!0):(i(),d("div",te,se)),((h=e.dataToDisplay)==null?void 0:h.length)&&e.dataToDisplay?(i(),d("div",ae,[t("table",oe,[ne,t("tbody",null,[(i(!0),d(F,null,H(e.dataToDisplay,o=>(i(),d("tr",{key:o.id},[t("td",null,[t("a",re,a(o.id),1)]),t("td",le,a(e.formatDate(o.created_at)),1),t("td",null,[t("a",ce,a(o.customer.lastName+" "+o.customer.firstName),1)]),t("td",null,[t("a",de,a(o.customer_order.payment_id),1)]),t("td",null,[t("a",ie,"\u20A6"+a(o.customer_order.total_payment),1)]),t("td",null,[t("a",_e,a(o.customer_order.payment_type),1)]),t("td",me,[t("button",{"data-bs-toggle":"modal","data-bs-target":"#kt_modal_view_reciept",class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",onClick:J(v=>e.updateViewInvoice(o),["prevent"])},[w(n,{"icon-name":"switch","icon-class":"fs-3"})],8,pe)])]))),128))])]),t("div",ue,[w(r,{onPageChange:e.pageChange,"current-page":e.currentPage,itemsPerPage:e.itemsPerPage,"onUpdate:itemsPerPage":_[0]||(_[0]=o=>e.itemsPerPage=o),count:e.totalItems,"items-per-page-dropdown-enabled":e.itemsPerPageDropdownEnabled},null,8,["onPageChange","current-page","itemsPerPage","count","items-per-page-dropdown-enabled"])])])):N("",!0)])],2),w(m,{InvoiceData:e.viewInvoiceData},null,8,["InvoiceData"])],64)}const ge=S(Ot,[["render",he]]),ve=L({name:"shipment_records",components:{InvoiceTable:ge},props:{},setup(){return{}}});function ye(e,_,I,D,$,l){const n=x("InvoiceTable");return i(),d("div",null,[w(n,{"widget-classes":"mb-5 mb-xl-8"})])}const ke=S(ve,[["render",ye]]);export{ke as default};
