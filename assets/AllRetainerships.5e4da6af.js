import{g as O}from"./assets.6f11792f.js";import"./Dropdown2.vue_vue_type_script_lang.c72317c6.js";import{T as U}from"./TableFooter.3f00d523.js";import{d as I,G as n,u as F,Y as R,c as M,l as N,m as j,a4 as L,_ as E,b as i,i as e,j as P,x as $,F as C,e as B,k as D,o as d,t as h,v as V,ab as G}from"./index.f8ca9675.js";import{f as K}from"./formatDate.672d0471.js";import{d as z}from"./defaultData.9a1fdc93.js";import{E as q}from"./errorHandler.ce533688.js";import{S as H}from"./colourMaps.8403b523.js";import"./TableFooter.vue_vue_type_script_lang.5421c060.js";const Y=I({name:"add-delivery-modal",components:{TableFooter:U},emits:["page-change","on-sort","on-items-select","on-items-per-page-change"],props:{RetainershipData:{type:Object}},setup(t,{emit:c}){const{API_URL:w,ASSETS_URL:y}=j;n(z.DeliveryEmpty);const u=n(null),f=n(10),r=n([0]),g=n(0),p=F(),{token:_}=p,l=n(!0),a=n(1);n([]),R(()=>f.value,o=>{a.value=1,c("on-items-per-page-change",o)});const T=M(()=>r.value?r.value.length<=f.value?g.value:r.value.length:0);R(()=>a.value,async o=>{var m;if((m=t.RetainershipData)!=null&&m.id){const s=await b(o);u.value=s.data,console.log(s.data)}});const b=async o=>{if(typeof o=="number")return await x(o)},A=o=>{a.value=o,c("page-change",o)},x=async o=>{var s;const m=await L.get(w+`retainerships/${(s=t.RetainershipData)==null?void 0:s.id}/instances?page=${o}`,{headers:{Authorization:`Bearer ${_}`}}).then(v=>v.data).catch(v=>{u.value=null,q(v)});return console.log(m),m.data},k=n([]);return R(()=>t.RetainershipData,async o=>{var m;if((m=t.RetainershipData)!=null&&m.id){const s=await b(1);u.value=s,console.log(s),k.value=s}}),N(async()=>{}),{getAssetPath:O,ASSETS_URL:y,formatDate:K,AllRetainershipInstances:k,pageChange:A,totalItems:T,currentPage:a,itemsPerPage:f,itemsPerPageDropdownEnabled:l,dataToDisplay:u}}}),J={class:"modal fade",id:"kt_modal_view_retainership_instancesModalRef",ref:"ViewRetainershipInstancesModalRef",tabindex:"-1","aria-hidden":"true"},Q={class:"modal-dialog modal-dialog-centered mw-650px"},W={class:"modal-content"},X={class:"modal-header",id:"kt_modal_add_delivery_header"},Z=e("h2",{class:"fw-bold"},"View Retainership Instances",-1),ee={id:"kt_modal_add_delivery_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},te={class:"card-body py-3 px-5"},se={key:0,class:"d-flex align-items-center justify-content-center w-100 py-5"},ae=e("div",{class:"spinner-border spinner-border-sm align-middle ms-2 w-25px h-25px"},null,-1),ne=[ae],oe={key:1,class:"d-flex align-items-center justify-content-center w-100 py-5"},re=e("h4",null,"No Records",-1),le=[re],ie={key:2,class:"table-responsive"},de={class:"table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3"},ce=e("thead",null,[e("tr",{class:"fw-bold text-muted"},[e("th",{class:"min-w-50px"},"ID"),e("th",{class:"min-w-130px"},"Assigned TO"),e("th",{class:"min-w-140px"},"Order ID"),e("th",{class:"min-w-120px"},"Created at")])],-1),pe={class:"text-dark fw-bold fs-6"},me={class:"text-dark fw-bold fs-6"},ue={class:"text-dark fw-bold fs-6"},_e={class:"text-dark fw-bold fs-6"},he={class:"px-10"};function ge(t,c,w,y,u,f){var p,_;const r=D("KTIcon"),g=D("TableFooter");return d(),i("div",J,[e("div",Q,[e("div",W,[e("div",X,[Z,e("div",ee,[P(r,{"icon-name":"cross","icon-class":"fs-1"})])]),e("div",te,[t.dataToDisplay===null?(d(),i("div",se,ne)):$("",!0),((p=t.dataToDisplay)==null?void 0:p.length)===0&&t.dataToDisplay?(d(),i("div",oe,le)):$("",!0),((_=t.dataToDisplay)==null?void 0:_.length)&&t.dataToDisplay?(d(),i("div",ie,[e("table",de,[ce,e("tbody",null,[(d(!0),i(C,null,B(t.AllRetainershipInstances,l=>(d(),i("tr",{key:l.id},[e("td",null,[e("span",pe,h(l.id),1)]),e("td",me,h(l.customer_id),1),e("td",ue,h(l.customer_order_id),1),e("td",_e,h(t.formatDate(l.created_at)),1)]))),128))])]),e("div",he,[P(g,{onPageChange:t.pageChange,"current-page":t.currentPage,itemsPerPage:t.itemsPerPage,"onUpdate:itemsPerPage":c[0]||(c[0]=l=>t.itemsPerPage=l),count:t.totalItems,"items-per-page-dropdown-enabled":t.itemsPerPageDropdownEnabled},null,8,["onPageChange","current-page","itemsPerPage","count","items-per-page-dropdown-enabled"])])])):$("",!0)])])])],512)}const fe=E(Y,[["render",ge]]),be=I({name:"inventory_requests_table",components:{TableFooter:U,ViewAllRetainerShipInstances:fe},props:{widgetClasses:String},emits:["page-change","on-sort","on-items-select","on-items-per-page-change"],setup(t,{emit:c}){const{API_URL:w,ASSETS_URL:y}=j,u=n(z.DeliveryEmpty),f=async s=>{u.value=s},r=n(null),g=n(10),p=n([0]),_=n(0),l=F(),{token:a}=l,T=n(!0),b=n(1),A=n([]);R(()=>g.value,s=>{b.value=1,c("on-items-per-page-change",s)});const x=M(()=>p.value?p.value.length<=g.value?_.value:p.value.length:0);R(()=>b.value,async s=>{const v=await m(s);r.value=v.data,console.log(v.data)});const k=s=>{b.value=s,c("page-change",s)},o=async s=>(await L.get(w+`retainerships?page=${s}`,{headers:{Authorization:`Bearer ${a}`}}).then(S=>S.data).catch(S=>{r.value=null,q(S)})).data,m=async s=>typeof s=="number"?await o(s):await o(1);return N(async()=>{const s=await m(1);console.log(s),r.value=s.data,_.value=s.total,b.value=s.current_page}),{checkedRows:A,getAssetPath:O,pageChange:k,currentPage:b,itemsPerPage:g,totalCoupons:p,totalItems:x,dataToDisplay:r,itemsPerPageDropdownEnabled:T,ASSETS_URL:y,updateViewRetainershipData:f,viewRetainershipData:u,formatDate:K,STATUS_COLOUR_MAP:H}}}),ve={class:"card-header border-0 pt-5"},we={class:"card-title align-items-start flex-column"},ye=e("span",{class:"card-label fw-bold fs-3 mb-1"},"All Retainerships",-1),Pe={class:"text-muted mt-1 fw-semobold fs-7"},$e={class:"card-body py-3"},De={key:0,class:"d-flex align-items-center justify-content-center w-100 py-5"},Re=e("div",{class:"spinner-border spinner-border-sm align-middle ms-2 w-25px h-25px"},null,-1),Te=[Re],ke={key:1,class:"d-flex align-items-center justify-content-center w-100 py-5"},Ae=e("h4",null,"No Records",-1),xe=[Ae],Se={key:2,class:"table-responsive"},Ce={class:"table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3"},Ie=e("thead",null,[e("tr",{class:"fw-bold text-muted"},[e("th",{class:"min-w-150px"},"ID"),e("th",{class:"min-w-120px"},"Assigned TO"),e("th",{class:"min-w-140px"},"Max Orders"),e("th",{class:"min-w-120px"},"Status"),e("th",{class:"min-w-120px"},"Created at"),e("th",{class:"min-w-100px text-end"},"Actions")])],-1),Ee={class:"text-dark fw-bold text-hover-primary fs-6"},Ve={class:"text-dark fw-bold text-hover-primary fs-6"},Oe={class:"text-dark fw-bold text-hover-primary fs-6"},Ue={class:"text-dark fw-bold text-hover-primary fs-6"},Fe=e("a",{href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},null,-1),Me={class:"text-dark fw-bold text-hover-primary fs-6"},Ne={class:"text-end"},je=["onClick"],Le={class:"px-10"};function Be(t,c,w,y,u,f){var _,l;const r=D("KTIcon"),g=D("TableFooter"),p=D("ViewAllRetainerShipInstances");return d(),i(C,null,[e("div",{class:V([t.widgetClasses,"card"])},[e("div",ve,[e("h3",we,[ye,e("span",Pe,h(t.totalItems)+" Retainerships",1)])]),e("div",$e,[t.dataToDisplay===null?(d(),i("div",De,Te)):$("",!0),((_=t.dataToDisplay)==null?void 0:_.length)===0&&t.dataToDisplay?(d(),i("div",ke,xe)):$("",!0),((l=t.dataToDisplay)==null?void 0:l.length)&&t.dataToDisplay?(d(),i("div",Se,[e("table",Ce,[Ie,e("tbody",null,[(d(!0),i(C,null,B(t.dataToDisplay,a=>(d(),i("tr",{key:a.id},[e("td",null,[e("span",Ee,h(a.id),1)]),e("td",Ve,h(a.customer_id),1),e("td",Oe,h(a.set_num_of_orders),1),e("td",Ue,[e("span",{class:V([`badge-light-${a.set_num_of_orders>a.current_num_of_orders?"success":"danger"}`,"badge"])},h(a.set_num_of_orders>a.current_num_of_orders?"Active":"Expired"),3),Fe]),e("td",Me,h(t.formatDate(a.created_at)),1),e("td",Ne,[e("button",{"data-bs-toggle":"modal","data-bs-target":"#kt_modal_view_retainership_instancesModalRef",class:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4",onClick:G(T=>t.updateViewRetainershipData(a),["prevent"])},[P(r,{"icon-name":"pencil","icon-class":"fs-3"})],8,je)])]))),128))])]),e("div",Le,[P(g,{onPageChange:t.pageChange,"current-page":t.currentPage,itemsPerPage:t.itemsPerPage,"onUpdate:itemsPerPage":c[0]||(c[0]=a=>t.itemsPerPage=a),count:t.totalItems,"items-per-page-dropdown-enabled":t.itemsPerPageDropdownEnabled},null,8,["onPageChange","current-page","itemsPerPage","count","items-per-page-dropdown-enabled"])])])):$("",!0)])],2),P(p,{RetainershipData:t.viewRetainershipData},null,8,["RetainershipData"])],64)}const Ke=E(be,[["render",Be]]),ze=I({name:"all_retainer_ships_view",components:{AllRetainerShipsTable:Ke},props:{},setup(){return{}}});function qe(t,c,w,y,u,f){const r=D("AllRetainerShipsTable");return d(),i("div",null,[P(r,{"widget-classes":"mb-5 mb-xl-8"})])}const tt=E(ze,[["render",qe]]);export{tt as default};
