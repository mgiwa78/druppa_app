import{g}from"./assets.6f11792f.js";import{d as y,a6 as w,a7 as T,a5 as V,u as x,ak as A,G as v,l as C,n as S,a4 as D,m as E,_ as F,b as P,j as o,w as u,k as c,o as N,i as e,p as d}from"./index.f8ca9675.js";import{c as U,a as f}from"./object.a52185a5.js";import{E as B}from"./errorHandler.ce533688.js";const $=y({name:"user-sign-in",components:{Field:w,VForm:T,ErrorMessage:V},watch:{},setup(){const{API_URL:s}=E,l=x(),{setAuth:p}=l,{isAuthenticated:_}=A(l),m=S(),h=v("Admin"),t=v(null),r=async a=>{t.value&&(t.value.disabled=!0,t.value.setAttribute("data-kt-indicator","on")),await D.post(s+"login",{email:a.email,password:a.password,type:a.userType}).then(n=>{p(n.data.user,n.data.token),m.push({name:"dashboard"})}).catch(n=>{var k;(k=t.value)==null||k.removeAttribute("data-kt-indicator"),t.value.disabled=!1,B(n)})};C(()=>{if(_.value)return m.push({name:"dashboard"})});const i=U().shape({email:f().email().required().label("Email"),password:f().min(4).required().label("Password"),userType:f().min(4).required().label("User Type")});return{onSubmitLogin:async a=>{try{await r(a)}catch{return}},login:i,submitButton:t,getAssetPath:g,userType:h}}}),I={class:"w-lg-500px p-10"},L={class:"text-center mb-10"},M=e("h1",{class:"text-gray-400 mb-3"},"Welcome To Druppa",-1),q=e("h1",{class:"text-dark mb-3"},"Sign In",-1),R={class:"text-gray-400 fw-semobold fs-4"},H={class:"fv-row mb-10"},j=e("label",{class:"form-label fs-6 fw-bold text-dark"},"Email",-1),G={class:"fv-plugins-message-container"},O={class:"fv-help-block"},W={class:"fv-row mb-10"},z={class:"d-flex flex-stack mb-2"},J=e("label",{class:"form-label fw-bold text-dark fs-6 mb-0"},"Password",-1),K={class:"fv-plugins-message-container"},Q={class:"fv-help-block"},X={class:"fv row mb-10"},Y={class:"col-3 form-check form-check-custom form-check-solid"},Z=e("label",{class:"form-check-label",for:"flexCheckDefault"},"Customer",-1),ee={class:"col-3 form-check form-check-custom form-check-solid"},se=e("label",{class:"form-check-label",for:"flexCheckDefault"},"Vendor",-1),oe={class:"col-3 form-check form-check-custom form-check-solid"},te=e("label",{class:"form-check-label",for:"flexCheckDefault"},"Admin",-1),ae={class:"col-3 form-check form-check-custom form-check-solid"},re=e("label",{class:"form-check-label",for:"flexCheckDefault"},"Driver",-1),le={class:"text-center"},ne={tabindex:"3",type:"submit",ref:"submitButton",id:"kt_sign_in_submit",class:"btn btn-lg btn-primary w-100 mb-5"},ie=e("span",{class:"indicator-label"}," Continue ",-1),ce=e("span",{class:"indicator-progress"},[d(" Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),de=[ie,ce];function me(s,l,p,_,m,h){const t=c("router-link"),r=c("Field"),i=c("ErrorMessage"),b=c("VForm");return N(),P("div",I,[o(b,{class:"form w-100",id:"kt_login_signin_form",onSubmit:s.onSubmitLogin,"validation-schema":s.login,"initial-values":{email:s.userType==="Customer"?"customer@mail.com":s.userType==="Admin"?"admin@mail.com":s.userType==="Driver"?"driver@mail.com":s.userType==="Vendor"?"vendor@mail.com":"",password:"Password"}},{default:u(()=>[e("div",L,[M,q,e("div",R,[d(" New Here? "),o(t,{to:"/sign-up",class:"link-primary fw-bold"},{default:u(()=>[d(" Create an Account ")]),_:1})])]),e("div",H,[j,o(r,{tabindex:"1",class:"form-control form-control-lg form-control-solid",type:"text",name:"email",autocomplete:"off"}),e("div",G,[e("div",O,[o(i,{name:"email"})])])]),e("div",W,[e("div",z,[J,o(t,{to:"/password-reset",class:"link-primary fs-6 fw-bold"},{default:u(()=>[d(" Forgot Password ? ")]),_:1})]),o(r,{tabindex:"2",class:"form-control form-control-lg form-control-solid",type:"password",name:"password",autocomplete:"off"}),e("div",K,[e("div",Q,[o(i,{name:"password"})])])]),e("div",X,[e("div",Y,[o(r,{class:"form-check-input",name:"userType",modelValue:s.userType,"onUpdate:modelValue":l[0]||(l[0]=a=>s.userType=a),type:"radio",value:"Customer"},null,8,["modelValue"]),Z]),e("div",ee,[o(r,{class:"form-check-input",name:"userType",modelValue:s.userType,"onUpdate:modelValue":l[1]||(l[1]=a=>s.userType=a),type:"radio",value:"Vendor"},null,8,["modelValue"]),se]),e("div",oe,[o(r,{class:"form-check-input",name:"userType",type:"radio",value:"Admin"}),te]),e("div",ae,[o(r,{class:"form-check-input",name:"userType",type:"radio",value:"Driver"}),re])]),e("div",le,[e("button",ne,de,512)])]),_:1},8,["onSubmit","validation-schema","initial-values"])])}const he=F($,[["render",me]]);export{he as default};
