import{u as b,a1 as p,a2 as v,G as C,c as d,Y as m,a3 as n,a4 as D,m as x}from"./index.f8ca9675.js";import{E as S}from"./errorHandler.ce533688.js";const N=b(),{token:w}=N,{API_URL:B}=x,E=p("statics",()=>{const o=v("adminStatsPersist",""),l=v("userActivityPersist",""),u=v("allUserActivityPersist",""),r=C({total_deliveries:"0",total_distance:"0",performance:0,isSet:!1}),e=d(()=>o.value?JSON.parse(o.value):{admin:"0",driver:"0",customer:"0",inActiveDrivers:"0",activeDrivers:"0",pendingCustomerOrders:"0",transitCustomerOrders:"0",customerOrders:"0",isSet:!1}),s=d(()=>l.value?JSON.parse(l.value):{isSet:!1,activities:[]}),a=d(()=>u.value?JSON.parse(u.value):{isSet:!1,activities:[]});m(e,()=>{o.value=JSON.stringify(e.value?e.value:{admin:"0",driver:"0",customer:"0",inActiveDrivers:"0",activeDrivers:"0",pendingCustomerOrders:"0",transitCustomerOrders:"0",customerOrders:"0",isSet:!1})});function g(){o.value="",l.value="",u.value=""}m(s,()=>{l.value=JSON.stringify(s.value?s.value:{isSet:!1,activities:[]})}),m(a,()=>{u.value=JSON.stringify(a.value?a.value:{isSet:!1,activities:[]})});const h=async()=>{const t=await c("adminStatics");if(e.value.customer=t.customer,e.value.admin=t.admin,e.value.driver=t.driver,e.value.inActiveDrivers=t.inActiveDrivers,e.value.activeDrivers=t.activeDrivers,e.value.customerOrders=t.customerOrders,e.value.pendingCustomerOrders=t.pendingCustomerOrders,e.value.transitCustomerOrders=t.transitCustomerOrders,o.value=JSON.stringify(t),e.value.customer&&e.value.admin&&e.value.driver&&e.value.inActiveDrivers&&e.value.activeDrivers&&e.value.customerOrders&&e.value.pendingCustomerOrders&&e.value.transitCustomerOrders)return e.value.isSet=!0},y=async()=>{try{const t=await c("driverStatics");if(r.value.total_deliveries=t.total_deliveries,r.value.total_distance=t.total_distance,r.value.performance=t.performance,r.value.total_deliveries&&r.value.total_distance&&r.value.performance)return r.value.isSet=!0}catch(t){if(t.response.data.message==="Unauthenticated.")n.fire({text:"Unauthenticated",icon:"error",buttonsStyling:!1,confirmButtonText:"Close",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}});else return t.response.data.message?n.fire({text:t.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Error Fetching Data!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}}):n.fire({text:t.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Error Fetching Data!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}})}},O=async()=>{try{const t=await c("activity");if(s.value.activities=t,l.value=JSON.stringify(s.value?s.value:{isSet:!1,activities:[]}),s.value.activities)return s.value.isSet=!0}catch(t){S(t)}},A=async()=>{try{const t=await c("activity/all");if(a.value.activities=t,u.value=JSON.stringify(a.value?a.value:{isSet:!1,activities:[]}),console.log(t),a.value.activities)return a.value.isSet=!0}catch(t){S(t)}},c=async t=>{const f=await D.get(B+`${t}`,{headers:{Authorization:`Bearer ${w}`}}).then(i=>i.data).catch(i=>{if(i.response.data.message==="Unauthenticated.")n.fire({text:"Unauthenticated",icon:"error",buttonsStyling:!1,confirmButtonText:"Close",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}}),document.location.reload();else return i.response.data.message?n.fire({text:i.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Error Fetching Data!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}}):n.fire({text:i.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Error Fetching Data!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}})});return console.log(f.data),f.data};return{UpdateAdminStats:h,UpdateDriverStats:y,driverStats:r,adminStats:e,userActivity:s,UpdateUserActivity:O,UpdateAllActivity:A,allUserActivity:a,resetStore:g}});export{E as u};
