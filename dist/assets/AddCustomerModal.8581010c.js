import{g as q}from"./assets.6f11792f.js";import{h as M}from"./dom.fc49162f.js";import{S as w}from"./sweetalert2.d8000a3b.js";import{d as U,a5 as F,a6 as T,a7 as P,u as B,G as f,a4 as I,m as E,_ as R,b as m,i as e,j as a,w as p,k as b,o as c,v as $,F as g,e as V,t as C,x as L,z,am as G,p as K}from"./index.f8ca9675.js";import{c as O,a as u}from"./object.a52185a5.js";import{s as j,c as H}from"./citiesInNigeria.a5c184d7.js";const J=U({name:"add-customer-modal",components:{ErrorMessage:F,Field:T,VForm:P},setup(){const s=B(),{user:o,token:N,refreshProfile:D}=s,n=f(null);f(null);const h=f(null),v=f(null),i=f(null),{API_URL:d,badInternetAlert:k,errorAlert:y,successAlert:t}=E,r=f({firstName:"",lastName:"",email:"",address:"",state:"",userName:"",gender:"",city:"",password:"",title:"",phone_number:""}),S=O().shape({firstName:u().required().label("First Name"),lastName:u().required().label("Last Name"),email:u().required().label("Email"),userName:u().required().label("UserName"),gender:u().required().label("gender"),phone_number:u().required().label("Phone Number"),city:u().required().label("City"),state:u().required().label("State"),title:u().required().label("Title")}),A=async()=>{n.value&&(n.value.disabled=!0,n.value.setAttribute("data-kt-indicator","on"));const l=new FormData;l.append("firstName",r.value.firstName),l.append("lastName",r.value.lastName),l.append("email",r.value.email),l.append("username",r.value.userName),l.append("password",r.value.password),l.append("address",r.value.address),l.append("city",r.value.city),l.append("state",r.value.state),l.append("title",r.value.title),l.append("gender",r.value.gender),l.append("phone_number",r.value.phone_number),await I.post(d+"customers",l,{headers:{Authorization:`Bearer ${N}`}}).then(()=>{M(h.value),w.fire({text:"Profile has been created!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})}).catch(_=>{_.response.data.message=="User does not exist"&&w.fire({text:"Invalid Email or Password",icon:"error",buttonsStyling:!1,confirmButtonText:"Try again!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}}),_.response.data.message&&w.fire({text:`${_.response.data.message}`,icon:"error",buttonsStyling:!1,confirmButtonText:"Try again!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}})}).then(()=>{var _;(_=n.value)==null||_.removeAttribute("data-kt-indicator"),n.value.disabled=!1})};return{newCustomerData:r,validationSchema:S,submit:async()=>{var l;!n.value||(n.value.disabled=!0,n.value.setAttribute("data-kt-indicator","on"),await A(),(l=n.value)==null||l.removeAttribute("data-kt-indicator"),n.value.disabled=!1)},submitButtonRef:n,modalRef:v,createAPIKeyModalRef:i,getAssetPath:q,statesInNigeria:j,citiesInNigeria:H,addCustomerModalRef:h}}}),Q={class:"modal fade",id:"kt_modal_add_customer",ref:"addCustomerModalRef",tabindex:"-1","aria-hidden":"true"},W={class:"modal-dialog modal-dialog-centered mw-650px"},X={class:"modal-content"},Y={class:"modal-header",id:"kt_modal_add_customer_header"},Z=e("h2",{class:"fw-bold"},"Create Customer",-1),x={id:"kt_modal_add_customer_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},ee={class:"modal-body py-10 px-lg-17"},se={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_customer_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},te={class:"mb-5 row"},oe={class:"col-6"},ae=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Last Name",-1),le={class:"fv-plugins-message-container"},de={class:"fv-help-block"},ne={class:"col-6"},ie=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"First Name",-1),re={class:"fv-plugins-message-container"},me={class:"fv-help-block"},ce={class:"mb-5 row"},ue={class:"col-6"},_e=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Title",-1),fe=e("option",{value:""},"Select a Title...",-1),pe=e("option",{value:"Mr"},"Mr",-1),be=e("option",{value:"Mrs"},"Mrs",-1),he=e("option",{value:"Ms"},"Ms",-1),ve=e("option",{value:"Dr"},"Dr",-1),we={class:"fv-plugins-message-container"},ge={class:"fv-help-block"},Ce={class:"col-6"},Ne=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Gender",-1),ke=e("option",{value:""},"Select a Gender...",-1),ye=e("option",{value:"male"},"Male",-1),Ve=e("option",{value:"female"},"Female",-1),De={class:"fv-plugins-message-container"},Se={class:"fv-help-block"},Ae={class:"mb-5 row"},qe={class:"col-6"},Me=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Email",-1),Ue={class:"fv-plugins-message-container"},Fe={class:"fv-help-block"},Te={class:"col-6"},Pe=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Password",-1),Be={class:"fv-plugins-message-container"},Ie={class:"fv-help-block"},Ee={class:"mb-5 row"},Re={class:"col-6"},$e=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Phone Number",-1),Le={class:"fv-plugins-message-container"},ze={class:"fv-help-block"},Ge={class:"col-6"},Ke=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Username",-1),Oe={class:"fv-plugins-message-container"},je={class:"fv-help-block"},He={class:"mb-5 row"},Je={class:"col-6"},Qe=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"State",-1),We=e("option",{value:""},"Select a State...",-1),Xe=["value"],Ye={class:"fv-plugins-message-container"},Ze={class:"fv-help-block"},xe={class:"col-6"},es=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"City",-1),ss={key:0,selected:"",value:""},ts=["value"],os=["value"],as={key:2,selected:"",value:""},ls={class:"fv-plugins-message-container"},ds={class:"fv-help-block"},ns={class:"mb-5 row"},is={class:"col-12"},rs=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Address",-1),ms={class:"fv-plugins-message-container"},cs={class:"fv-help-block"},us={class:"modal-footer flex-center"},_s=e("button",{type:"reset",id:"kt_modal_add_customer_cancel",class:"btn btn-light me-3"}," Discard ",-1),fs={ref:"submitButtonRef",type:"submit",id:"kt_add_customer_submit",class:"btn btn-primary"},ps=e("span",{class:"indicator-label"}," Submit ",-1),bs=e("span",{class:"indicator-progress"},[K(" Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),hs=[ps,bs];function vs(s,o,N,D,n,h){const v=b("KTIcon"),i=b("Field"),d=b("ErrorMessage"),k=b("VForm");return c(),m("div",Q,[e("div",W,[e("div",X,[e("div",Y,[Z,e("div",x,[a(v,{"icon-name":"cross","icon-class":"fs-1"})])]),a(k,{id:"kt_modal_add_customer_form",class:"form",onSubmit:s.submit,"validation-schema":s.validationSchema},{default:p(({errors:y})=>[e("div",ee,[e("div",se,[e("div",te,[e("div",oe,[ae,a(i,{type:"text",class:"form-control form-control-solid",placeholder:"Last Name",name:"lastName",modelValue:s.newCustomerData.lastName,"onUpdate:modelValue":o[0]||(o[0]=t=>s.newCustomerData.lastName=t)},null,8,["modelValue"]),e("div",le,[e("div",de,[a(d,{name:"lastName"})])])]),e("div",ne,[ie,a(i,{type:"text",class:"form-control form-control-solid",placeholder:"First Name",name:"firstName",modelValue:s.newCustomerData.firstName,"onUpdate:modelValue":o[1]||(o[1]=t=>s.newCustomerData.firstName=t)},null,8,["modelValue"]),e("div",re,[e("div",me,[a(d,{name:"firstName"})])])])]),e("div",ce,[e("div",ue,[_e,a(i,{name:"title",class:"form-select",as:"select",modelValue:s.newCustomerData.title,"onUpdate:modelValue":o[2]||(o[2]=t=>s.newCustomerData.title=t)},{default:p(()=>[fe,pe,be,he,ve]),_:1},8,["modelValue"]),e("div",we,[e("div",ge,[a(d,{name:"title"})])])]),e("div",Ce,[Ne,a(i,{name:"gender",class:$(["form-select",y.country?"is-invalid":""]),as:"select",modelValue:s.newCustomerData.gender,"onUpdate:modelValue":o[3]||(o[3]=t=>s.newCustomerData.gender=t)},{default:p(()=>[ke,ye,Ve]),_:2},1032,["class","modelValue"]),e("div",De,[e("div",Se,[a(d,{name:"gender"})])])])]),e("div",Ae,[e("div",qe,[Me,a(i,{type:"text",class:"form-control form-control-solid",placeholder:"Email",name:"email",modelValue:s.newCustomerData.email,"onUpdate:modelValue":o[4]||(o[4]=t=>s.newCustomerData.email=t)},null,8,["modelValue"]),e("div",Ue,[e("div",Fe,[a(d,{name:"email"})])])]),e("div",Te,[Pe,a(i,{type:"text",class:"form-control form-control-solid",placeholder:"Password",name:"password",modelValue:s.newCustomerData.password,"onUpdate:modelValue":o[5]||(o[5]=t=>s.newCustomerData.password=t)},null,8,["modelValue"]),e("div",Be,[e("div",Ie,[a(d,{name:"password"})])])])]),e("div",Ee,[e("div",Re,[$e,a(i,{type:"text",class:"form-control form-control-solid",placeholder:"Phone Number",name:"phone_number",modelValue:s.newCustomerData.phone_number,"onUpdate:modelValue":o[6]||(o[6]=t=>s.newCustomerData.phone_number=t)},null,8,["modelValue"]),e("div",Le,[e("div",ze,[a(d,{name:"phone_number"})])])]),e("div",Ge,[Ke,a(i,{type:"text",class:"form-control form-control-solid",placeholder:"Username",name:"userName",modelValue:s.newCustomerData.userName,"onUpdate:modelValue":o[7]||(o[7]=t=>s.newCustomerData.userName=t)},null,8,["modelValue"]),e("div",Oe,[e("div",je,[a(d,{name:"userName"})])])])]),e("div",He,[e("div",Je,[Qe,a(i,{name:"state",class:"form-select",as:"select",modelValue:s.newCustomerData.state,"onUpdate:modelValue":o[8]||(o[8]=t=>s.newCustomerData.state=t)},{default:p(()=>[We,(c(!0),m(g,null,V(s.statesInNigeria,t=>(c(),m("option",{key:t.code,value:t.name},C(t.name),9,Xe))),128))]),_:1},8,["modelValue"]),e("div",Ye,[e("div",Ze,[a(d,{name:"state"})])])]),e("div",xe,[es,a(i,{name:"city",class:"form-select",as:"select",modelValue:s.newCustomerData.city,"onUpdate:modelValue":o[9]||(o[9]=t=>s.newCustomerData.city=t)},{default:p(()=>[s.newCustomerData.state?(c(),m("option",ss," Select a State ")):L("",!0),s.newCustomerData.state?(c(),m(g,{key:1},[s.citiesInNigeria[s.newCustomerData.state]?(c(!0),m(g,{key:0},V(s.citiesInNigeria[s.newCustomerData.state],t=>(c(),m("option",{key:t.code,value:t.city},C(t.city),9,ts))),128)):(c(),m("option",{key:1,value:s.newCustomerData.state},C(s.newCustomerData.state),9,os))],64)):(c(),m("option",as," Select a State First "))]),_:1},8,["modelValue"]),e("div",ls,[e("div",ds,[a(d,{name:"city"})])])])]),e("div",ns,[e("div",is,[rs,z(e("textarea",{type:"textarea",class:"form-control form-control-solid",placeholder:"Address",name:"address","onUpdate:modelValue":o[10]||(o[10]=t=>s.newCustomerData.address=t)},null,512),[[G,s.newCustomerData.address]]),e("div",ms,[e("div",cs,[a(d,{name:"address"})])])])])])]),e("div",us,[_s,e("button",fs,hs,512)])]),_:1},8,["onSubmit","validation-schema"])])])],512)}const Ds=R(J,[["render",vs]]);export{Ds as A};
