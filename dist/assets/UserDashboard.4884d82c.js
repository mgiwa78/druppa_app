import{g as k}from"./assets.6f11792f.js";import{d as S,_ as P,b as c,i as e,t as a,F as I,e as V,v as L,aa as Q,o as d,j as l,k as g,u as N,G as v,l as M,a4 as W,m as E,x as C,ab as X,p as K,Y,c as te,z as se,ac as oe,a8 as ae,a9 as ne}from"./index.f8ca9675.js";import{S as H}from"./Widget5.b4386094.js";import{u as J}from"./statics.eeafb3d7.js";import{T as ie}from"./TableFooter.3f00d523.js";import{f as q}from"./formatDate.672d0471.js";import{d as G}from"./defaultData.9a1fdc93.js";import{S as Z}from"./sweetalert2.d8000a3b.js";import{c as re,a as B}from"./object.a52185a5.js";import{M as ee}from"./multiselect.bc727701.js";import{E as z}from"./errorHandler.ce533688.js";import{h as ce}from"./dom.fc49162f.js";import{A as de}from"./colourMaps.8403b523.js";import{C as le}from"./CustomerDeliveryStats.e25d2a1b.js";import"./TableFooter.vue_vue_type_script_lang.5421c060.js";const me=S({name:"widget-14",props:{widgetClasses:String,widgetColor:String,data:Object},setup(){return{getAssetPath:k}}}),ue={class:"card-body d-flex flex-column"},_e={class:"d-flex flex-column mb-7"},pe={class:"text-dark text-hover-primary fw-bold fs-3"},he={class:"row g-0"},ve={class:"d-flex align-items-center mb-9 me-2"},be={class:"symbol symbol-40px me-3"},fe={class:"symbol-label bg-body bg-opacity-50"},ge={class:"fs-5 text-dark fw-bold lh-1"},ye={class:"fs-7 text-gray-600 fw-semobold"};function $e(t,s,r,m,b,u){var i,n,_;const o=g("KTIcon");return d(),c("div",{class:L([t.widgetClasses,"card theme-dark-bg-body"]),style:Q(`background-color: ${(i=t.data)==null?void 0:i.colour}`)},[e("div",ue,[e("div",_e,[e("span",pe,a((n=t.data)==null?void 0:n.title),1)]),e("div",he,[(d(!0),c(I,null,V((_=t.data)==null?void 0:_.metrics,(p,y)=>(d(),c("div",{class:"col-6",key:y},[e("div",ve,[e("div",be,[e("div",fe,[l(o,{"icon-name":p.icon,"icon-class":"fs-1 text-dark"},null,8,["icon-name"])])]),e("div",null,[e("div",ge,a(p.number),1),e("div",ye,a(p.title),1)])])]))),128))])])],6)}const we=P(me,[["render",$e]]),xe=S({name:"admin-dashboard",components:{StatisticsWidget5:H,MixedWidget14:we},setup(){N();const t=J(),{adminStats:s,UpdateAdminStats:r}=t,m=v(0),b=v(0),u=v([{title:"Drivers Summary",colour:"#cbd4f4",metrics:[{icon:"abstract-42",title:"Active Drivers",number:s.activeDrivers},{icon:"abstract-45",title:"In-Active Drivers",number:s.inActiveDrivers}]},{title:"Orders Summary",colour:"#cbf0f4",metrics:[{icon:"abstract-42",title:"Pending Orders",number:s.pendingCustomerOrders},{icon:"abstract-45",title:"Orders In-Transit",number:s.transitCustomerOrders}]},{title:"Notifications",colour:"#f7d9e3",metrics:[{icon:"abstract-42",title:"Driver Approvals",number:"0"},{icon:"abstract-45",title:"Customer orders",number:s.customerOrders}]}]),o=v(0);return M(async()=>{s.isSet||(r(),u.value[0].metrics[0].number=s.activeDrivers,console.log(s.driver),console.log(u.value[0].metrics[0].number))}),{summary:u,customersCount:m,adminCount:o,driversCount:b,adminStats:s}}}),ke={class:"row g-5 g-xl-8 mb-10 mb-xl-1"},De={class:"col-xl-4"},Se={class:"col-xl-4"},Pe={class:"col-xl-4"},Ae={class:"row g-5 g-xl-8"};function Ce(t,s,r,m,b,u){const o=g("StatisticsWidget5"),i=g("MixedWidget14");return d(),c("div",null,[e("div",ke,[e("div",De,[l(o,{"widget-classes":"card-xl-stretch mb-xl-8","icon-name":"cheque",color:"dark","icon-color":"white",title:`${t.adminStats.customer}`,description:"Customers"},null,8,["title"])]),e("div",Se,[l(o,{"widget-classes":"card-xl-stretch mb-xl-8","icon-name":"cheque",color:"primary","icon-color":"white",title:`${t.adminStats.admin}`,description:"Admins"},null,8,["title"])]),e("div",Pe,[l(o,{"widget-classes":"card-xl-stretch mb-xl-8","icon-name":"cheque",color:"danger","icon-color":"white",title:`${t.adminStats.driver}`,description:"Drivers"},null,8,["title"])])]),e("div",Ae,[(d(!0),c(I,null,V(t.summary,n=>(d(),c("div",{class:"col-xl-4",key:n.title},[l(i,{data:n,"widget-classes":"card-xxl-stretch mb-5 mb-xl-8","widget-color":"#CBD4F4"},null,8,["data"])]))),128))])])}const Oe=P(xe,[["render",Ce]]),Te=S({name:"start-delivery-modal",props:{OrderData:{type:Object}},components:{},setup(t){const s=v(null),r=v(null),m=v(null),b=v(null),{API_URL:u}=E,o=N(),{user:i,token:n}=o,_=v({mode:"tags",value:[],placeholder:"Select permissions",search:!0,trackBy:"name",label:"name",options:[{value:"editCustomer",name:"Edit Customer"},{value:"addCustomer",name:"Add Customer"},{value:"deleteCustomer",name:"Delete Customer"}]}),p=v(G.OrderEmpty),y=re().shape({firstName:B().required().label("First Name"),lastName:B().required().label("Last Name"),email:B().required().label("Email"),userName:B().required().label("UserName"),password:B().required().label("Password"),permissions:B().required().label("Permissions")});M(()=>{r.value=document.getElementById("kt_start_delivery_modal")});const h=async()=>{var D;s.value&&(s.value.disabled=!0,s.value.setAttribute("data-kt-indicator","on"));const w=new FormData;await W.patch(u+`deliveries/driver/assignDelivery/${(D=t.OrderData)==null?void 0:D.id}`,w,{headers:{Authorization:`Bearer ${n}`}}).then(()=>{Z.fire({text:"Delivery Initiated successfully!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})}).catch(x=>{z(x)}).finally(()=>{var x;(x=s.value)==null||x.removeAttribute("data-kt-indicator"),s.value.disabled=!1})};return{orderData:p,validationSchema:y,submit:async()=>{var w,D,x,A,O,U,T;!s.value||(await h(),m.value=document.querySelector(".modal-backdrop"),console.log(m.value),(w=r.value)==null||w.removeAttribute("aria-modal"),(D=r.value)==null||D.removeAttribute("role"),(x=r.value)==null||x.setAttribute("aria-hidden","true"),r.value.style.display="none",(A=r.value)==null||A.classList.remove("show"),(O=m.value)==null||O.classList.remove("show"),(U=m.value)==null||U.remove(),(T=s.value)==null||T.removeAttribute("data-kt-indicator"),s.value.disabled=!1)},submitButtonRef:s,modalRef:b,getAssetPath:k,permissionsSelect:_,Multiselect:ee,formatDate:q,StartDelivery:h}}}),Ie={class:"modal fade",id:"kt_start_delivery_modal",ref:"startDeleveryModalRef",tabindex:"-1","aria-hidden":"true"},Ne={class:"modal-dialog modal-dialog-centered mw-650px"},Ue={class:"modal-content"},Me={class:"modal-header",id:"kt_start_delivery_modal_header"},Re=e("h2",{class:"fw-bold"},"Start Delivery",-1),Be={id:"kt_start_delivery_modal_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},Le={class:"modal-body py-10 px-lg-17"},Ee={class:"scroll-y me-n7 pe-7",id:"kt_start_delivery_modal_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_start_delivery_modal_header","data-kt-scroll-wrappers":"#kt_start_delivery_modal_scroll","data-kt-scroll-offset":"300px"},Ve={class:"row mb-7"},qe={class:"col-6"},Fe=e("label",{class:"col-lg-4 fw-semobold text-muted"},"Order Type",-1),Ke={class:"col-lg-8"},We={class:"fw-bold fs-6 text-dark"},ze={class:"row mb-7"},je={class:"col-6"},Ye=e("label",{class:"col-lg-4 fw-semobold text-muted"},"Customer Name",-1),Ge={class:"col-lg-8"},He={class:"fw-bold fs-6 text-dark"},Je={class:"col-6"},Qe=e("label",{class:"col-lg-4 fw-semobold text-muted"},"Origin",-1),Xe={class:"col-lg-8"},Ze={class:"fw-bold fs-6 text-dark"},et={class:"row mb-7"},tt={class:"col-6"},st=e("label",{class:"col-lg-4 fw-semobold text-muted"},"Location Type",-1),ot={class:"col-lg-8"},at={class:"fw-bold fs-6 text-dark"},nt={class:"col-6"},it=e("label",{class:"col-lg-4 fw-semobold text-muted"},"Pickup Location",-1),rt={class:"col-lg-8"},ct={class:"fw-bold fs-6 text-dark"},dt={key:0,class:"row mb-7"},lt={class:"col-6"},mt=e("label",{class:"col-lg-4 fw-semobold text-muted"},"Pickup State",-1),ut={class:"col-lg-8"},_t={class:"fw-bold fs-6 text-dark"},pt={class:"col-6"},ht=e("label",{class:"col-lg-4 fw-semobold text-muted"},"Drop-off Location",-1),vt={class:"col-lg-8"},bt={class:"fw-bold fs-6 text-dark"},ft={class:"row mb-7"},gt={class:"col-6"},yt=e("label",{class:"col-lg-4 fw-semobold text-muted"},"Drop Off Location",-1),$t={class:"col-lg-8"},wt={class:"fw-bold fs-6 text-dark"},xt={class:"col-6"},kt=e("label",{class:"col-lg-4 fw-semobold text-muted"},"Order Placed At",-1),Dt={class:"col-lg-8"},St={class:"fw-bold fs-6 text-dark"},Pt={class:"modal-footer flex-center"},At=e("span",{class:"indicator-label"}," Go For Pickup",-1),Ct=e("span",{class:"indicator-progress"},[K(" Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),Ot=[At,Ct];function Tt(t,s,r,m,b,u){var i,n,_,p,y,h,$,w,D,x,A;const o=g("KTIcon");return d(),c("div",Ie,[e("div",Ne,[e("div",Ue,[e("div",Me,[Re,e("div",Be,[l(o,{"icon-name":"cross","icon-class":"fs-1"})])]),e("div",Le,[e("div",Ee,[e("div",Ve,[e("div",qe,[Fe,e("div",Ke,[e("span",We,a((i=t.OrderData)==null?void 0:i.order_type),1)])])]),e("div",ze,[e("div",je,[Ye,e("div",Ge,[e("span",He,a(((n=t.OrderData)==null?void 0:n.customer.firstName)+" "+((_=t.OrderData)==null?void 0:_.customer.lastName)),1)])]),e("div",Je,[Qe,e("div",Xe,[e("span",Ze,a((p=t.OrderData)==null?void 0:p.origin),1)])])]),e("div",et,[e("div",tt,[st,e("div",ot,[e("span",at,a((y=t.OrderData)==null?void 0:y.location_type),1)])]),e("div",nt,[it,e("div",rt,[e("span",ct,a((h=t.OrderData)==null?void 0:h.pickup_address),1)])])]),(($=t.OrderData)==null?void 0:$.location_type)==="Inter-State"?(d(),c("div",dt,[e("div",lt,[mt,e("div",ut,[e("span",_t,a((w=t.OrderData)==null?void 0:w.pickup_state),1)])]),e("div",pt,[ht,e("div",vt,[e("span",bt,a((D=t.OrderData)==null?void 0:D.dropoff_state),1)])])])):C("",!0),e("div",ft,[e("div",gt,[yt,e("div",$t,[e("span",wt,a((x=t.OrderData)==null?void 0:x.dropoff_address),1)])]),e("div",xt,[kt,e("div",Dt,[e("span",St,a(t.formatDate((A=t.OrderData)==null?void 0:A.created_at)),1)])])])])]),e("div",Pt,[e("button",{ref:"submitButtonRef",onClick:s[0]||(s[0]=X(O=>t.StartDelivery(),["prevent"])),id:"kt_start_delivery_modal_submit",class:"btn btn-primary"},Ot,512)])])])],512)}const It=P(Te,[["render",Tt]]),Nt=S({name:"kt-widget-12",components:{TableFooter:ie,StartDeliveryModal:It},props:{widgetClasses:String},emits:["page-change","on-sort","on-items-select","on-items-per-page-change"],setup(t,{emit:s}){const{API_URL:r,ASSETS_URL:m}=E,b=v({}),u=v(G.OrderEmpty),o=v(G.OrderEmpty),i=v(null),n=v(4),_=v([0]),p=v(0),y=N(),{token:h}=y,$=v(!0),w=v(1),D={Pending:"warning","In Progress":"primary",Delivered:"success"};Y(()=>n.value,f=>{w.value=1,s("on-items-per-page-change",f)});const x=te(()=>_.value?_.value.length<=n.value?p.value:_.value.length:0),A=async f=>{u.value=f},O=async f=>{o.value=f};Y(()=>w.value,async f=>{const F=await R(f);i.value=F.data}),Y(()=>n.value,async f=>{const F=await R(f);i.value=F.data});const U=f=>{w.value=f,s("page-change",f)},T=async f=>(await W.get(r+`getPendingOrders/${n.value}?page=${f}`,{headers:{Authorization:`Bearer ${h}`}}).then(j=>j.data).catch(j=>{i.value=null,z(j)})).data,R=async f=>typeof f=="number"?await T(f):await T(1);return M(async()=>{const f=await R(1);b.value=f,console.log(f),i.value=f.data,p.value=f.total,w.value=f.current_page}),{getAssetPath:k,pageChange:U,currentPage:w,itemsPerPage:n,totalOrders:_,totalItems:x,dataToDisplay:i,itemsPerPageDropdownEnabled:$,ASSETS_URL:m,editOrderData:u,updateEditorder:A,CustomerVieworderData:o,updateVieworder:O,formatDate:q,statusFilter:D}}}),Ut={class:"card-header border-0 pt-5"},Mt={class:"card-title align-items-start flex-column"},Rt=e("span",{class:"card-label fw-bold fs-3 mb-1"},"Pending Orders",-1),Bt={class:"text-muted mt-1 fw-semobold fs-7"},Lt={class:"card-body py-3"},Et={key:0,class:"d-flex align-items-center justify-content-center w-100 py-5"},Vt=e("h4",null,"No Pending Orders",-1),qt=[Vt],Ft={key:1,class:"d-flex align-items-center justify-content-center w-100 py-5"},Kt=e("div",{class:"spinner-border spinner-border-sm align-middle ms-2 w-25px h-25px"},null,-1),Wt=[Kt],zt={key:2,class:"table-responsive"},jt={class:"table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3"},Yt=e("thead",null,[e("tr",{class:"fw-bold text-muted"},[e("th",{class:"min-w-150px"},"Order Id"),e("th",{class:"min-w-120px"},"Order Placed"),e("th",{class:"min-w-140px"},"Pickup"),e("th",{class:"min-w-120px"},"Dropoff"),e("th",{class:"min-w-120px"},"Shipment Type"),e("th",{class:"min-w-120px"},"Order Type"),e("th",{class:"min-w-120px"},"Payment Type"),e("th",{class:"min-w-120px"},"Status"),e("th",{class:"min-w-100px text-end"},"Actions")])],-1),Gt={class:"text-dark fw-bold text-hover-primary fs-6"},Ht={class:"text-dark fw-bold text-hover-primary fs-6"},Jt={class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},Qt={class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},Xt={class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},Zt={class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},es={class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},ts={class:"text-end"},ss=["onClick"],os={class:"px-10"};function as(t,s,r,m,b,u){var _,p,y;const o=g("KTIcon"),i=g("TableFooter"),n=g("StartDeliveryModal");return d(),c(I,null,[e("div",{class:L([t.widgetClasses,"card"])},[e("div",Ut,[e("h3",Mt,[Rt,e("span",Bt,a((_=t.dataToDisplay)==null?void 0:_.length)+" Orders",1)])]),e("div",Lt,[((p=t.dataToDisplay)==null?void 0:p.length)===0?(d(),c("div",Et,qt)):C("",!0),t.dataToDisplay?C("",!0):(d(),c("div",Ft,Wt)),((y=t.dataToDisplay)==null?void 0:y.length)&&t.dataToDisplay?(d(),c("div",zt,[e("table",jt,[Yt,e("tbody",null,[(d(!0),c(I,null,V(t.dataToDisplay,h=>(d(),c("tr",{key:h.id},[e("td",null,[e("span",Gt,a(h.id),1)]),e("td",Ht,a(t.formatDate(h.created_at)),1),e("td",null,[e("span",Jt,a(h.pickup_address),1)]),e("td",null,[e("span",Qt,a(h.dropoff_address),1)]),e("td",null,[e("span",Xt,a(h.package_type),1)]),e("td",null,[e("span",Zt,a(h.order_type),1)]),e("td",null,[e("span",es,a(h.payment_type),1)]),e("td",null,[e("span",{class:L([`badge-light-${t.statusFilter[h.status]}`,"badge"])},a(h.status),3)]),e("td",ts,[e("button",{"data-bs-toggle":"modal","data-bs-target":"#kt_start_delivery_modal",class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",onClick:X($=>t.updateVieworder(h),["prevent"])},[l(o,{"icon-name":"switch","icon-class":"fs-3"})],8,ss)])]))),128))])]),e("div",os,[l(i,{onPageChange:t.pageChange,"current-page":t.currentPage,itemsPerPage:t.itemsPerPage,"onUpdate:itemsPerPage":s[0]||(s[0]=h=>t.itemsPerPage=h),count:t.totalItems,"items-per-page-dropdown-enabled":t.itemsPerPageDropdownEnabled},null,8,["onPageChange","current-page","itemsPerPage","count","items-per-page-dropdown-enabled"])])])):C("",!0)])],2),l(n,{OrderData:t.CustomerVieworderData},null,8,["OrderData"])],64)}const ns=P(Nt,[["render",as]]),is=S({name:"start-delivery-modal",props:{newState:{type:Boolean}},components:{},setup(t){const s=v(null),r=v(null);v(null);const m=N(),{token:b,refreshProfile:u}=m,o=v(null),{API_URL:i,badInternetAlert:n,errorAlert:_,successAlert:p}=E;M(()=>{r.value=document.getElementById("kt_update_is_active_modal")});const y=async()=>{!s.value||(s.value&&(s.value.disabled=!0,s.value.setAttribute("data-kt-indicator","on")),await W.post(i+"stateUpdate",{isActive:t.newState},{headers:{Authorization:`Bearer ${b}`}}).then(()=>{Z.fire({text:"Profile has been updated!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{var $;($=s.value)==null||$.removeAttribute("data-kt-indicator"),s.value.disabled=!1,u()})}).catch($=>{z($)}).finally(()=>{var $;ce(r.value),($=s.value)==null||$.removeAttribute("data-kt-indicator"),s.value.disabled=!1}))};return{submit:async()=>{await y()},submitButtonRef:s,modalRef:o,getAssetPath:k,Multiselect:ee,formatDate:q,UpdateState:y}}}),rs={class:"modal fade",id:"kt_update_is_active_modal",ref:"startDeleveryModalRef",tabindex:"-1","aria-hidden":"true"},cs={class:"modal-dialog modal-dialog-centered mw-650px"},ds={class:"modal-content"},ls={class:"alert alert-dismissible bg-light-warning d-flex flex-center flex-column py-10 px-10 px-lg-20 mb-10"},ms={type:"button",class:"position-absolute top-0 end-0 m-2 btn btn-icon btn-icon-warning","data-bs-dismiss":"alert"},us={class:"svg-icon svg-icon-1"},_s={class:"svg-icon svg-icon-5tx svg-icon-warning mb-5"},ps={class:"text-center text-dark"},hs={class:"fw-bolder mb-5"},vs=e("div",{class:"separator separator-dashed border-warning opacity-25 mb-5"},null,-1),bs=e("div",{class:"mb-9"},[K(" Note the the state set may affect the "),e("strong",null,"orders you are able to see"),K(", and you commision rate ")],-1),fs={class:"d-flex flex-center flex-wrap"},gs=e("a",{href:"#",class:"btn btn-outline btn-outline-warning btn-active-warning m-2"},"Cancel",-1),ys=e("span",{class:"indicator-label"}," Update Anyway ",-1),$s=e("span",{class:"indicator-progress"},[K(" Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),ws=[ys,$s];function xs(t,s,r,m,b,u){const o=g("inline-svg");return d(),c("div",rs,[e("div",cs,[e("div",ds,[e("div",ls,[e("button",ms,[e("span",us,[l(o,{src:"media/icons/duotune/arrows/arr061.svg"})])]),e("span",_s,[l(o,{src:"media/icons/duotune/general/gen044.svg"})]),e("div",ps,[e("h1",hs," Are you sure you want to make your profile "+a(t.newState?"Active":"In-Active"),1),vs,bs,e("div",fs,[gs,e("button",{ref:"submitButtonRef",onClick:s[0]||(s[0]=(...i)=>t.UpdateState&&t.UpdateState(...i)),id:"kt_add_driver_submit",class:"btn btn-warning m-2"},ws,512)])])])])])],512)}const ks=P(is,[["render",xs]]),Ds=S({name:"driver-dashboard",components:{UpdateProfileModal:ks},setup(){const t=N(),{API_URL:s,ASSETS_URL:r}=E,{user:m,isActive:b}=t,u=v(b);return{getAssetPath:k,user:m,isActive:b,driveisActive:u,API_URL:s,ASSETS_URL:r}}}),Ss={class:"card pb-8 pt-5 mb-xl-8"},Ps={class:"card-body pt-9"},As={class:"d-flex flex-center flex-column"},Cs={class:"symbol symbol-100px symbol-circle mb-7"},Os=["src"],Ts={class:"fs-3 text-gray-800 text-hover-primary fw-bold mb-1"},Is={class:"fs-5 fw-semobold text-muted mb-6"},Ns=e("div",{class:"d-flex flex-stack fs-4"},[e("div",{class:"fw-bold rotate collapsible"},"Details")],-1),Us=e("div",{class:"separator separator-dashed my-3"},null,-1),Ms={id:"kt_customer_view_details",class:"collapse show"},Rs={class:"py-5 fs-6"},Bs={class:"badge badge-light-info d-inline"},Ls=e("div",{class:"fw-bold mt-5"},"Account ID",-1),Es={class:"text-gray-600"},Vs={class:"d-flex flex-stack"},qs={class:"d-flex py-5"},Fs={class:"d-flex flex-column"},Ks={class:"fs-5 text-dark text-hover-primary fw-bold"},Ws={class:"d-flex justify-content-end"},zs={class:"form-check form-switch form-switch-sm form-check-custom form-check-solid"},js=e("span",{class:"form-check-label fw-semobold text-muted",for:"kt_modal_connected_accounts_google"},null,-1),Ys=e("div",{class:"d-flex justify-content-center"},[e("button",{"data-bs-toggle":"modal","data-bs-target":"#kt_update_is_active_modal",class:"btn btn-icon w-100 btn-warning btn-md me-1"}," Update Status ")],-1);function Gs(t,s,r,m,b,u){const o=g("UpdateProfileModal");return d(),c(I,null,[e("div",Ss,[e("div",Ps,[e("div",As,[e("div",Cs,[e("img",{src:t.user.profile?`${t.ASSETS_URL+t.user.profile}`:t.getAssetPath("media/avatars/blank.png"),alt:"image"},null,8,Os)]),e("span",Ts,a(t.user.firstName+" "+t.user.lastName),1),e("div",Is,a(t.user.type),1)]),Ns,Us,e("div",Ms,[e("div",Rs,[e("div",Bs,a(t.isActive?"Active":"In-Active"),1),Ls,e("div",Es,a(t.user.id),1),e("div",Vs,[e("div",qs,[e("div",Fs,[e("span",Ks,"Update Profile "+a(t.isActive?"from active":"to active"),1)])]),e("div",Ws,[e("label",zs,[se(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=i=>t.driveisActive=i),id:"kt_modal_connected_accounts_google"},null,512),[[oe,t.driveisActive]]),js])])]),Ys])])])]),l(o,{newState:t.driveisActive},null,8,["newState"])],64)}const Hs=P(Ds,[["render",Gs]]),Js=S({name:"default-dashboard-widget-8",components:{},props:{PendingDelivery:{type:Object},className:{type:String,required:!1},image:{type:String,required:!0}},setup(){const{ASSETS_URL:t}=E;return{getAssetPath:k,ASSETS_URL:t,formatDate:q}}}),Qs={class:"card-body py-9"},Xs={class:"row gx-9 h-100"},Zs={class:"col-sm-6 mb-10 mb-sm-0"},eo={class:"col-sm-6"},to={class:"d-flex flex-column h-100"},so={class:"mb-7"},oo={class:"d-flex flex-stack mb-6"},ao={class:"flex-shrink-0 me-5"},no=e("span",{class:"text-gray-400 fs-7 fw-bold me-2 d-block lh-1 pb-1"},"Current Delivery",-1),io=e("span",{class:"text-gray-400 fs-1 fw-bold"},"ID : ",-1),ro={class:"text-gray-800 fs-1 fw-bold"},co={class:"badge badge-light-primary flex-shrink-0 align-self-center py-3 px-4 fs-7"},lo={class:"d-flex align-items-center flex-wrap d-grid gap-2"},mo={class:"d-flex align-items-center me-5 me-xl-13"},uo={class:"symbol symbol-30px symbol-circle me-3"},_o=["src"],po={class:"m-0"},ho={class:"fw-semibold text-gray-400 d-block fs-8"},vo={class:"fw-bold text-gray-800 text-hover-primary fs-7"},bo={class:"d-flex align-items-center me-5 me-xl-13"},fo=e("div",{class:"symbol symbol-30px symbol-circle me-3"},[e("span",{class:"menu-icon"},[e("i",{class:"bi bi-phone bi fs-1"})])],-1),go={class:"m-0"},yo=e("span",{class:"fw-semibold text-gray-400 d-block fs-8"},"Phone Number",-1),$o={class:"fw-bold text-gray-800 text-hover-primary fs-7"},wo={class:"d-flex align-items-center"},xo={class:"symbol symbol-30px symbol-circle me-3"},ko={class:"symbol-label bg-success"},Do={class:"m-0"},So=e("span",{class:"fw-semibold text-gray-400 d-block fs-8"},"Price",-1),Po={class:"fw-bold text-gray-800 fs-7"},Ao={class:"mb-6"},Co={class:"fw-semibold text-gray-600 fs-6 mb-8 d-block"},Oo={class:"d-flex"},To={class:"border border-gray-300 border-dashed rounded min-w-100px w-100 py-2 px-4 me-6 mb-3"},Io={class:"fs-6 text-gray-700 fw-bold"},No=e("div",{class:"fw-semibold text-gray-400"},"Order Placed At",-1),Uo=e("div",{class:"border border-gray-300 border-dashed rounded min-w-100px w-100 py-2 px-4 mb-3"},[e("span",{class:"fs-6 text-gray-700 fw-bold"}),e("div",{class:"fw-semibold text-gray-400"},"Expected By")],-1),Mo={class:"d-flex"},Ro={class:"border border-gray-300 border-dashed rounded min-w-100px w-100 py-2 px-4 me-6 mb-3"},Bo={class:"fs-6 text-gray-700 fw-bold"},Lo=e("div",{class:"fw-semibold text-gray-400"},"Pickup",-1),Eo={class:"border border-gray-300 border-dashed rounded min-w-100px w-100 py-2 px-4 mb-3"},Vo={class:"fs-6 text-gray-700 fw-bold"},qo=e("div",{class:"fw-semibold text-gray-400"},"Expected By",-1);function Fo(t,s,r,m,b,u){var i,n,_,p,y,h,$,w,D,x,A,O,U,T,R;const o=g("KTIcon");return d(),c("div",{class:L(["card card-flush",t.className])},[e("div",Qs,[e("div",Xs,[e("div",Zs,[e("div",{class:"bgi-no-repeat bgi-position-center bgi-size-cover card-rounded min-h-400px min-h-sm-100 h-100",style:Q({backgroundSize:"100% 100%",backgroundImage:`url(${t.image})`})},null,4)]),e("div",eo,[e("div",to,[e("div",so,[e("div",oo,[e("div",ao,[no,io,e("span",ro,a((i=t.PendingDelivery)==null?void 0:i.id),1)]),e("span",co,a((n=t.PendingDelivery)==null?void 0:n.status),1)]),e("div",lo,[e("div",mo,[e("div",uo,[e("img",{src:(_=t.PendingDelivery)!=null&&_.customer.profile?`${t.ASSETS_URL+((p=t.PendingDelivery)==null?void 0:p.customer.profile)}`:t.getAssetPath("media/avatars/blank.png"),alt:"image"},null,8,_o)]),e("div",po,[e("span",ho,a((y=t.PendingDelivery)==null?void 0:y.customer.type),1),e("span",vo,a(((h=t.PendingDelivery)==null?void 0:h.customer.lastName)+" "+(($=t.PendingDelivery)==null?void 0:$.customer.firstName)),1)])]),e("div",bo,[fo,e("div",go,[yo,e("span",$o,a((w=t.PendingDelivery)==null?void 0:w.customer.phone_number),1)])]),e("div",wo,[e("div",xo,[e("span",ko,[l(o,{"icon-name":"abstract-41","icon-class":"fs-5 text-white"})])]),e("div",Do,[So,e("span",Po," \u20A6"+a((D=t.PendingDelivery)!=null&&D.customer_order.total_payment?new Intl.NumberFormat().format(Number((x=t.PendingDelivery)==null?void 0:x.customer_order.total_payment)):""),1)])])])]),e("div",Ao,[e("span",Co,a((A=t.PendingDelivery)==null?void 0:A.customer_order.shipment_description),1),e("div",Oo,[e("div",To,[e("span",Io,a((O=t.PendingDelivery)!=null&&O.customer_order.created_at?t.formatDate((U=t.PendingDelivery)==null?void 0:U.customer_order.created_at):""),1),No]),Uo]),e("div",Mo,[e("div",Ro,[e("span",Bo,a((T=t.PendingDelivery)==null?void 0:T.customer_order.pickup_address),1),Lo]),e("div",Eo,[e("span",Vo,a((R=t.PendingDelivery)==null?void 0:R.customer_order.dropoff_address),1),qo])])])])])])])],2)}const Ko=P(Js,[["render",Fo]]),Wo=S({name:"driver-dashboard",components:{RecentOrdersTable:ns,StatisticsWidget5:H,DriverProfileStats:Hs,CurrentDelivery:Ko},setup(){const t=J(),{UpdateDriverStats:s,driverStats:r}=t,{API_URL:m}=E,b=N(),u=v(null),{user:o,token:i}=b,n=async()=>{const _=await W.get(m+"deliveries/driver/getDriverOngoingDeliveries",{headers:{Authorization:`Bearer ${i}`}}).then(p=>p.data).catch(p=>{u.value=null,z(p)});console.log(_.data),u.value=_.data};return M(async()=>{n(),!r.isSet&&s()}),{driverStats:r,getAssetPath:k,PendingDeliveries:u}}}),zo={class:"mx-5"},jo={class:"row g-5 g-xl-8"},Yo={class:"col-xl-4"},Go={class:"col-xl-4"},Ho={class:"col-xl-4"},Jo={class:"row g-2 g-xl-8"},Qo={class:"col-xl-8"},Xo={class:"col-xl-4"};function Zo(t,s,r,m,b,u){const o=g("StatisticsWidget5"),i=g("CurrentDelivery"),n=g("RecentOrdersTable"),_=g("DriverProfileStats");return d(),c("div",zo,[e("div",jo,[e("div",Yo,[l(o,{"widget-classes":"card-xl-stretch mb-xl-8","icon-name":"basket",color:"danger","icon-color":"white",title:`${t.driverStats.total_deliveries}`,description:"Approved and Verified"},null,8,["title"])]),e("div",Go,[l(o,{"widget-classes":"card-xl-stretch mb-xl-8","icon-name":"cheque",color:"primary","icon-color":"white",title:`${t.driverStats.total_distance+" km"}`,description:"In Km Between delivery locations"},null,8,["title"])]),e("div",Ho,[l(o,{"widget-classes":"card-xl-stretch mb-5 mb-xl-8","icon-name":"chart-simple-3",color:"success","icon-color":"white",title:`${t.driverStats.performance*100}`,description:"By distance, pickup and dropoff time"},null,8,["title"])])]),(d(!0),c(I,null,V(t.PendingDeliveries,p=>(d(),c("div",{key:p.id,class:"col-xl-12 mb-5"},[l(i,{PendingDelivery:p,className:"h-xl-100",image:t.getAssetPath("media/misc/pattern-2.png")},null,8,["PendingDelivery","image"])]))),128)),e("div",Jo,[e("div",Qo,[l(n,{"widget-classes":"mb-5 mb-xl-8 pb-8"})]),e("div",Xo,[l(_)])])])}const ea=P(Wo,[["render",Zo]]),ta=S({name:"dropdown-3",components:{}}),sa={class:"menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semobold py-4 w-250px fs-6","data-kt-menu":"true"},oa=ae('<div class="menu-item px-5"><div class="menu-content text-muted pb-2 px-5 fs-7 text-uppercase"> Payments </div></div><div class="menu-item px-5"><a href="#" class="menu-link px-5"> Create invoice </a></div><div class="menu-item px-5"><a href="#" class="menu-link flex-stack px-5"> Create payments <i class="fas fa-exclamation-circle ms-2 fs-7" data-bs-toggle="tooltip" title="Specify a target name for future usage and reference"></i></a></div><div class="menu-item px-5" data-kt-menu-trigger="hover" data-kt-menu-placement="left-start"><a href="#" class="menu-link px-5"><span class="menu-title">Subscription</span><span class="menu-arrow"></span></a><div class="menu-sub menu-sub-dropdown w-175px py-4"><div class="menu-item px-3"><a href="#" class="menu-link px-5"> Apps </a></div><div class="menu-item px-3"><a href="#" class="menu-link px-5"> Billing </a></div><div class="menu-item px-3"><a href="#" class="menu-link px-5"> Statements </a></div><div class="separator my-2"></div><div class="menu-item px-3"><div class="menu-content px-3"><label class="form-check form-switch form-check-custom form-check-solid"><input class="form-check-input w-30px h-20px" type="checkbox" value="" name="notifications" checked id="kt_user_menu_notifications"><span class="form-check-label text-muted fs-6" for="kt_user_menu_notifications"> Notifications </span></label></div></div></div></div><div class="separator my-3"></div><div class="menu-item px-5"><div class="menu-content text-muted pb-2 px-5 fs-7 text-uppercase"> Account </div></div><div class="menu-item px-5"><a href="#" class="menu-link px-5"> Reports </a></div><div class="menu-item px-5 my-1"><a href="#" class="menu-link px-5"> Account Settings </a></div><div class="menu-item px-5"><a href="#" class="menu-link text-danger px-5"> Delete customer </a></div>',9),aa=[oa];function na(t,s,r,m,b,u){return d(),c("div",sa,aa)}const ia=P(ta,[["render",na]]),ra=S({name:"customer-notifications",components:{Dropdown3:ia},props:{widgetClasses:String},setup(){const t=J(),{userActivity:s,UpdateUserActivity:r}=t,m=v(s),b=v([{color:"warning",icon:k("media/icons/duotune/abstract/abs027.svg"),title:"Account Created",text:"Due in 2 Days",number:"5th May 2023  06:30 PM"},{color:"success",icon:k("media/icons/duotune/art/art005.svg"),title:"Email Verified",text:"Due in 2 Days",number:"6th May 2023  06:14 PM"},{color:"danger",icon:k("media/icons/duotune/communication/com012.svg"),title:"Shipment Order Placed",text:"Due in 5 Days",number:"11th May 2023  10:30 AM"},{color:"info",icon:k("media/icons/duotune/communication/com012.svg"),title:"Shipment Dilivered",text:"Due in 7 Days",number:"12th May 2023  02:33 PM"}]);return M(async()=>{r(),m.value=s}),{list:b,getAssetPath:k,userActivity:s,ACTIVITY_COLOUR_MAP:de,formatDate:q,staticStore:t}}}),ca={class:"card card-flush"},da={class:"card-header py-6 border-0"},la=e("div",null,[e("h3",{class:"card-title fw-bold text-dark"},"Notifications"),e("span",{class:"text-gray-400 mt-1 fw-semibold fs-6"},"Updated 37 minutes ago")],-1),ma={class:"card-toolbar"},ua={type:"button",class:"btn btn-sm btn-icon btn-color-primary btn-active-light-primary","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end","data-kt-menu-flip":"top-end"},_a={class:"card-body pt-0",style:{"max-height":"410.66px","overflow-x":"scroll"}},pa={key:0},ha={class:"flex-grow-1 me-2"},va={href:"#",class:"fw-bold text-gray-800 text-hover-primary fs-6"};function ba(t,s,r,m,b,u){const o=g("KTIcon"),i=g("Dropdown3");return d(),c("div",ca,[e("div",da,[la,e("div",ma,[e("button",ua,[l(o,{"icon-name":"category","icon-class":"fs-2"})]),l(i)])]),e("div",_a,[t.userActivity.activities.length>1?(d(),c("div",pa,[(d(!0),c(I,null,V(t.userActivity.activities,(n,_)=>{var p,y,h;return d(),c("div",{key:n.id,class:L([[t.list.length-1!==_,`bg-light-${n.data_type!==null?(p=t.ACTIVITY_COLOUR_MAP[n.data_type])==null?void 0:p.color:"secondary"}`],"d-flex align-items-center rounded p-5 mb-7"])},[l(o,{"icon-name":"abstract-26","icon-class":`text-${n.data_type!==null?(y=t.ACTIVITY_COLOUR_MAP[n.data_type])==null?void 0:y.color:"gray-900"} fs-1 me-5`},null,8,["icon-class"]),e("div",ha,[e("a",va,a(n.description),1)]),e("span",{class:L([`text-${n.data_type!==null?(h=t.ACTIVITY_COLOUR_MAP[n.data_type])==null?void 0:h.color:"gray-900"}`,"fw-bold py-1"])},a(t.formatDate(n.created_at)),3)],2)}),128))])):C("",!0)])])}const fa=P(ra,[["render",ba]]),ga=S({name:"customer-dashboard",components:{CustomerNotifications:fa,CustomerDeliveryStats:le},setup(){return{}}}),ya={class:"row g-5 g-xl-8"},$a={class:"col-xl-4"},wa={class:"col-xl-8"};function xa(t,s,r,m,b,u){const o=g("CustomerNotifications"),i=g("CustomerDeliveryStats");return d(),c("div",null,[e("div",ya,[e("div",$a,[l(o,{"widget-classes":"card-xl-stretch mb-5 mb-xl-8"})]),e("div",wa,[l(i)])])])}const ka=P(ga,[["render",xa]]),Da=S({name:"vendor-dashboard",components:{StatisticsWidget5:H},setup(){N();const t=v();return{getAssetPath:k,statics:t}}}),Sa={class:"mx-5"},Pa={class:"row g-5 g-xl-8"},Aa={class:"col-xl-4"},Ca={class:"col-xl-4"},Oa={class:"col-xl-4"};function Ta(t,s,r,m,b,u){const o=g("StatisticsWidget5");return d(),c("div",Sa,[e("div",Pa,[e("div",Aa,[l(o,{"widget-classes":"card-xl-stretch mb-xl-8","icon-name":"basket",color:"danger","icon-color":"white",title:"2",description:"Dishes"})]),e("div",Ca,[l(o,{"widget-classes":"card-xl-stretch mb-xl-8","icon-name":"cheque",color:"primary","icon-color":"white",title:"3",description:"Orders"})]),e("div",Oa,[l(o,{"widget-classes":"card-xl-stretch mb-5 mb-xl-8","icon-name":"chart-simple-3",color:"success","icon-color":"white",title:"2",description:"Sales this month"})])])])}const Ia=P(Da,[["render",Ta]]),Na=S({name:"main-dashboard",components:{AdminDashboard:Oe,DriverDashboard:ea,CustomerDashboard:ka,VendorDashboard:Ia},setup(){const t=N(),{user:s}=t;return M(()=>{if(!s)return ne.push({name:"sign-in"})}),{getAssetPath:k,user:s}}}),Ua={key:0},Ma={key:1},Ra={key:2},Ba={key:3};function La(t,s,r,m,b,u){const o=g("AdminDashboard"),i=g("CustomerDashboard"),n=g("DriverDashboard"),_=g("VendorDashboard");return d(),c(I,null,[t.user.type==="Admin"?(d(),c("div",Ua,[l(o)])):C("",!0),t.user.type==="Customer"?(d(),c("div",Ma,[l(i)])):C("",!0),t.user.type==="Driver"?(d(),c("div",Ra,[l(n)])):C("",!0),t.user.type==="Vendor"?(d(),c("div",Ba,[l(_)])):C("",!0)],64)}const en=P(Na,[["render",La]]);export{en as default};
