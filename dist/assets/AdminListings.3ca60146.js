import{g as I}from"./assets.6f11792f.js";import{d as U,a5 as J,a6 as Y,a7 as Q,u as O,G as u,l as W,a4 as z,m as R,_ as F,b as w,i as e,j as o,w as S,k as h,o as $,an as X,p as k,t as m,ab as M,x as E,c as G,F as q,e as Z,Y as K,v as ae}from"./index.f8ca9675.js";import{S as T}from"./sweetalert2.d8000a3b.js";import{c as ee,a as P}from"./object.a52185a5.js";import{M as j}from"./multiselect.bc727701.js";import{d as C}from"./defaultData.9a1fdc93.js";import{E as oe}from"./errorHandler.ce533688.js";import{T as ie}from"./TableFooter.3f00d523.js";import{f as le}from"./formatDate.672d0471.js";import"./TableFooter.vue_vue_type_script_lang.5421c060.js";const ne=U({name:"add-admin-modal",components:{ErrorMessage:J,Field:Y,VForm:Q,Multiselect:j},setup(){const s=O(),{user:a,token:f,refreshProfile:v}=s,d=u(null),D=u(null);u(null);const b=u(null),{API_URL:n,badInternetAlert:l,errorAlert:c,successAlert:A}=R,t=u({mode:"tags",value:[],placeholder:"Select permissions",search:!0,trackBy:"name",label:"name",options:[{value:"editDriver",name:"Edit Driver"},{value:"addDriver",name:"Add Driver"},{value:"deleteDriver",name:"Delete Driver"}]}),p=u({firstName:"",lastName:"",email:"",userName:"",password:"",permissions:[],phone_number:""}),_=ee().shape({firstName:P().required().label("First Name"),lastName:P().required().label("Last Name"),email:P().required().label("Email"),userName:P().required().label("UserName"),password:P().required().label("Password"),phone_number:P().required().label("Phone Number")});W(()=>{D.value=document.getElementById("kt_modal_add_admin")});const i=async()=>{d.value&&(d.value.disabled=!0,d.value.setAttribute("data-kt-indicator","on"));const g=new FormData;g.append("firstName",p.value.firstName),g.append("lastName",p.value.lastName),g.append("email",p.value.email),g.append("username",p.value.userName),g.append("password",p.value.password),g.append("phone_number",p.value.phone_number),g.append("permissions",JSON.stringify(t.value)),await z.post(n+"admin",g,{headers:{Authorization:`Bearer ${f}`}}).then(()=>{T.fire({text:"Profile has been created!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})}).catch(B=>{B.response.data.message=="User does not exist"?T.fire({text:"Invalid Email or Password",icon:"error",buttonsStyling:!1,confirmButtonText:"Try again!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}}).then(()=>{var N;(N=d.value)==null||N.removeAttribute("data-kt-indicator"),d.value.disabled=!1}):T.fire({text:`${B.message}`,icon:"error",buttonsStyling:!1,confirmButtonText:"Try again!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}}).then(()=>{var N;(N=d.value)==null||N.removeAttribute("data-kt-indicator"),d.value.disabled=!1})})};return{newAdminData:p,validationSchema:_,submit:async()=>{var g;!d.value||(d.value.disabled=!0,d.value.setAttribute("data-kt-indicator","on"),await i(),(g=d.value)==null||g.removeAttribute("data-kt-indicator"),d.value.disabled=!1)},submitButtonRef:d,modalRef:b,getAssetPath:I,permissionsSelect:t,Multiselect:j}}}),de={class:"modal fade",id:"kt_modal_add_admin",ref:"addDriverModalRef",tabindex:"-1","aria-hidden":"true"},re={class:"modal-dialog modal-dialog-centered mw-650px"},me={class:"modal-content"},ce={class:"modal-header",id:"kt_modal_add_admin_header"},_e=e("h2",{class:"fw-bold"},"Create Admin User",-1),ue={id:"kt_modal_add_admin_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},fe={class:"modal-body py-10 px-lg-17"},pe={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_admin_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_admin_header","data-kt-scroll-wrappers":"#kt_modal_add_admin_scroll","data-kt-scroll-offset":"300px"},he={class:"mb-5 row"},be={class:"col-6"},ve=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"First Name",-1),ge={class:"fv-plugins-message-container"},we={class:"fv-help-block"},$e={class:"col-6"},ye=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Last Name",-1),De={class:"fv-plugins-message-container"},Ae={class:"fv-help-block"},Pe={class:"mb-5 row"},ke={class:"col-6"},Ne=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Username",-1),Ve={class:"fv-plugins-message-container"},Se={class:"fv-help-block"},Ee={class:"col-6"},Te=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Password",-1),Me={class:"fv-plugins-message-container"},xe={class:"fv-help-block"},Ce={class:"mb-5 row"},Ue={class:"col-6"},Fe=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Email",-1),Be={class:"fv-plugins-message-container"},qe={class:"fv-help-block"},Ie={class:"col-6"},Re=e("label",{class:"fw-bold font-weight-bolderfs-5 fw-semobold mb-2"},"Permissions",-1),Le={class:"multiselect-tag is-user"},Ke=["src"],je=["onMousedown"],Oe=["src"],ze={class:"mb-5 row"},Ge={class:"col-6"},He=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Phone Number",-1),Je={class:"fv-plugins-message-container"},Ye={class:"fv-help-block"},Qe={class:"modal-footer flex-center"},We=e("button",{type:"reset",id:"kt_modal_add_admin_cancel",class:"btn btn-light me-3"}," Discard ",-1),Xe={ref:"submitButtonRef",type:"submit",id:"kt_modal_add_admin_submit",class:"btn btn-primary"},Ze=e("span",{class:"indicator-label"}," Submit ",-1),es=e("span",{class:"indicator-progress"},[k(" Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),ss=[Ze,es];function ts(s,a,f,v,d,D){const b=h("KTIcon"),n=h("Field"),l=h("ErrorMessage"),c=h("Multiselect"),A=h("VForm");return $(),w("div",de,[e("div",re,[e("div",me,[e("div",ce,[_e,e("div",ue,[o(b,{"icon-name":"cross","icon-class":"fs-1"})])]),o(A,{id:"kt_modal_add_admin_form",class:"form",onSubmit:s.submit,"validation-schema":s.validationSchema},{default:S(()=>[e("div",fe,[e("div",pe,[e("div",he,[e("div",be,[ve,o(n,{type:"text",class:"form-control form-control-solid",placeholder:"First Name",name:"firstName",modelValue:s.newAdminData.firstName,"onUpdate:modelValue":a[0]||(a[0]=t=>s.newAdminData.firstName=t)},null,8,["modelValue"]),e("div",ge,[e("div",we,[o(l,{name:"firstName"})])])]),e("div",$e,[ye,o(n,{type:"text",class:"form-control form-control-solid",placeholder:"Last Name",name:"lastName",modelValue:s.newAdminData.lastName,"onUpdate:modelValue":a[1]||(a[1]=t=>s.newAdminData.lastName=t)},null,8,["modelValue"]),e("div",De,[e("div",Ae,[o(l,{name:"lastName"})])])])]),e("div",Pe,[e("div",ke,[Ne,o(n,{type:"text",class:"form-control form-control-solid",placeholder:"Username",name:"userName",modelValue:s.newAdminData.userName,"onUpdate:modelValue":a[2]||(a[2]=t=>s.newAdminData.userName=t)},null,8,["modelValue"]),e("div",Ve,[e("div",Se,[o(l,{name:"userName"})])])]),e("div",Ee,[Te,o(n,{type:"text",class:"form-control form-control-solid",placeholder:"Password",name:"password",modelValue:s.newAdminData.password,"onUpdate:modelValue":a[3]||(a[3]=t=>s.newAdminData.password=t)},null,8,["modelValue"]),e("div",Me,[e("div",xe,[o(l,{name:"password"})])])])]),e("div",Ce,[e("div",Ue,[Fe,o(n,{type:"text",class:"form-control form-control-solid",placeholder:"Email",name:"email",modelValue:s.newAdminData.email,"onUpdate:modelValue":a[4]||(a[4]=t=>s.newAdminData.email=t)},null,8,["modelValue"]),e("div",Be,[e("div",qe,[o(l,{name:"email"})])])]),e("div",Ie,[Re,o(c,X({class:"form-select form-select-solid",modelValue:s.permissionsSelect.value,"onUpdate:modelValue":a[6]||(a[6]=t=>s.permissionsSelect.value=t)},s.permissionsSelect),{tag:S(({option:t,handleTagRemove:p,disabled:_})=>[e("div",Le,[e("img",{src:t.image},null,8,Ke),k(" "+m(t.name)+" ",1),_?E("",!0):($(),w("i",{key:0,onClick:a[5]||(a[5]=M(()=>{},["prevent"])),onMousedown:M(i=>p(t,i),["prevent","stop"])},null,40,je))])]),option:S(({option:t})=>[e("img",{class:"user-image",src:t.image},null,8,Oe),k(" "+m(t.name),1)]),_:1},16,["modelValue"])])]),e("div",ze,[e("div",Ge,[He,o(n,{type:"text",class:"form-control form-control-solid",placeholder:"Phone",name:"phone_number",modelValue:s.newAdminData.phone_number,"onUpdate:modelValue":a[7]||(a[7]=t=>s.newAdminData.phone_number=t)},null,8,["modelValue"]),e("div",Je,[e("div",Ye,[o(l,{name:"phone_number"})])])])])])]),e("div",Qe,[We,e("button",Xe,ss,512)])]),_:1},8,["onSubmit","validation-schema"])])])],512)}const se=F(ne,[["render",ts]]),as=U({name:"edit-admin-modal",props:{ProfileData:{type:Object}},components:{ErrorMessage:J,Field:Y,VForm:Q,Multiselect:j},setup(s){const{API_URL:a}=R,f=u(null),v=u(null),d=u(null),D=O(),{user:b,token:n}=D,l=u({mode:"tags",value:[],placeholder:"Select permissions",search:!0,trackBy:"name",label:"name",options:[{value:"editDriver",name:"Edit Driver"},{value:"addDriver",name:"Add Driver"},{value:"deleteDriver",name:"Delete Driver"}]}),c=G(()=>{var i;return console.log("object"),s.ProfileData&&s.ProfileData.id?(A(),{firstName:s.ProfileData.firstName||"",lastName:s.ProfileData.lastName||"",email:s.ProfileData.email||"",gender:s.ProfileData.gender||"",profile:s.ProfileData.profile||"",phone_number:s.ProfileData.phone_number||"",id:s.ProfileData.id||"",permissions:((i=s.ProfileData.permissions)==null?void 0:i.map(y=>y.permission))||[]}):{...C.AdminEmpty}}),A=()=>{var i,y;l.value.value=(i=s.ProfileData)!=null&&i.permissions?(y=s.ProfileData)==null?void 0:y.permissions.map(g=>g.permission):[]},t=ee().shape({firstName:P().required().label("First Name"),lastName:P().required().label("Last Name"),email:P().required().label("Email"),phone_number:P().required().label("phone_number")}),p=async()=>{if(f.value&&(f.value.disabled=!0,f.value.setAttribute("data-kt-indicator","on")),!b)return;const i=new FormData;i.append("id",`${c.value.id}`),i.append("firstName",c.value.lastName),i.append("lastName",c.value.firstName),i.append("phone_number",c.value.phone_number),i.append("gender",c.value.gender),i.append("permissions",`${c.value.permissions}`),i.append("email",c.value.email),i.append("_method","put"),await z.post(a+"admin",i,{method:"put",headers:{Authorization:`Bearer ${n}`}}).then(()=>{T.fire({text:"Profile has been updated!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})}).catch(y=>{oe(y)})};return{editAdminData:c,validationSchema:t,submit:async()=>{var i;!f.value||(await p(),f.value&&(f.value.disabled=!1,(i=f.value)==null||i.removeAttribute("data-kt-indicator")))},submitButtonRef:f,modalRef:v,createAPIKeyModalRef:d,getAssetPath:I,permissionsSelect:l}}}),os={class:"modal fade",id:"kt_modal_edit_admin",ref:"editAdminModalRef",tabindex:"-1","aria-hidden":"true"},is={class:"modal-dialog modal-dialog-centered mw-650px"},ls={class:"modal-content"},ns={class:"modal-header",id:"kt_modal_edit_admin_header"},ds=e("h2",{class:"fw-bold"},"Edit Admin User",-1),rs={id:"kt_modal_edit_admin_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},ms={class:"modal-body py-10 px-lg-17"},cs={class:"scroll-y me-n7 pe-7",id:"kt_modal_create_api_key_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_create_api_key_header","data-kt-scroll-wrappers":"#kt_modal_create_api_key_scroll","data-kt-scroll-offset":"300px"},_s={class:"mb-5 row"},us={class:"col-6"},fs=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"First Name",-1),ps={class:"fv-plugins-message-container"},hs={class:"fv-help-block"},bs={class:"col-6"},vs=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Last Name",-1),gs={class:"fv-plugins-message-container"},ws={class:"fv-help-block"},$s={class:"mb-5 row"},ys={class:"col-6"},Ds=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Phone Number",-1),As={class:"fv-plugins-message-container"},Ps={class:"fv-help-block"},ks={class:"col-6"},Ns=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Email",-1),Vs={class:"fv-plugins-message-container"},Ss={class:"fv-help-block"},Es={class:"mb-5 row"},Ts={class:"col-6"},Ms=e("label",{class:"fw-bold font-weight-bolderfs-5 fw-semobold mb-2"},"Permissions",-1),xs={class:"multiselect-tag is-user"},Cs=["src"],Us=["onMousedown"],Fs=["src"],Bs={class:"modal-footer flex-center"},qs=e("button",{type:"reset",id:"kt_modal_create_api_key_cancel",class:"btn btn-light me-3"}," Discard ",-1),Is={ref:"submitButtonRef",type:"submit",id:"kt_modal_create_api_key_submit",class:"btn btn-primary"},Rs=e("span",{class:"indicator-label"}," Submit ",-1),Ls=e("span",{class:"indicator-progress"},[k(" Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),Ks=[Rs,Ls];function js(s,a,f,v,d,D){const b=h("KTIcon"),n=h("Field"),l=h("ErrorMessage"),c=h("Multiselect"),A=h("VForm");return $(),w("div",os,[e("div",is,[e("div",ls,[e("div",ns,[ds,e("div",rs,[o(b,{"icon-name":"cross","icon-class":"fs-1"})])]),o(A,{id:"kt_modal_create_api_key_form",class:"form",onSubmit:s.submit,"validation-schema":s.validationSchema},{default:S(()=>[e("div",ms,[e("div",cs,[e("div",_s,[e("div",us,[fs,o(n,{type:"text",class:"form-control form-control-solid",placeholder:"First Name",name:"firstName",modelValue:s.editAdminData.firstName,"onUpdate:modelValue":a[0]||(a[0]=t=>s.editAdminData.firstName=t)},null,8,["modelValue"]),e("div",ps,[e("div",hs,[o(l,{name:"firstName"})])])]),e("div",bs,[vs,o(n,{type:"text",class:"form-control form-control-solid",placeholder:"Last Name",name:"lastName",modelValue:s.editAdminData.lastName,"onUpdate:modelValue":a[1]||(a[1]=t=>s.editAdminData.lastName=t)},null,8,["modelValue"]),e("div",gs,[e("div",ws,[o(l,{name:"lastName"})])])])]),e("div",$s,[e("div",ys,[Ds,o(n,{type:"text",class:"form-control form-control-solid",placeholder:"phone_number",name:"phone_number",modelValue:s.editAdminData.phone_number,"onUpdate:modelValue":a[2]||(a[2]=t=>s.editAdminData.phone_number=t)},null,8,["modelValue"]),e("div",As,[e("div",Ps,[o(l,{name:"phone_number"})])])]),e("div",ks,[Ns,o(n,{type:"text",class:"form-control form-control-solid",placeholder:"Email",name:"email",modelValue:s.editAdminData.email,"onUpdate:modelValue":a[3]||(a[3]=t=>s.editAdminData.email=t)},null,8,["modelValue"]),e("div",Vs,[e("div",Ss,[o(l,{name:"email"})])])])]),e("div",Es,[e("div",Ts,[Ms,o(c,X({class:"form-select form-select-solid",modelValue:s.permissionsSelect.value,"onUpdate:modelValue":a[5]||(a[5]=t=>s.permissionsSelect.value=t)},s.permissionsSelect),{tag:S(({option:t,handleTagRemove:p,disabled:_})=>[e("div",xs,[e("img",{src:t.image},null,8,Cs),k(" "+m(t.name)+" ",1),_?E("",!0):($(),w("i",{key:0,onClick:a[4]||(a[4]=M(()=>{},["prevent"])),onMousedown:M(i=>p(t,i),["prevent","stop"])},null,40,Us))])]),option:S(({option:t})=>[e("img",{class:"user-image",src:t.image},null,8,Fs),k(" "+m(t.name),1)]),_:1},16,["modelValue"])])])])]),e("div",Bs,[qs,e("button",Is,Ks,512)])]),_:1},8,["onSubmit","validation-schema"])])])],512)}const Os=F(as,[["render",js]]),zs=U({name:"add-admin-modal",components:{},props:{ProfileData:{type:Object}},setup(s){const{API_URL:a,ASSETS_URL:f}=R,v=G(()=>s.ProfileData&&s.ProfileData.id?(console.log(s.ProfileData),{firstName:s.ProfileData.firstName||"",lastName:s.ProfileData.lastName||"",email:s.ProfileData.email||"",created_at:s.ProfileData.created_at||"",title:s.ProfileData.title||"",city:s.ProfileData.city||"",profile:s.ProfileData.profile||"",gender:s.ProfileData.gender||"",type:s.ProfileData.type||"",state:s.ProfileData.state||"",phone_number:s.ProfileData.phone_number||"",address:s.ProfileData.address||"",id:s.ProfileData.id||"",permissions:s.ProfileData.permissions||[C.PermissionEmpty]}):{...C.AdminEmpty});return{getAssetPath:I,viewAdminData:v,ASSETS_URL:f}}}),Gs={class:"modal fade",id:"kt_modal_view_admin",ref:"viewAdminModalRef",tabindex:"-1","aria-hidden":"true"},Hs={class:"modal-dialog modal-dialog-centered mw-650px"},Js={class:"modal-content"},Ys={class:"modal-header",id:"kt_modal_add_admin_header"},Qs=e("h2",{class:"fw-bold"},"View Admin Profile",-1),Ws={id:"kt_modal_add_admin_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},Xs={class:"card-body p-10"},Zs={class:"d-flex flex-center flex-column mb-5"},et={class:"symbol symbol-100px symbol-circle mb-7"},st=["src"],tt={href:"#",class:"fs-3 text-gray-800 text-hover-primary fw-bold mb-1"},at={class:"fs-5 fw-semobold text-muted mb-6"},ot={class:"d-flex flex-stack fs-4 py-3"},it={class:"fw-bold rotate collapsible","data-bs-toggle":"collapse",href:"#kt_customer_view_details",role:"button","aria-expanded":"false","aria-controls":"kt_customer_view_details"},lt={class:"ms-2 rotate-180"},nt=e("div",{class:"separator separator-dashed my-3"},null,-1),dt={id:"kt_customer_view_details",class:"collapse show"},rt={class:"py-5 fs-6"},mt={class:"row"},ct={class:"col-6"},_t=e("div",{class:"fw-bold mt-5"},"Account ID",-1),ut={class:"text-gray-600"},ft={class:"col-6"},pt=e("div",{class:"fw-bold mt-5"},"Email",-1),ht={class:"text-gray-600"},bt={href:"#",class:"text-gray-600 text-hover-primary"},vt={class:"row"},gt={class:"col-6"},wt=e("div",{class:"fw-bold mt-5"},"Address",-1),$t={class:"text-gray-600"},yt={class:"col-3"},Dt=e("div",{class:"fw-bold mt-5"},"State",-1),At={class:"text-gray-600"},Pt={class:"col-3"},kt=e("div",{class:"fw-bold mt-5"},"City",-1),Nt={class:"text-gray-600"},Vt={class:"row"},St={class:"col-6"},Et=e("div",{class:"fw-bold mt-5"},"Gender",-1),Tt={class:"text-gray-600"},Mt={class:"col-6"},xt=e("div",{class:"fw-bold mt-5"},"Phone Number",-1),Ct={class:"text-gray-600"},Ut={class:"row"},Ft={class:"col-6"},Bt=e("div",{class:"fw-bold mt-5"},"Permissions",-1),qt={class:"text-gray-600"},It={key:0};function Rt(s,a,f,v,d,D){var n;const b=h("KTIcon");return $(),w("div",Gs,[e("div",Hs,[e("div",Js,[e("div",Ys,[Qs,e("div",Ws,[o(b,{"icon-name":"cross","icon-class":"fs-1"})])]),e("div",Xs,[e("div",Zs,[e("div",et,[e("img",{src:s.viewAdminData.profile?`${s.ASSETS_URL+s.viewAdminData.profile}`:s.getAssetPath("media/avatars/blank.png"),alt:"image"},null,8,st)]),e("a",tt,m(s.viewAdminData.firstName+" "+s.viewAdminData.lastName),1),e("div",at,m(s.viewAdminData.type),1)]),e("div",ot,[e("div",it,[k(" Details "),e("span",lt,[o(b,{"icon-name":"down","icon-class":"fs-3"})])])]),nt,e("div",dt,[e("div",rt,[e("div",mt,[e("div",ct,[_t,e("div",ut,m(s.viewAdminData.id),1)]),e("div",ft,[pt,e("div",ht,[e("a",bt,m(s.viewAdminData.created_at),1)])])]),e("div",vt,[e("div",gt,[wt,e("div",$t,m(s.viewAdminData.address),1)]),e("div",yt,[Dt,e("div",At,m(s.viewAdminData.state),1)]),e("div",Pt,[kt,e("div",Nt,m(s.viewAdminData.city),1)])]),e("div",Vt,[e("div",St,[Et,e("div",Tt,m(s.viewAdminData.gender),1)]),e("div",Mt,[xt,e("div",Ct,m(s.viewAdminData.phone_number),1)])]),e("div",Ut,[e("div",Ft,[Bt,e("div",qt,[k(m((n=s.viewAdminData.permissions)!=null&&n.length?s.viewAdminData.permissions.forEach(l=>l):"No Permissions")+" ",1),s.viewAdminData.permissions.length?($(),w("ul",It,[($(!0),w(q,null,Z(s.viewAdminData.permissions,l=>($(),w("li",{key:l.id},m(l.permission),1))),128))])):E("",!0)])])])])])])])])],512)}const Lt=F(zs,[["render",Rt]]),Kt=U({name:"kt-widget-12",components:{AddAdminModal:se,EditAdminModal:Os,ViewAdminModal:Lt,TableFooter:ie},props:{widgetClasses:String},emits:["page-change","on-sort","on-items-select","on-items-per-page-change"],setup(s,{emit:a}){const f=u({}),v=u([]),d=u(C.AdminEmpty),D=u(C.AdminEmpty),b=O(),{token:n}=b,l=u(5),c=u([0]),A=u(0),t=u(!0),{API_URL:p,ASSETS_URL:_}=R,i=u(""),y=u(1);K(()=>l.value,r=>{y.value=1,a("on-items-per-page-change",r)});const g=G(()=>c.value?c.value.length<=l.value?A.value:c.value.length:0);K(()=>y.value,async r=>{const V=await L(r);v.value=V.data});const B=async r=>{d.value=r},N=async r=>{D.value=r};K(()=>y.value,async r=>{const V=await L(r);v.value=V.data});const te=r=>{y.value=r,a("page-change",r)},H=async r=>{const V=await z.get(p+`admin?page=${r}`,{headers:{Authorization:`Bearer ${n}`}}).then(x=>x.data).catch(x=>{v.value=null,x.response.data.message?T.fire({text:x.response.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Error Fetching Data!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}}):T.fire({text:x.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Error Fetching Data!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}})});return console.log(V),V.data},L=async r=>typeof r=="number"?await H(r):await H(1);return W(async()=>{const r=await L(1);f.value=r,v.value=r.data,A.value=r.total,y.value=r.currentPage}),{search:i,getAssetPath:I,pageChange:te,currentPage:y,itemsPerPage:l,totalDeliveries:c,totalItems:g,dataToDisplay:v,itemsPerPageDropdownEnabled:t,ASSETS_URL:_,editProfileData:d,updateEditProfile:B,viewProfileData:D,updateViewProfile:N,formatDate:le}}}),jt={class:"card"},Ot={class:"card-body pt-0"},zt={class:"card-header border-0 pt-5"},Gt={class:"card-title align-items-start flex-column"},Ht=e("span",{class:"card-label fw-bold fs-3 mb-1"},"Admin Users",-1),Jt={class:"text-muted mt-1 fw-semobold fs-7"},Yt={class:"card-toolbar"},Qt={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_admin"},Wt={class:"card-body py-3"},Xt={key:0,class:"d-flex align-items-center justify-content-center w-100 py-5"},Zt=e("h4",null,"No Records",-1),ea=[Zt],sa={key:1,class:"d-flex align-items-center justify-content-center w-100 py-5"},ta=e("div",{class:"spinner-border spinner-border-sm align-middle ms-2 w-25px h-25px"},null,-1),aa=[ta],oa={key:2,class:"table-responsive"},ia={class:"table align-middle gs-0 gy-4"},la=e("thead",null,[e("tr",{class:"fw-bold text-muted bg-light"},[e("th",{class:"ps-4 min-w-300px rounded-start"},"Name"),e("th",{class:"min-w-125px"},"Last Login"),e("th",{class:"min-w-200px text-center"},"Location"),e("th",{class:"min-w-200px text-end rounded-end"})])],-1),na={class:"d-flex align-items-center"},da={class:"symbol symbol-50px me-5"},ra={class:"symbol-label bg-light"},ma=["src"],ca={class:"d-flex justify-content-start flex-column"},_a={class:"text-dark fw-bold text-hover-primary mb-1 fs-6"},ua={class:"text-muted fw-semobold text-muted d-block fs-7"},fa={class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},pa={class:"text-muted fw-semobold text-muted d-block fs-7"},ha={class:"text-center"},ba={class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},va={class:"text-center"},ga=["onClick"],wa=["onClick"],$a={class:"px-10"};function ya(s,a,f,v,d,D){var t,p;const b=h("KTIcon"),n=h("TableFooter"),l=h("AddAdminModal"),c=h("ViewAdminModal"),A=h("EditAdminModal");return $(),w(q,null,[e("div",jt,[e("div",Ot,[e("div",{class:ae([s.widgetClasses,"card"])},[e("div",zt,[e("h3",Gt,[Ht,e("span",Jt,m(s.totalItems)+" Administrative users",1)]),e("div",Yt,[e("button",Qt,[o(b,{"icon-name":"plus","icon-class":"fs-2"}),k(" Create Admin ")])])]),e("div",Wt,[s.dataToDisplay===null?($(),w("div",Xt,ea)):E("",!0),!((t=s.dataToDisplay)!=null&&t.length)&&s.dataToDisplay?($(),w("div",sa,aa)):E("",!0),((p=s.dataToDisplay)==null?void 0:p.length)&&s.dataToDisplay?($(),w("div",oa,[e("table",ia,[la,e("tbody",null,[($(!0),w(q,null,Z(s.dataToDisplay,_=>($(),w("tr",{key:_.id},[e("td",null,[e("div",na,[e("div",da,[e("span",ra,[e("img",{src:_.profile?`${s.ASSETS_URL+_.profile}`:s.getAssetPath("media/avatars/blank.png"),alt:"image",class:"h-75 align-self-end"},null,8,ma)])]),e("div",ca,[e("span",_a,m(_.firstName),1),e("span",ua,m(_.lastName),1)])])]),e("td",null,[e("span",fa,m(s.formatDate(_.created_at)),1),e("span",pa,m(),1)]),e("td",ha,[e("span",ba,m(_.location.name),1)]),e("td",va,[e("button",{"data-bs-toggle":"modal","data-bs-target":"#kt_modal_view_admin",class:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4 me-2",onClick:M(i=>s.updateViewProfile(_),["prevent"])}," View ",8,ga),e("button",{"data-bs-toggle":"modal","data-bs-target":"#kt_modal_edit_admin",class:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4",onClick:M(i=>s.updateEditProfile(_),["prevent"])}," Edit ",8,wa)])]))),128))])]),e("div",$a,[o(n,{onPageChange:s.pageChange,"current-page":s.currentPage,itemsPerPage:s.itemsPerPage,"onUpdate:itemsPerPage":a[0]||(a[0]=_=>s.itemsPerPage=_),count:s.totalItems,"items-per-page-dropdown-enabled":s.itemsPerPageDropdownEnabled},null,8,["onPageChange","current-page","itemsPerPage","count","items-per-page-dropdown-enabled"])])])):E("",!0)])],2)])]),o(l),o(c,{ProfileData:s.viewProfileData},null,8,["ProfileData"]),o(A,{ProfileData:s.editProfileData},null,8,["ProfileData"])],64)}const Da=F(Kt,[["render",ya]]),Aa=U({name:"customers-listing",components:{AdminTable:Da,AddAdminModal:se},setup(){}}),Pa={class:"card"},ka={class:"card-body pt-0"};function Na(s,a,f,v,d,D){const b=h("AdminTable"),n=h("AddAdminModal");return $(),w(q,null,[e("div",Pa,[e("div",ka,[o(b)])]),o(n)],64)}const qa=F(Aa,[["render",Na]]);export{qa as default};
