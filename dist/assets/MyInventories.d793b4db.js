import{g as M}from"./assets.6f11792f.js";import{T as te}from"./TableFooter.3f00d523.js";import{d as P,a5 as j,a6 as z,a7 as Y,u as F,G as c,c as G,m as Q,a4 as E,a3 as se,_ as S,b as g,i as e,j as r,t as v,p as R,w as H,k as p,o as w,z as C,am as x,Y as O,l as oe,x as T,F as K,e as ae,ab as ne}from"./index.f8ca9675.js";import{f as W}from"./formatDate.672d0471.js";import{d as A}from"./defaultData.9a1fdc93.js";import{c as J,d as L,a as re}from"./object.a52185a5.js";import{E as U}from"./errorHandler.ce533688.js";import{h as ie}from"./dom.fc49162f.js";import{S as de}from"./sweetalert2.d8000a3b.js";import{s as le,c as ce}from"./citiesInNigeria.a5c184d7.js";import{S as ue}from"./colourMaps.8403b523.js";import"./TableFooter.vue_vue_type_script_lang.5421c060.js";const me=P({name:"add-delivery-modal",components:{ErrorMessage:j,Field:z,VForm:Y},props:{CustomerInventoryData:{type:Object}},setup(t){console.log(t.CustomerInventoryData);const o=F(),{token:y,user:D}=o,{ASSETS_URL:d,API_URL:h}=Q,n=c(null),m=J().shape({avilableQuantity:L().required().label("Avilable Quantity"),requestQuantity:L().required().label("Request Quantity")}),a=c(A.InventoryDeliveryRequest),_=G(()=>{var s,b,$;return t.CustomerInventoryData&&t.CustomerInventoryData.id?{id:t.CustomerInventoryData.id||"",warehouse_id:t.CustomerInventoryData.warehouse_id||"",product_description:t.CustomerInventoryData.product_description||"",quantity:t.CustomerInventoryData.quantity||"",created_at:t.CustomerInventoryData.created_at||"",customer:t.CustomerInventoryData.customer||"",warehouse:{id:t.CustomerInventoryData.id||"",created_at:((s=t.CustomerInventoryData.warehouse)==null?void 0:s.capacity)||"",location:((b=t.CustomerInventoryData.warehouse)==null?void 0:b.location)||"",name:(($=t.CustomerInventoryData.warehouse)==null?void 0:$.name)||""}}:{...A.InventoryEmpty}}),u=async()=>{var b;const s=new FormData;s.append("customer_id",`${D.id}`),s.append("inventory_id",`${(b=t.CustomerInventoryData)==null?void 0:b.id}`),s.append("requestDescription",a.value.requestDescription),s.append("requestQuantity",`${a.value.requestQuantity}`),s.append("deliveryAddress",a.value.deliveryAddress),await E.post(h+"inventoryDeliveryRequest",s,{headers:{Authorization:`Bearer ${y}`}}).then(()=>{a.value=A.InventoryDeliveryRequest,se.fire({text:"Your request has been sent!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})}).catch($=>{U($)})};return{getAssetPath:M,InventoryData:_,ASSETS_URL:d,formatDate:W,InventoryDeliveryRequest:a,validationSchema:m,submit:async()=>{var s;!n.value||(n.value.disabled=!0,n.value.setAttribute("data-kt-indicator","on"),await u(),(s=n.value)==null||s.removeAttribute("data-kt-indicator"),n.value.disabled=!1)},inventoryDeliveryRequestRef:n}}}),_e={class:"modal fade",id:"kt_modal_view_customer_inventory",ref:"viewCustomerInventoryModalRef",tabindex:"-1","aria-hidden":"true"},ve={class:"modal-dialog modal-dialog-centered mw-650px"},pe={class:"modal-content"},he={class:"modal-header",id:"kt_modal_add_delivery_header"},ye=e("h2",{class:"fw-bold"},"View Inventory",-1),be={id:"kt_modal_add_delivery_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},fe={class:"card-body p-10"},ge={class:"d-flex flex-center flex-column mb-5"},we={class:"symbol symbol-100px mb-7"},De=["src"],$e={href:"#",class:"fs-3 text-gray-800 text-hover-primary fw-bold mb-1"},Ie={class:"d-flex flex-stack fs-4 py-3"},qe={class:"fw-bold rotate collapsible","data-bs-toggle":"collapse",href:"#kt_customer_view_details",role:"button","aria-expanded":"false","aria-controls":"kt_customer_view_details"},ke={class:"ms-2 rotate-180"},Ae=e("div",{class:"separator separator-dashed my-3"},null,-1),Re={id:"kt_customer_view_details",class:"collapse show"},Ce={class:"py-5 fs-6"},xe={class:"row"},Pe={class:"col-6"},Se=e("div",{class:"fw-bold mt-5"},"Customer Name",-1),Ve={class:"text-gray-600"},Te={class:"col-6"},Me=e("div",{class:"fw-bold mt-5"},"Driver Name",-1),Fe={class:"text-gray-600"},Qe={class:"col-6"},Ee=e("div",{class:"fw-bold mt-5"},"Origin",-1),Ue={class:"text-gray-600"},Ne={href:"#",class:"text-gray-600 text-hover-primary"},Be={class:"col-6"},Oe=e("div",{class:"fw-bold mt-5"},"Added",-1),Ke={class:"text-gray-600"},Le={href:"#",class:"text-gray-600 text-hover-primary"},je={class:"row"},ze={class:"col-6"},Ye=e("div",{class:"fw-bold mt-5"},"Destination",-1),Ge={class:"text-gray-600"},He={class:"col-6"},We=e("div",{class:"fw-bold mt-5"},"Quantity",-1),Je={class:"text-gray-600"},Xe={class:"d-flex flex-stack fs-4 py-3"},Ze={class:"fw-bold rotate collapsible","data-bs-toggle":"collapse",href:"#kt_customer_view_inventory_order",role:"button","aria-expanded":"false","aria-controls":"kt_customer_view_inventory_order"},et={class:"ms-2 rotate-180"},tt=e("div",{class:"separator separator-dashed my-3"},null,-1),st={id:"kt_customer_view_inventory_order",class:"collapse show"},ot={class:"py-5 fs-6"},at={class:"mb-5 row"},nt={class:"col-6"},rt=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Available Quantity",-1),it={class:"fv-plugins-message-container"},dt={class:"fv-help-block"},lt={class:"col-6"},ct=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Request Quantity",-1),ut={class:"fv-plugins-message-container"},mt={class:"fv-help-block"},_t={class:"mb-5 row"},vt={class:"col-12"},pt=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Request Description",-1),ht={class:"fv-plugins-message-container"},yt={class:"fv-help-block"},bt={class:"mb-5 row"},ft={class:"col-12"},gt=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Delivery Address",-1),wt={class:"fv-plugins-message-container"},Dt={class:"fv-help-block"},$t={class:"mb-5"},It=e("button",{type:"reset",id:"inventory_delivery_requestRef_cancel",class:"btn btn-light me-3"}," Discard ",-1),qt={ref:"inventoryDeliveryRequestRef",type:"submit",id:"inventory_delivery_requestRef",class:"btn btn-primary"},kt=e("span",{class:"indicator-label"}," Submit ",-1),At=e("span",{class:"indicator-progress"},[R(" Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),Rt=[kt,At];function Ct(t,o,y,D,d,h){var u,l;const n=p("KTIcon"),m=p("Field"),a=p("ErrorMessage"),_=p("VForm");return w(),g("div",_e,[e("div",ve,[e("div",pe,[e("div",he,[ye,e("div",be,[r(n,{"icon-name":"cross","icon-class":"fs-1"})])]),e("div",fe,[e("div",ge,[e("div",we,[e("img",{src:t.getAssetPath("media/avatars/blank.png"),alt:"image"},null,8,De)]),e("a",$e,v(t.InventoryData.id),1)]),e("div",Ie,[e("div",qe,[R(" Details "),e("span",ke,[r(n,{"icon-name":"down","icon-class":"fs-3"})])])]),Ae,e("div",Re,[e("div",Ce,[e("div",xe,[e("div",Pe,[Se,e("div",Ve,v(((u=t.InventoryData.customer)==null?void 0:u.firstName)+" "+((l=t.InventoryData.customer)==null?void 0:l.lastName)),1)]),e("div",Te,[Me,e("div",Fe,v(t.InventoryData.warehouse.location),1)]),e("div",Qe,[Ee,e("div",Ue,[e("a",Ne,v(t.InventoryData.warehouse.name),1)])]),e("div",Be,[Oe,e("div",Ke,[e("a",Le,v(t.formatDate(t.InventoryData.created_at)),1)])])]),e("div",je,[e("div",ze,[Ye,e("div",Ge,v(t.InventoryData.product_description),1)]),e("div",He,[We,e("div",Je,v(t.InventoryData.quantity),1)])])])]),e("div",Xe,[e("div",Ze,[R(" Place Inventory Delivery Request "),e("span",et,[r(n,{"icon-name":"down","icon-class":"fs-3"})])])]),tt,e("div",st,[e("div",ot,[r(_,{class:"form",onSubmit:t.submit,"validation-schema":t.validationSchema},{default:H(({})=>[e("div",at,[e("div",nt,[rt,r(m,{type:"text",class:"form-control form-control-solid",placeholder:"Avilable Quantity",name:"avilableQuantity","aria-disabled":"true",modelValue:t.InventoryData.quantity,"onUpdate:modelValue":o[0]||(o[0]=s=>t.InventoryData.quantity=s)},null,8,["modelValue"]),e("div",it,[e("div",dt,[r(a,{name:"avilableQuantity"})])])]),e("div",lt,[ct,r(m,{type:"number",class:"form-control form-control-solid",placeholder:"Request Quantity",name:"requestQuantity",modelValue:t.InventoryDeliveryRequest.requestQuantity,"onUpdate:modelValue":o[1]||(o[1]=s=>t.InventoryDeliveryRequest.requestQuantity=s)},null,8,["modelValue"]),e("div",ut,[e("div",mt,[r(a,{name:"requestQuantity"})])])])]),e("div",_t,[e("div",vt,[pt,C(e("textarea",{type:"textarea",class:"form-control form-control-solid",placeholder:"Request description",name:"requestDescription","onUpdate:modelValue":o[2]||(o[2]=s=>t.InventoryDeliveryRequest.requestDescription=s)},null,512),[[x,t.InventoryDeliveryRequest.requestDescription]]),e("div",ht,[e("div",yt,[r(a,{name:"requestDescription"})])])])]),e("div",bt,[e("div",ft,[gt,C(e("textarea",{type:"textarea",class:"form-control form-control-solid",placeholder:"Enter Delivery Address",name:"deliveryAddress","onUpdate:modelValue":o[3]||(o[3]=s=>t.InventoryDeliveryRequest.deliveryAddress=s)},null,512),[[x,t.InventoryDeliveryRequest.deliveryAddress]]),e("div",wt,[e("div",Dt,[r(a,{name:"deliveryAddress"})])])])]),e("div",$t,[It,e("button",qt,Rt,512)])]),_:1},8,["onSubmit","validation-schema"])])])])])])],512)}const xt=S(me,[["render",Ct]]),Pt=P({name:"add-inventory-modal",components:{ErrorMessage:j,Field:z,VForm:Y},setup(){const t=F(),{user:o,token:y,refreshProfile:D}=t,d=c(null);c(null);const h=c(null),n=c(null),m=c(null),{API_URL:a,badInternetAlert:_,errorAlert:u,successAlert:l}=Q,s=c({quantity:0,requestDescription:"sdfsdfdsf",pickupAddress:"sdfsdf"}),b=J().shape({quantity:re().required().label("Quantity")}),$=async()=>{d.value&&(d.value.disabled=!0,d.value.setAttribute("data-kt-indicator","on"));const f=new FormData;f.append("quantity",`${s.value.quantity}`),f.append("request_description",s.value.requestDescription),f.append("pickup_address",s.value.pickupAddress),await E.post(a+`customers/${o.id}/request-inventory`,f,{headers:{Authorization:`Bearer ${y}`}}).then(()=>{ie(h.value),de.fire({text:"Inventory Request has been sent!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})}).catch(q=>{U(q)}).then(()=>{var q;(q=d.value)==null||q.removeAttribute("data-kt-indicator"),d.value.disabled=!1})};return{validationSchema:b,submit:async()=>{var f;!d.value||(d.value.disabled=!0,d.value.setAttribute("data-kt-indicator","on"),console.log("object"),await $(),(f=d.value)==null||f.removeAttribute("data-kt-indicator"),d.value.disabled=!1)},submitButtonRef:d,modalRef:n,createAPIKeyModalRef:m,getAssetPath:M,statesInNigeria:le,citiesInNigeria:ce,addCustomerModalRef:h,InventoryRequest:s}}}),St={class:"modal fade",id:"kt_modal_customer_inventory_request",ref:"InventoryRequestModalRef",tabindex:"-1","aria-hidden":"true"},Vt={class:"modal-dialog modal-dialog-centered mw-650px"},Tt={class:"modal-content"},Mt={class:"modal-header",id:"kt_modal_add_customer_header"},Ft=e("h2",{class:"fw-bold"},"Apply For Inventory Storage",-1),Qt={id:"kt_modal_add_customer_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},Et={class:"modal-body py-10 px-lg-17"},Ut={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_customer_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},Nt={class:"mb-5 row"},Bt={class:"col-6"},Ot=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Quantity",-1),Kt={class:"fv-plugins-message-container"},Lt={class:"fv-help-block"},jt={class:"mb-5 row"},zt={class:"col-12"},Yt=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Request Description",-1),Gt={class:"fv-plugins-message-container"},Ht={class:"fv-help-block"},Wt={class:"mb-5 row"},Jt={class:"col-12"},Xt=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Pickup Address",-1),Zt={class:"fv-plugins-message-container"},es={class:"fv-help-block"},ts={class:"modal-footer flex-center"},ss=e("button",{type:"reset",id:"kt_modal_add_customer_cancel",class:"btn btn-light me-3"}," Discard ",-1),os={ref:"submitButtonRef",type:"submit",id:"kt_add_customer_submit",class:"btn btn-primary"},as=e("span",{class:"indicator-label"}," Submit ",-1),ns=e("span",{class:"indicator-progress"},[R(" Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),rs=[as,ns];function is(t,o,y,D,d,h){const n=p("KTIcon"),m=p("Field"),a=p("ErrorMessage"),_=p("VForm");return w(),g("div",St,[e("div",Vt,[e("div",Tt,[e("div",Mt,[Ft,e("div",Qt,[r(n,{"icon-name":"cross","icon-class":"fs-1"})])]),r(_,{id:"kt_modal_add_customer_form",class:"form",onSubmit:t.submit,"validation-schema":t.validationSchema},{default:H(({})=>[e("div",Et,[e("div",Ut,[e("div",Nt,[e("div",Bt,[Ot,r(m,{type:"number",class:"form-control form-control-solid",placeholder:"Quantity",name:"quantity","aria-disabled":"true",modelValue:t.InventoryRequest.quantity,"onUpdate:modelValue":o[0]||(o[0]=u=>t.InventoryRequest.quantity=u)},null,8,["modelValue"]),e("div",Kt,[e("div",Lt,[r(a,{name:"quantity"})])])])]),e("div",jt,[e("div",zt,[Yt,C(e("textarea",{type:"textarea",class:"form-control form-control-solid",placeholder:"Request description",name:"requestDescription","onUpdate:modelValue":o[1]||(o[1]=u=>t.InventoryRequest.requestDescription=u)},null,512),[[x,t.InventoryRequest.requestDescription]]),e("div",Gt,[e("div",Ht,[r(a,{name:"requestDescription"})])])])]),e("div",Wt,[e("div",Jt,[Xt,C(e("textarea",{type:"textarea",class:"form-control form-control-solid",placeholder:"Pickup Address",name:"pickupAddress","onUpdate:modelValue":o[2]||(o[2]=u=>t.InventoryRequest.pickupAddress=u)},null,512),[[x,t.InventoryRequest.pickupAddress]]),e("div",Zt,[e("div",es,[r(a,{name:"pickupAddress"})])])])])])]),e("div",ts,[ss,e("button",os,rs,512)])]),_:1},8,["onSubmit","validation-schema"])])])],512)}const ds=S(Pt,[["render",is]]),ls=P({name:"customer-Order-stats",components:{TableFooter:te,ViewCustomerInventoryModal:xt,AddInventoryModal:ds},props:{widgetClasses:String},emits:["page-change","on-sort","on-items-select","on-items-per-page-change"],setup(t,{emit:o}){const{API_URL:y,ASSETS_URL:D}=Q,d=c({}),h=c(A.InventoryEmpty),n=c(A.InventoryEmpty),m=c(null),a=c(10),_=c([0]),u=c(0),l=F(),{user:s,token:b}=l,$=c(!0),I=c(1),f=c([]);O(()=>a.value,i=>{I.value=1,o("on-items-per-page-change",i)});const q=G(()=>_.value?_.value.length<=a.value?u.value:_.value.length:0),X=async i=>{h.value=i},Z=async i=>{console.log(i),n.value=i};O(()=>I.value,async i=>{const k=await B(i);m.value=k.data});const ee=i=>{I.value=i,o("page-change",i)},N=async i=>(await E.get(y+"inventory/customer/"+s.id+`${a.value}?page=${i}`,{headers:{Authorization:`Bearer ${b}`}}).then(V=>V.data).catch(V=>{m.value=null,U(V)})).data,B=async i=>typeof i=="number"?await N(i):await N(1);return oe(async()=>{const i=await B(1);d.value=i;const{data:k}=i;m.value=k,console.log(k),u.value=i.total,I.value=i.current_page}),{checkedRows:f,getAssetPath:M,pageChange:ee,currentPage:I,itemsPerPage:a,totalDeliveries:_,totalItems:q,dataToDisplay:m,itemsPerPageDropdownEnabled:$,ASSETS_URL:D,editInventoryData:h,updateEditOrder:X,CustomerViewInventoryData:n,updateViewInventory:Z,formatDate:W,STATUS_COLOUR_MAP:ue}}}),cs={class:"card"},us={class:"card-header border-0 pt-5"},ms={class:"card-title align-items-start flex-column"},_s=e("span",{class:"card-label fw-bold fs-3 mb-1"},"My Inventory",-1),vs={class:"text-muted mt-1 fw-semobold fs-7"},ps={class:"card-toolbar"},hs={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_customer_inventory_request"},ys={class:"card-body py-3"},bs={key:0,class:"d-flex align-items-center justify-content-center w-100 py-5"},fs=e("h4",null,"No Inventory",-1),gs=[fs],ws={key:1,class:"d-flex align-items-center justify-content-center w-100 py-5"},Ds=e("div",{class:"spinner-border spinner-border-sm align-middle ms-2 w-25px h-25px"},null,-1),$s=[Ds],Is={key:2,class:"table-responsive"},qs={class:"table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3"},ks=e("thead",null,[e("tr",{class:"fw-bold text-muted"},[e("th",{class:"min-w-150px"},"Inventory ID"),e("th",{class:"min-w-120px"},"Description"),e("th",{class:"min-w-140px"},"Quantity"),e("th",{class:"min-w-120px"},"Added"),e("th",{class:"min-w-120px"},"Warehouse"),e("th",{class:"min-w-100px text-end"},"Actions")])],-1),As={href:"#",class:"text-dark fw-bold text-hover-primary fs-6"},Rs={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},Cs={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},xs={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},Ps={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},Ss={class:"text-end"},Vs=["onClick"],Ts={class:"px-10"};function Ms(t,o,y,D,d,h){var u;const n=p("KTIcon"),m=p("TableFooter"),a=p("ViewCustomerInventoryModal"),_=p("AddInventoryModal");return w(),g(K,null,[e("div",cs,[e("div",us,[e("h3",ms,[_s,e("span",vs,v(t.totalItems)+" Inventories",1)]),e("div",ps,[e("button",hs,[r(n,{"icon-name":"plus","icon-class":"fs-2"}),R(" Apply For Inventory ")])])]),e("div",ys,[((u=t.dataToDisplay)==null?void 0:u.length)===0?(w(),g("div",bs,gs)):T("",!0),t.dataToDisplay?T("",!0):(w(),g("div",ws,$s)),t.dataToDisplay!==null&&t.dataToDisplay.length!==0?(w(),g("div",Is,[e("table",qs,[ks,e("tbody",null,[(w(!0),g(K,null,ae(t.dataToDisplay,l=>(w(),g("tr",{key:l.id},[e("td",null,[e("a",As,v(l.id?l.id:"No ID"),1)]),e("td",null,[e("a",Rs,v(l.product_description),1)]),e("td",null,[e("a",Cs,v(l.quantity),1)]),e("td",null,[e("a",xs,v(l.created_at?t.formatDate(l.created_at):"Pending Delivery"),1)]),e("td",null,[e("a",Ps,v(l.warehouse_id),1)]),e("td",Ss,[e("button",{onClick:ne(s=>t.updateViewInventory(l),["prevent"]),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_view_customer_inventory",class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1"},[r(n,{"icon-name":"switch","icon-class":"fs-3"})],8,Vs)])]))),128))])]),e("div",Ts,[r(m,{onPageChange:t.pageChange,"current-page":t.currentPage,itemsPerPage:t.itemsPerPage,"onUpdate:itemsPerPage":o[0]||(o[0]=l=>t.itemsPerPage=l),count:t.totalItems,"items-per-page-dropdown-enabled":t.itemsPerPageDropdownEnabled},null,8,["onPageChange","current-page","itemsPerPage","count","items-per-page-dropdown-enabled"])])])):T("",!0)])]),r(a,{CustomerInventoryData:t.CustomerViewInventoryData},null,8,["CustomerInventoryData"]),r(_)],64)}const Fs=S(ls,[["render",Ms]]),Qs=P({name:"customer_inventory",components:{MyInventory:Fs},props:{},setup(){return{}}});function Es(t,o,y,D,d,h){const n=p("MyInventory");return w(),g("div",null,[r(n,{"widget-classes":"mb-5 mb-xl-8"})])}const Js=S(Qs,[["render",Es]]);export{Js as default};
