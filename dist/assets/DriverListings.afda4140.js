import{g as L}from"./assets.6f11792f.js";import{h as F}from"./dom.fc49162f.js";import{S as G}from"./sweetalert2.d8000a3b.js";import{d as E,a5 as j,a6 as W,a7 as H,u as T,G as w,a4 as R,m as I,_ as q,b as f,i as e,j as s,w as $,k as g,o as h,v as ae,F as P,e as A,t as b,x as Y,z as B,am as J,p as N,c as Q,ac as se,l as oe,ab as K}from"./index.f8ca9675.js";import{c as X,a as _}from"./object.a52185a5.js";import{s as Z,c as x}from"./citiesInNigeria.a5c184d7.js";import{d as S}from"./defaultData.9a1fdc93.js";import{E as O}from"./errorHandler.ce533688.js";import{D as le,a as ie}from"./index.4a4da482.js";import{f as de}from"./formatDate.672d0471.js";import"./TableFooter.3f00d523.js";import"./TableFooter.vue_vue_type_script_lang.5421c060.js";const ne=E({name:"add-admin-modal",components:{ErrorMessage:j,Field:W,VForm:H},props:{DriverData:{type:Object}},setup(){const t=T(),{token:a}=t,n=w(null),k=w(""),y=w(null),p=w(null),u=w(null),{API_URL:i,badInternetAlert:d}=I,r=w(S.DriverEmpty),l=X().shape({firstName:_().required().label("First Name"),lastName:_().required().label("Last Name"),email:_().required().label("Email"),password:_().required().label("password"),gender:_().required().label("gender"),phone_number:_().required().label("Phone Number"),vehicleMake:_().required().label("Vehicle Make"),vehicleModel:_().required().label("Vehicle Model"),licenseNumber:_().required().label("License Number"),licensePlate:_().required().label("License Plate"),city:_().required().label("City"),state:_().required().label("State"),title:_().required().label("Title")}),m=async()=>{n.value&&(n.value.disabled=!0,n.value.setAttribute("data-kt-indicator","on"));const c=new FormData;c.append("firstName",r.value.firstName),c.append("lastName",r.value.lastName),c.append("email",r.value.email),c.append("address",r.value.address),c.append("type","Driver"),c.append("city",r.value.city),c.append("licenseExpiration",r.value.licenseExpiration),c.append("licenseNumber",r.value.licenseNumber),c.append("password",r.value.password),c.append("vehicleMake",r.value.vehicleMake),c.append("vehicleModel",r.value.vehicleModel),c.append("licensePlate",r.value.licensePlate),c.append("state",r.value.state),c.append("title",r.value.title),c.append("gender",r.value.gender),c.append("phone_number",r.value.phone_number),await R.post(i+"drivers",c,{headers:{Authorization:`Bearer ${a}`}}).then(()=>{F(y.value),G.fire({text:"Profile has been created!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})}).catch(V=>{O(V)}).then(()=>{var V;(V=n.value)==null||V.removeAttribute("data-kt-indicator"),n.value.disabled=!1})};return{newDriverData:r,validationSchema:l,handleLicenseExpChange:c=>{console.log(c);const U=new Date(c).toISOString().replace("T"," ").slice(0,-5);r.value.licenseExpiration=U},submit:async()=>{var c;!n.value||(n.value.disabled=!0,n.value.setAttribute("data-kt-indicator","on"),await m(),(c=n.value)==null||c.removeAttribute("data-kt-indicator"),n.value.disabled=!1)},submitButtonRef:n,modalRef:p,createAPIKeyModalRef:u,getAssetPath:L,statesInNigeria:Z,citiesInNigeria:x,addCustomerModalRef:y,Ldate:k}}}),re={class:"modal fade",id:"kt_modal_add_driver",ref:"addCustomerModalRef",tabindex:"-1","aria-hidden":"true"},ce={class:"modal-dialog modal-dialog-centered mw-650px"},me={class:"modal-content"},ve={class:"modal-header",id:"kt_modal_add_admin_header"},_e=e("h2",{class:"fw-bold"},"Create Driver Profile",-1),ue={id:"kt_modal_add_admin_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},fe={class:"modal-body py-10 px-lg-17"},he={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_driver_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_driver_header","data-kt-scroll-wrappers":"#kt_modal_add_driver_scroll","data-kt-scroll-offset":"300px"},be={class:"mb-5 row"},pe={class:"col-6"},De=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Last Name",-1),we={class:"fv-plugins-message-container"},ge={class:"fv-help-block"},$e={class:"col-6"},ye=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"First Name",-1),ke={class:"fv-plugins-message-container"},Ve={class:"fv-help-block"},Ne={class:"mb-5 row"},Pe={class:"col-6"},Me=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Title",-1),Se=e("option",{value:""},"Select a Title...",-1),Ee=e("option",{value:"Mr"},"Mr",-1),qe=e("option",{value:"Mrs"},"Mrs",-1),Ae=e("option",{value:"Ms"},"Ms",-1),Le=e("option",{value:"Dr"},"Dr",-1),Ie={class:"fv-plugins-message-container"},Ue={class:"fv-help-block"},Ce={class:"col-6"},Fe=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Gender",-1),Te=e("option",{value:""},"Select a Gender...",-1),Re=e("option",{value:"male"},"Male",-1),Be=e("option",{value:"female"},"Female",-1),Oe={class:"fv-plugins-message-container"},Ke={class:"fv-help-block"},ze={class:"mb-5 row"},Ge={class:"col-6"},je=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Email",-1),We={class:"fv-plugins-message-container"},He={class:"fv-help-block"},Ye={class:"col-6"},Je=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Password",-1),Qe={class:"fv-plugins-message-container"},Xe={class:"fv-help-block"},Ze={class:"mb-5 row"},xe={class:"col-6"},et=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Phone Number",-1),tt={class:"fv-plugins-message-container"},at={class:"fv-help-block"},st={class:"col-6"},ot=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"License Expiration",-1),lt={class:"fv-plugins-message-container"},it={class:"fv-help-block"},dt={class:"mb-5 row"},nt={class:"col-6"},rt=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"License Number",-1),ct={class:"fv-plugins-message-container"},mt={class:"fv-help-block"},vt={class:"col-6"},_t=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Vehicle Model",-1),ut={class:"fv-plugins-message-container"},ft={class:"fv-help-block"},ht={class:"mb-5 row"},bt={class:"col-6"},pt=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"License Plate",-1),Dt={class:"fv-plugins-message-container"},wt={class:"fv-help-block"},gt={class:"col-6"},$t=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Vehicle Make",-1),yt={class:"fv-plugins-message-container"},kt={class:"fv-help-block"},Vt={class:"mb-5 row"},Nt={class:"col-6"},Pt=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"State",-1),Mt=e("option",{value:""},"Select a State...",-1),St=["value"],Et={class:"fv-plugins-message-container"},qt={class:"fv-help-block"},At={class:"col-6"},Lt=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"City",-1),It={key:0,selected:"",value:""},Ut=["value"],Ct=["value"],Ft={key:2,selected:"",value:""},Tt={class:"fv-plugins-message-container"},Rt={class:"fv-help-block"},Bt={class:"mb-5 row"},Ot={class:"col-12"},Kt=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Address",-1),zt={class:"fv-plugins-message-container"},Gt={class:"fv-help-block"},jt={class:"modal-footer flex-center"},Wt=e("button",{type:"reset",id:"kt_modal_add_driver_cancel",class:"btn btn-light me-3"}," Discard ",-1),Ht={ref:"submitButtonRef",type:"submit",id:"kt_add_driver_submit",class:"btn btn-primary"},Yt=e("span",{class:"indicator-label"}," Submit ",-1),Jt=e("span",{class:"indicator-progress"},[N(" Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),Qt=[Yt,Jt];function Xt(t,a,n,k,y,p){const u=g("KTIcon"),i=g("Field"),d=g("ErrorMessage"),r=g("el-date-picker"),l=g("VForm");return h(),f("div",re,[e("div",ce,[e("div",me,[e("div",ve,[_e,e("div",ue,[s(u,{"icon-name":"cross","icon-class":"fs-1"})])]),s(l,{id:"kt_modal_add_driver_form",class:"form",onSubmit:t.submit,"validation-schema":t.validationSchema},{default:$(({errors:m})=>[e("div",fe,[e("div",he,[e("div",be,[e("div",pe,[De,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"Last Name",name:"lastName",modelValue:t.newDriverData.lastName,"onUpdate:modelValue":a[0]||(a[0]=o=>t.newDriverData.lastName=o)},null,8,["modelValue"]),e("div",we,[e("div",ge,[s(d,{name:"lastName"})])])]),e("div",$e,[ye,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"First Name",name:"firstName",modelValue:t.newDriverData.firstName,"onUpdate:modelValue":a[1]||(a[1]=o=>t.newDriverData.firstName=o)},null,8,["modelValue"]),e("div",ke,[e("div",Ve,[s(d,{name:"firstName"})])])])]),e("div",Ne,[e("div",Pe,[Me,s(i,{name:"title",class:"form-select",as:"select",modelValue:t.newDriverData.title,"onUpdate:modelValue":a[2]||(a[2]=o=>t.newDriverData.title=o)},{default:$(()=>[Se,Ee,qe,Ae,Le]),_:1},8,["modelValue"]),e("div",Ie,[e("div",Ue,[s(d,{name:"title"})])])]),e("div",Ce,[Fe,s(i,{name:"gender",class:ae(["form-select",m.country?"is-invalid":""]),as:"select",modelValue:t.newDriverData.gender,"onUpdate:modelValue":a[3]||(a[3]=o=>t.newDriverData.gender=o)},{default:$(()=>[Te,Re,Be]),_:2},1032,["class","modelValue"]),e("div",Oe,[e("div",Ke,[s(d,{name:"gender"})])])])]),e("div",ze,[e("div",Ge,[je,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"Email",name:"email",modelValue:t.newDriverData.email,"onUpdate:modelValue":a[4]||(a[4]=o=>t.newDriverData.email=o)},null,8,["modelValue"]),e("div",We,[e("div",He,[s(d,{name:"email"})])])]),e("div",Ye,[Je,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"Password",name:"password",modelValue:t.newDriverData.password,"onUpdate:modelValue":a[5]||(a[5]=o=>t.newDriverData.password=o)},null,8,["modelValue"]),e("div",Qe,[e("div",Xe,[s(d,{name:"password"})])])])]),e("div",Ze,[e("div",xe,[et,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"Phone Number",name:"phone_number",modelValue:t.newDriverData.phone_number,"onUpdate:modelValue":a[6]||(a[6]=o=>t.newDriverData.phone_number=o)},null,8,["modelValue"]),e("div",tt,[e("div",at,[s(d,{name:"phone_number"})])])]),e("div",st,[ot,s(r,{modelValue:t.Ldate,"onUpdate:modelValue":a[7]||(a[7]=o=>t.Ldate=o),name:"['licenseExpiration']",onChange:t.handleLicenseExpChange,placeholder:"Select date and time",type:"date","range-separator":"To","start-placeholder":"valid from","end-placeholder":"valid until",size:"large"},null,8,["modelValue","onChange"]),e("div",lt,[e("div",it,[s(d,{name:"licenseExpiration"})])])])]),e("div",dt,[e("div",nt,[rt,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"License Number",name:"licenseNumber",modelValue:t.newDriverData.licenseNumber,"onUpdate:modelValue":a[8]||(a[8]=o=>t.newDriverData.licenseNumber=o)},null,8,["modelValue"]),e("div",ct,[e("div",mt,[s(d,{name:"licenseNumber"})])])]),e("div",vt,[_t,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"Vehicle Model",name:"vehicleModel",modelValue:t.newDriverData.vehicleModel,"onUpdate:modelValue":a[9]||(a[9]=o=>t.newDriverData.vehicleModel=o)},null,8,["modelValue"]),e("div",ut,[e("div",ft,[s(d,{name:"vehicleModel"})])])])]),e("div",ht,[e("div",bt,[pt,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"License Plate",name:"licensePlate",modelValue:t.newDriverData.licensePlate,"onUpdate:modelValue":a[10]||(a[10]=o=>t.newDriverData.licensePlate=o)},null,8,["modelValue"]),e("div",Dt,[e("div",wt,[s(d,{name:"licensePlate"})])])]),e("div",gt,[$t,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"Vehicle Make",name:"vehicleMake",modelValue:t.newDriverData.vehicleMake,"onUpdate:modelValue":a[11]||(a[11]=o=>t.newDriverData.vehicleMake=o)},null,8,["modelValue"]),e("div",yt,[e("div",kt,[s(d,{name:"vehicleMake"})])])])]),e("div",Vt,[e("div",Nt,[Pt,s(i,{name:"state",class:"form-select",as:"select",modelValue:t.newDriverData.state,"onUpdate:modelValue":a[12]||(a[12]=o=>t.newDriverData.state=o)},{default:$(()=>[Mt,(h(!0),f(P,null,A(t.statesInNigeria,o=>(h(),f("option",{key:o.code,value:o.name},b(o.name),9,St))),128))]),_:1},8,["modelValue"]),e("div",Et,[e("div",qt,[s(d,{name:"state"})])])]),e("div",At,[Lt,s(i,{name:"city",class:"form-select",as:"select",modelValue:t.newDriverData.city,"onUpdate:modelValue":a[13]||(a[13]=o=>t.newDriverData.city=o)},{default:$(()=>[t.newDriverData.state?(h(),f("option",It," Select a State ")):Y("",!0),t.newDriverData.state?(h(),f(P,{key:1},[t.citiesInNigeria[t.newDriverData.state]?(h(!0),f(P,{key:0},A(t.citiesInNigeria[t.newDriverData.state],o=>(h(),f("option",{key:o.code,value:o.city},b(o.city),9,Ut))),128)):(h(),f("option",{key:1,value:t.newDriverData.state},b(t.newDriverData.state),9,Ct))],64)):(h(),f("option",Ft," Select a State First "))]),_:1},8,["modelValue"]),e("div",Tt,[e("div",Rt,[s(d,{name:"city"})])])])]),e("div",Bt,[e("div",Ot,[Kt,B(e("textarea",{type:"textarea",class:"form-control form-control-solid",placeholder:"Address",name:"address","onUpdate:modelValue":a[14]||(a[14]=o=>t.newDriverData.address=o)},null,512),[[J,t.newDriverData.address]]),e("div",zt,[e("div",Gt,[s(d,{name:"address"})])])])])])]),e("div",jt,[Wt,e("button",Ht,Qt,512)])]),_:1},8,["onSubmit","validation-schema"])])])],512)}const ee=q(ne,[["render",Xt]]),Zt=E({name:"edit-admin-modal",props:{ProfileData:{type:Object}},components:{ErrorMessage:j,Field:W,VForm:H},setup(t){const{API_URL:a}=I,n=w(null),k=w(null),y=w(null),p=T(),{user:u,token:i}=p,d=X().shape({firstName:_().required().label("First Name"),lastName:_().required().label("Last Name"),email:_().required().label("Email"),gender:_().required().label("gender"),password:_().label("password"),phone_number:_().required().label("phone_number"),state:_().required().label("state"),city:_().required().label("city"),title:_().required().label("title")}),r=async()=>{if(n.value&&(n.value.disabled=!0,n.value.setAttribute("data-kt-indicator","on")),!u)return;const o=new FormData;o.append("firstName",l.value.firstName),o.append("allowEdit",`${l.value.allowEdit?1:0}`),o.append("lastName",l.value.lastName),o.append("phone_number",l.value.phone_number),o.append("city",l.value.city),o.append("address",l.value.address),o.append("state",l.value.state),o.append("gender",l.value.gender),o.append("title",l.value.title),o.append("email",l.value.email),await R.post(a+`drivers/${l.value.id}`,o,{headers:{Authorization:`Bearer ${i}`}}).then(()=>{G.fire({text:"Profile has been Updated!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>F(y.value))}).catch(M=>{O(M)}).finally(()=>{var M;(M=n.value)==null||M.removeAttribute("data-kt-indicator"),n.value.disabled=!1,F(y.value)})},l=Q(()=>t.ProfileData&&t.ProfileData.id?(console.log(t.ProfileData),{firstName:t.ProfileData.firstName||"",allowEdit:t.ProfileData.allowEdit===1,lastName:t.ProfileData.lastName||"",email:t.ProfileData.email||"",profile:t.ProfileData.profile||"",phone_number:t.ProfileData.phone_number||"0",id:t.ProfileData.id||"",title:t.ProfileData.title||"",city:t.ProfileData.city||"",password:"",state:t.ProfileData.state||"",address:t.ProfileData.address||"",gender:t.ProfileData.gender||""}):{...S.DriverEmpty});return{editDriverData:l,validationSchema:d,submit:async()=>{console.log("aaa"),n.value&&await r()},editSubmitButtonRef:n,modalRef:k,editDriverModalRef:y,getAssetPath:L,statesInNigeria:Z,citiesInNigeria:x}}}),xt={class:"modal fade",id:"kt_modal_edit_driver",ref:"editDriverModalRef",tabindex:"-1","aria-hidden":"true"},ea={class:"modal-dialog modal-dialog-centered mw-650px"},ta={class:"modal-content"},aa={class:"modal-header",id:"kt_modal_edit_driver_header"},sa=e("h2",{class:"fw-bold"},"Edit Driver",-1),oa={id:"kt_modal_edit_driver_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},la={class:"modal-body py-10 px-lg-17"},ia={class:"scroll-y me-n7 pe-7",id:"kt_modal_edit_driver_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_edit_driver_header","data-kt-scroll-wrappers":"#kt_modal_edit_driver_scroll","data-kt-scroll-offset":"300px"},da={class:"mb-5 row"},na={class:"col-6"},ra=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Last Name",-1),ca={class:"fv-plugins-message-container"},ma={class:"fv-help-block"},va={class:"col-6"},_a=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"First Name",-1),ua={class:"fv-plugins-message-container"},fa={class:"fv-help-block"},ha={class:"mb-5 row"},ba={class:"col-6"},pa=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Title",-1),Da=e("option",{value:""},"Select a Title...",-1),wa=["selected","value"],ga=["selected","value"],$a=["selected","value"],ya=["selected","value"],ka=["selected","value"],Va=["selected","value"],Na={class:"fv-plugins-message-container"},Pa={class:"fv-help-block"},Ma={class:"col-6"},Sa=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Gender",-1),Ea=e("option",{value:""},"Select a Gender...",-1),qa=["selected"],Aa=["selected"],La={class:"fv-plugins-message-container"},Ia={class:"fv-help-block"},Ua={class:"mb-5 row"},Ca={class:"col-6"},Fa=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Email",-1),Ta={class:"fv-plugins-message-container"},Ra={class:"fv-help-block"},Ba={class:"col-6"},Oa=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Password",-1),Ka={class:"fv-plugins-message-container"},za={class:"fv-help-block"},Ga={class:"mb-5 row"},ja={class:"col-6"},Wa=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Phone Number",-1),Ha={class:"fv-plugins-message-container"},Ya={class:"fv-help-block"},Ja={class:"col-6"},Qa=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"State",-1),Xa=e("option",{value:""},"Select a State...",-1),Za=["value"],xa={class:"fv-plugins-message-container"},es={class:"fv-help-block"},ts={class:"mb-5 row"},as={class:"col-6"},ss=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"City",-1),os={key:0,selected:"",value:""},ls=["value"],is=["value"],ds={key:2,selected:"",value:""},ns={class:"fv-plugins-message-container"},rs={class:"fv-help-block"},cs={class:"col-6"},ms=e("label",{class:"fw-bold font-weight-bolder required fs-5 fw-semobold mb-2"},"Allow Editing",-1),vs={class:"form-check form-switch form-switch-sm form-check-custom form-check-solid"},_s=e("span",{class:"form-check-label fw-semobold text-muted",for:"kt_modal_connected_accounts_google"},null,-1),us={class:"fv-plugins-message-container"},fs={class:"fv-help-block"},hs={class:"modal-footer flex-center"},bs=e("button",{type:"reset",id:"kt_modal_edit_driver_cancel",class:"btn btn-light me-3"}," Discard ",-1),ps={ref:"editSubmitButtonRef",type:"submit",id:"kt_edit_driver_submit",class:"btn btn-primary"},Ds=e("span",{class:"indicator-label"}," Submit ",-1),ws=e("span",{class:"indicator-progress"},[N(" Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),gs=[Ds,ws];function $s(t,a,n,k,y,p){const u=g("KTIcon"),i=g("Field"),d=g("ErrorMessage"),r=g("VForm");return h(),f("div",xt,[e("div",ea,[e("div",ta,[e("div",aa,[sa,e("div",oa,[s(u,{"icon-name":"cross","icon-class":"fs-1"})])]),s(r,{id:"kt_modal_edit_driver_form",class:"form",onSubmit:t.submit,"validation-schema":t.validationSchema},{default:$(()=>[e("div",la,[e("div",ia,[e("div",da,[e("div",na,[ra,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"Last Name",name:"lastName",modelValue:t.editDriverData.lastName,"onUpdate:modelValue":a[0]||(a[0]=l=>t.editDriverData.lastName=l)},null,8,["modelValue"]),e("div",ca,[e("div",ma,[s(d,{name:"lastName"})])])]),e("div",va,[_a,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"First Name",name:"firstName",modelValue:t.editDriverData.firstName,"onUpdate:modelValue":a[1]||(a[1]=l=>t.editDriverData.firstName=l)},null,8,["modelValue"]),e("div",ua,[e("div",fa,[s(d,{name:"firstName"})])])])]),e("div",ha,[e("div",ba,[pa,s(i,{name:"title",class:"form-select",as:"select",modelValue:t.editDriverData.title,"onUpdate:modelValue":a[2]||(a[2]=l=>t.editDriverData.title=l)},{default:$(()=>[Da,e("option",{selected:t.editDriverData.title==="Mr"||t.editDriverData.title==="Mr.",value:"Mr."}," Mr ",8,wa),e("option",{selected:t.editDriverData.title==="Mrs"||t.editDriverData.title==="Mrs.",value:"Mrs."}," Mrs ",8,ga),e("option",{selected:t.editDriverData.title==="Prof."||t.editDriverData.title==="Prof.",value:"Prof."}," Prof ",8,$a),e("option",{selected:t.editDriverData.title==="Miss"||t.editDriverData.title==="Miss.",value:"Miss."}," Miss ",8,ya),e("option",{selected:t.editDriverData.title==="Ms."||t.editDriverData.title==="Ms.",value:"Ms."}," Ms ",8,ka),e("option",{selected:t.editDriverData.title==="Dr"||t.editDriverData.title==="Dr.",value:"Dr."}," Dr ",8,Va)]),_:1},8,["modelValue"]),e("div",Na,[e("div",Pa,[s(d,{name:"title"})])])]),e("div",Ma,[Sa,s(i,{name:"gender",class:"form-select",as:"select",modelValue:t.editDriverData.gender,"onUpdate:modelValue":a[3]||(a[3]=l=>t.editDriverData.gender=l)},{default:$(()=>[Ea,e("option",{selected:t.editDriverData.gender==="male",value:"male"}," Male ",8,qa),e("option",{selected:t.editDriverData.gender==="female",value:"female"}," Female ",8,Aa)]),_:1},8,["modelValue"]),e("div",La,[e("div",Ia,[s(d,{name:"gender"})])])])]),e("div",Ua,[e("div",Ca,[Fa,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"Email",name:"email",modelValue:t.editDriverData.email,"onUpdate:modelValue":a[4]||(a[4]=l=>t.editDriverData.email=l)},null,8,["modelValue"]),e("div",Ta,[e("div",Ra,[s(d,{name:"email"})])])]),e("div",Ba,[Oa,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"Password",name:"password",modelValue:t.editDriverData.password,"onUpdate:modelValue":a[5]||(a[5]=l=>t.editDriverData.password=l)},null,8,["modelValue"]),e("div",Ka,[e("div",za,[s(d,{name:"password"})])])])]),e("div",Ga,[e("div",ja,[Wa,s(i,{type:"text",class:"form-control form-control-solid",placeholder:"Phone Number",name:"phone_number",modelValue:t.editDriverData.phone_number,"onUpdate:modelValue":a[6]||(a[6]=l=>t.editDriverData.phone_number=l)},null,8,["modelValue"]),e("div",Ha,[e("div",Ya,[s(d,{name:"phone_number"})])])]),e("div",Ja,[Qa,s(i,{name:"state",class:"form-select",as:"select",modelValue:t.editDriverData.state,"onUpdate:modelValue":a[7]||(a[7]=l=>t.editDriverData.state=l)},{default:$(()=>[Xa,(h(!0),f(P,null,A(t.statesInNigeria,l=>(h(),f("option",{key:l.code,value:l.name},b(l.name),9,Za))),128))]),_:1},8,["modelValue"]),e("div",xa,[e("div",es,[s(d,{name:"state"})])])])]),e("div",ts,[e("div",as,[ss,s(i,{name:"city",class:"form-select",as:"select",modelValue:t.editDriverData.city,"onUpdate:modelValue":a[8]||(a[8]=l=>t.editDriverData.city=l)},{default:$(()=>[t.editDriverData.state?(h(),f("option",os," Select a State ")):Y("",!0),t.editDriverData.state?(h(),f(P,{key:1},[t.citiesInNigeria[t.editDriverData.state]?(h(!0),f(P,{key:0},A(t.citiesInNigeria[t.editDriverData.state],l=>(h(),f("option",{key:l.code,value:l.city},b(l.city),9,ls))),128)):(h(),f("option",{key:1,value:t.editDriverData.state},b(t.editDriverData.state),9,is))],64)):(h(),f("option",ds," Select a State First "))]),_:1},8,["modelValue"]),e("div",ns,[e("div",rs,[s(d,{name:"city"})])])]),e("div",cs,[ms,e("label",vs,[B(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a[9]||(a[9]=l=>t.editDriverData.allowEdit=l),id:"kt_modal_allowEdit",name:"allowEdit"},null,512),[[se,t.editDriverData.allowEdit]]),_s]),e("div",us,[e("div",fs,[s(d,{name:"city"})])])])])])]),e("div",hs,[bs,e("button",ps,gs,512)])]),_:1},8,["onSubmit","validation-schema"])])])],512)}const ys=q(Zt,[["render",$s]]),ks=E({name:"add-driver-modal",components:{},props:{ProfileData:{type:Object}},setup(t){const{API_URL:a,ASSETS_URL:n}=I,k=Q(()=>t.ProfileData&&t.ProfileData.id?(console.log(t.ProfileData),{firstName:t.ProfileData.firstName||"",lastName:t.ProfileData.lastName||"",email:t.ProfileData.email||"",created_at:t.ProfileData.created_at||"",title:t.ProfileData.title||"",city:t.ProfileData.city||"",profile:t.ProfileData.profile||"",allowEdit:t.ProfileData.allowEdit===1,gender:t.ProfileData.gender||"",type:t.ProfileData.type||"",state:t.ProfileData.state||"",phone_number:t.ProfileData.phone_number||"",address:t.ProfileData.address||"",id:t.ProfileData.id||""}):{...S.DriverEmpty});return{getAssetPath:L,viewDriverData:k,ASSETS_URL:n}}}),Vs={class:"modal fade",id:"kt_modal_view_driver",ref:"viewDriverModalRef",tabindex:"-1","aria-hidden":"true"},Ns={class:"modal-dialog modal-dialog-centered mw-650px"},Ps={class:"modal-content"},Ms={class:"modal-header",id:"kt_modal_add_driver_header"},Ss=e("h2",{class:"fw-bold"},"View Admin Profile",-1),Es={id:"kt_modal_add_driver_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},qs={class:"card-body p-10"},As={class:"d-flex flex-center flex-column mb-5"},Ls={class:"symbol symbol-100px symbol-circle mb-7"},Is=["src"],Us={href:"#",class:"fs-3 text-gray-800 text-hover-primary fw-bold mb-1"},Cs={class:"fs-5 fw-semobold text-muted mb-6"},Fs={class:"d-flex flex-stack fs-4 py-3"},Ts={class:"fw-bold rotate collapsible","data-bs-toggle":"collapse",href:"#kt_driver_view_details",role:"button","aria-expanded":"false","aria-controls":"kt_driver_view_details"},Rs={class:"ms-2 rotate-180"},Bs=e("div",{class:"separator separator-dashed my-3"},null,-1),Os={id:"kt_driver_view_details",class:"collapse show"},Ks={class:"py-5 fs-6"},zs={class:"row"},Gs={class:"col-6"},js=e("div",{class:"fw-bold mt-5"},"Account ID",-1),Ws={class:"text-gray-600"},Hs={class:"col-6"},Ys=e("div",{class:"fw-bold mt-5"},"Email",-1),Js={class:"text-gray-600"},Qs={href:"#",class:"text-gray-600 text-hover-primary"},Xs={class:"row"},Zs={class:"col-6"},xs=e("div",{class:"fw-bold mt-5"},"Address",-1),eo={class:"text-gray-600"},to={class:"col-3"},ao=e("div",{class:"fw-bold mt-5"},"State",-1),so={class:"text-gray-600"},oo={class:"col-3"},lo=e("div",{class:"fw-bold mt-5"},"City",-1),io={class:"text-gray-600"},no={class:"row"},ro={class:"col-6"},co=e("div",{class:"fw-bold mt-5"},"Gender",-1),mo={class:"text-gray-600"},vo={class:"col-6"},_o=e("div",{class:"fw-bold mt-5"},"Phone Number",-1),uo={class:"text-gray-600"},fo={class:"row"},ho={class:"col-6"},bo=e("div",{class:"fw-bold mt-5"},"Allow Edit",-1),po={class:"text-gray-600"};function Do(t,a,n,k,y,p){const u=g("KTIcon");return h(),f("div",Vs,[e("div",Ns,[e("div",Ps,[e("div",Ms,[Ss,e("div",Es,[s(u,{"icon-name":"cross","icon-class":"fs-1"})])]),e("div",qs,[e("div",As,[e("div",Ls,[e("img",{src:t.viewDriverData.profile?`${t.ASSETS_URL+t.viewDriverData.profile}`:t.getAssetPath("media/avatars/blank.png"),alt:"image"},null,8,Is)]),e("a",Us,b(t.viewDriverData.firstName+" "+t.viewDriverData.lastName),1),e("div",Cs,b(t.viewDriverData.type),1)]),e("div",Fs,[e("div",Ts,[N(" Details "),e("span",Rs,[s(u,{"icon-name":"down","icon-class":"fs-3"})])])]),Bs,e("div",Os,[e("div",Ks,[e("div",zs,[e("div",Gs,[js,e("div",Ws,b(t.viewDriverData.id),1)]),e("div",Hs,[Ys,e("div",Js,[e("a",Qs,b(t.viewDriverData.created_at),1)])])]),e("div",Xs,[e("div",Zs,[xs,e("div",eo,b(t.viewDriverData.address),1)]),e("div",to,[ao,e("div",so,b(t.viewDriverData.state),1)]),e("div",oo,[lo,e("div",io,b(t.viewDriverData.city),1)])]),e("div",no,[e("div",ro,[co,e("div",mo,b(t.viewDriverData.gender),1)]),e("div",vo,[_o,e("div",uo,b(t.viewDriverData.phone_number),1)])]),e("div",fo,[e("div",ho,[bo,e("div",po,b(t.viewDriverData.allowEdit?"Yes":"No"),1)])])])])])])])],512)}const z=q(ks,[["render",Do]]),wo=E({name:"drivers-listing",components:{Datatable:le,AddDriverModal:ee,EditDriverModal:ys,ViewDriverModal:z},setup(){const t=T(),{token:a}=t,n=w([{columnName:"Driver Name",columnLabel:"name",sortEnabled:!0,columnWidth:175},{columnName:"Email",columnLabel:"email",sortEnabled:!0,columnWidth:230},{columnName:"Payment Method",columnLabel:"paymentMethod",sortEnabled:!0,columnWidth:175},{columnName:"Created Date",columnLabel:"date",sortEnabled:!0,columnWidth:225},{columnName:"Actions",columnLabel:"actions",sortEnabled:!1,columnWidth:135}]),k=w([]),y=w(!0),p=w([]),u=w([]),i=w(S.DriverEmpty),d=w(S.DriverEmpty),{API_URL:r}=I,l=async()=>await M(),m=async v=>{i.value=v},o=async v=>{d.value=v},M=async()=>(await R.get(r+"drivers",{headers:{Authorization:`Bearer ${a}`}}).then(D=>D.data).catch(D=>{O(D)})).data;oe(async()=>{const v=await l();console.log(v),p.value=v,u.value=v,y.value=!1});const c=v=>{for(let D=0;D<p.value.length;D++)p.value[D].id===v&&p.value.splice(D,1)},V=w(""),U=()=>{if(V.value!==""){let v=[];for(let D=0;D<u.value.length;D++)te(u.value[D],V.value)&&v.push(u.value[D]);p.value=v}else p.value=u.value},te=(v,D)=>{for(let C in v)if(!Number.isInteger(v[C])&&typeof v[C]!="object"&&v[C].indexOf(D)!=-1)return!0;return!1};return{tableData:p,tableHeader:n,deleteDriver:c,search:V,searchItems:U,selectedIds:k,sort:v=>{const D=v.order==="asc";v.label&&ie(p.value,v.label,{reverse:D})},onItemSelect:v=>{k.value=v},getAssetPath:L,isLoading:y,updateEditProfile:m,ViewDriverModal:z,editProfileData:i,updateViewProfile:o,viewProfileData:d,formatDate:de}}}),go={class:"card"},$o={class:"card-header border-0 pt-6"},yo={class:"card-title"},ko={class:"d-flex align-items-center position-relative my-1"},Vo={class:"card-toolbar"},No={class:"d-flex justify-content-end","data-kt-driver-table-toolbar":"base"},Po={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_driver"},Mo=e("div",{class:"d-flex justify-content-end align-items-center d-none","data-kt-driver-table-toolbar":"selected"},[e("div",{class:"fw-bold me-5"},[e("span",{class:"me-2","data-kt-driver-table-select":"selected_count"}),N("Selected ")]),e("button",{type:"button",class:"btn btn-danger","data-kt-driver-table-select":"delete_selected"}," Delete Selected ")],-1),So={class:"card-body pt-0"},Eo={href:"#",class:"text-gray-600 text-hover-primary mb-1"},qo=["onClick"],Ao=["onClick"];function Lo(t,a,n,k,y,p){const u=g("KTIcon"),i=g("Datatable"),d=g("AddDriverModal"),r=g("ViewDriverModal"),l=g("EditDriverModal");return h(),f(P,null,[e("div",go,[e("div",$o,[e("div",yo,[e("div",ko,[s(u,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),B(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=m=>t.search=m),onKeyup:a[1]||(a[1]=m=>t.searchItems()),class:"form-control form-control-solid w-250px ps-15",placeholder:"Search Drivers"},null,544),[[J,t.search]])])]),e("div",Vo,[e("div",No,[e("button",Po,[s(u,{"icon-name":"plus","icon-class":"fs-2"}),N(" Add Driver ")])]),Mo])]),e("div",So,[s(i,{loading:t.isLoading,onOnSort:t.sort,onOnItemsSelect:t.onItemSelect,data:t.tableData,header:t.tableHeader,"enable-items-per-page-dropdown":!0,"checkbox-enabled":!0,"checkbox-label":"id"},{name:$(({row:m})=>[N(b(m.firstName+" "+m.lastName),1)]),email:$(({row:m})=>[e("span",Eo,b(m.email?m.email:"No Email"),1)]),paymentMethod:$(({row:m})=>[N(b(m.paymentMethod?m.paymentMethod:"Not Set"),1)]),date:$(({row:m})=>[N(b(m.created_at?t.formatDate(m.created_at):"Not Set"),1)]),actions:$(({row:m})=>[e("button",{href:"#","data-bs-toggle":"modal","data-bs-target":"#kt_modal_view_driver",class:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4 me-2",onClick:K(o=>t.updateViewProfile(m),["prevent"])}," View ",8,qo),e("button",{href:"#","data-bs-toggle":"modal","data-bs-target":"#kt_modal_edit_driver",class:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4",onClick:K(o=>t.updateEditProfile(m),["prevent"])}," Edit ",8,Ao)]),_:1},8,["loading","onOnSort","onOnItemsSelect","data","header"])])]),s(d),s(r,{ProfileData:t.viewProfileData},null,8,["ProfileData"]),s(l,{ProfileData:t.editProfileData},null,8,["ProfileData"])],64)}const Io=q(wo,[["render",Lo]]),Uo=E({name:"customers-listing",components:{DriversTable:Io,AddDriverModal:ee},setup(){}}),Co={class:"card"},Fo={class:"card-body pt-0"};function To(t,a,n,k,y,p){const u=g("DriversTable"),i=g("AddDriverModal");return h(),f(P,null,[e("div",Co,[e("div",Fo,[s(u)])]),s(i)],64)}const xo=q(Uo,[["render",To]]);export{xo as default};
