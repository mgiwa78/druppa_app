import{g as S}from"./assets.6f11792f.js";import{S as V}from"./sweetalert2.d8000a3b.js";import{d as y,a5 as F,a6 as $,a7 as k,u as A,G as p,l as B,a4 as w,m as D,_ as C,b as _,j as i,w as I,i as e,k as f,o as v,F as E,e as N,t as U,p as q}from"./index.f8ca9675.js";import{c as P,d as T,a as g}from"./object.a52185a5.js";import{d as M}from"./defaultData.9a1fdc93.js";import{E as R}from"./errorHandler.ce533688.js";const j=y({name:"create_vendor_item_form",components:{ErrorMessage:F,Field:$,VForm:k},setup(){const{API_URL:t}=D,s=A(),{user:h,token:m}=s,r=p(null),c=p([]),l=p(null),a=p(M.VendorItemEmpty),b=async()=>{const n=await w.get(t+"vendorItemCategories",{headers:{Authorization:`Bearer ${m}`}}).then(d=>d.data).catch(d=>{V.fire({text:d.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Error Fetching Data!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}})});console.log(n),c.value=n.data};return B(()=>{b()}),{validationSchema:P().shape({itemCategory:T().required().label("Item Category"),itemDescription:g().required().label("Item Description"),itemName:g().required().label("Item Name"),itemPrice:g().required().label("Item Price")}),submit:async()=>{var d;if(!r.value)return;r.value.disabled=!0,r.value.setAttribute("data-kt-indicator","on");const n=new FormData;n.append("name",a.value.name),n.append("description",a.value.description),n.append("price",a.value.price),n.append("image",a.value.image[0]),n.append("vendor_id",`${h.id}`),n.append("vedor_item_category_id",a.value.vendor_item_category_id),await w.post(t+"vendorItem",n,{headers:{Authorization:`Bearer ${m}`}}).then(()=>{V.fire({text:"Item has been created!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})}).catch(u=>{R(u)}).then(()=>{var u;(u=r.value)==null||u.removeAttribute("data-kt-indicator"),r.value.disabled=!1}),(d=r.value)==null||d.removeAttribute("data-kt-indicator"),r.value.disabled=!1},submitButtonRef:r,modalRef:l,getAssetPath:S,newVendorItem:a,AllCategories:c,onChangeFileUpload:n=>{const d=n.target.files;a.value.image=d}}}}),x={class:"card"},z=e("div",{class:"card-header"},[e("h2",{class:"fw-bold my-10"},"Create Vendor Item")],-1),L={class:"card-body"},O={class:"mb-5 row"},G={class:"mb-5 row"},H={class:"col-6"},J=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Item Name",-1),K={class:"fv-plugins-message-container"},Q={class:"fv-help-block"},W={class:"col-6"},X=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Item Price",-1),Y={class:"fv-plugins-message-container"},Z={class:"fv-help-block"},ee={class:"mb-5 row"},te={class:"col-6"},oe=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Item Description",-1),se={class:"fv-plugins-message-container"},ae={class:"fv-help-block"},ne={class:"col-6"},re=e("label",{class:"fw-bold required fs-5 fw-semobold mb-2"},"Category",-1),ie=e("option",{value:""},"Select a Item Category...",-1),le=["value"],de={class:"fv-plugins-message-container"},me={class:"fv-help-block"},ce={class:"card-footer flex-center"},ue=e("button",{type:"reset",class:"btn btn-light me-3"},"Discard",-1),pe={ref:"submitButtonRef",type:"submit",id:"kt_add_vendor_item_submit",class:"btn btn-primary"},_e=e("span",{class:"indicator-label"}," Submit ",-1),fe=e("span",{class:"indicator-progress"},[q(" Please wait... "),e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),ve=[_e,fe];function he(t,s,h,m,r,c){const l=f("Field"),a=f("ErrorMessage"),b=f("VForm");return v(),_("div",x,[z,i(b,{class:"form",onSubmit:t.submit,"validation-schema":t.validationSchema},{default:I(({})=>[e("div",L,[e("div",O,[e("input",{type:"file",onChange:s[0]||(s[0]=(...o)=>t.onChangeFileUpload&&t.onChangeFileUpload(...o)),name:"avatar",accept:".png, .jpg, .jpeg"},null,32)]),e("div",G,[e("div",H,[J,i(l,{type:"text",class:"form-control form-control-solid",placeholder:"Enter Item Name",name:"itemName",modelValue:t.newVendorItem.name,"onUpdate:modelValue":s[1]||(s[1]=o=>t.newVendorItem.name=o)},null,8,["modelValue"]),e("div",K,[e("div",Q,[i(a,{name:"itemName"})])])]),e("div",W,[X,i(l,{type:"text",class:"form-control form-control-solid",placeholder:"Enter Item price",name:"itemPrice",modelValue:t.newVendorItem.price,"onUpdate:modelValue":s[2]||(s[2]=o=>t.newVendorItem.price=o)},null,8,["modelValue"]),e("div",Y,[e("div",Z,[i(a,{name:"itemPrice"})])])])]),e("div",ee,[e("div",te,[oe,i(l,{type:"text",class:"form-control form-control-solid",placeholder:"Enter Item Description",name:"itemDescription",modelValue:t.newVendorItem.description,"onUpdate:modelValue":s[3]||(s[3]=o=>t.newVendorItem.description=o)},null,8,["modelValue"]),e("div",se,[e("div",ae,[i(a,{name:"itemDescription"})])])]),e("div",ne,[re,i(l,{name:"itemCategory",class:"form-select form-control form-control-lg form-control-solid",as:"select",modelValue:t.newVendorItem.vendor_item_category_id,"onUpdate:modelValue":s[4]||(s[4]=o=>t.newVendorItem.vendor_item_category_id=o)},{default:I(()=>[ie,(v(!0),_(E,null,N(t.AllCategories,o=>(v(),_("option",{key:o.id,value:o.id},U(o.name),9,le))),128))]),_:1},8,["modelValue"]),e("div",de,[e("div",me,[i(a,{name:"itemCategory"})])])])])]),e("div",ce,[ue,e("button",pe,ve,512)])]),_:1},8,["onSubmit","validation-schema"])])}const be=C(j,[["render",he]]),ge=y({name:"create_vendor_item_view",components:{CreateVendorItem:be},props:{},setup(){return{}}});function Ve(t,s,h,m,r,c){const l=f("CreateVendorItem");return v(),_("div",null,[i(l)])}const Ae=C(ge,[["render",Ve]]);export{Ae as default};
