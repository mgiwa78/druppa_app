import{g as F}from"./assets.6f11792f.js";import{T as B}from"./TableFooter.3f00d523.js";import{d as N,G as o,u as j,Y as V,c as z,l as K,m as G,a4 as H,_ as U,b as r,i as t,t as n,x as y,F as M,e as Y,j as w,k as P,o as i,v as q,ab as J}from"./index.f8ca9675.js";import{f as Q}from"./formatDate.672d0471.js";import{d as E}from"./defaultData.9a1fdc93.js";import{V as W}from"./ViewCustomerOrderModal.6697adf5.js";import{E as X}from"./errorHandler.ce533688.js";import{S as Z}from"./colourMaps.8403b523.js";import"./TableFooter.vue_vue_type_script_lang.5421c060.js";const O=N({name:"customer-Order-stats",components:{TableFooter:B,ViewCustomerOrderModal:W},props:{widgetClasses:String},emits:["page-change","on-sort","on-items-select","on-items-per-page-change"],setup(a,{emit:c}){const{API_URL:k,ASSETS_URL:T}=G,D=o({}),h=o(E.OrderEmpty),m=o(E.OrderEmpty),u=o(null),p=o(10),d=o([0]),e=o(0),g=j(),{user:C,token:f}=g,v=o(!0),l=o(1),b=o([]);V(()=>p.value,s=>{l.value=1,c("on-items-per-page-change",s)});const S=z(()=>d.value?d.value.length<=p.value?e.value:d.value.length:0),I=async s=>{h.value=s},L=async s=>{console.log(s),m.value=s};V(()=>l.value,async s=>{const _=await $(s);u.value=_.data});const R=s=>{l.value=s,c("page-change",s)},A=async s=>(await H.get(k+`customerorders/vendor/orders?page=${s}`,{headers:{Authorization:`Bearer ${f}`}}).then(x=>x.data).catch(x=>{u.value=null,X(x)})).data,$=async s=>typeof s=="number"?await A(s):await A(1);return K(async()=>{const s=await $(1);D.value=s;const{data:_}=s;u.value=_,console.log(_),e.value=s.total,l.value=s.current_page}),{checkedRows:b,getAssetPath:F,pageChange:R,currentPage:l,itemsPerPage:p,totalDeliveries:d,totalItems:S,dataToDisplay:u,itemsPerPageDropdownEnabled:v,ASSETS_URL:T,editOrderData:h,updateEditOrder:I,CustomerViewOrderData:m,updateViewOrder:L,formatDate:Q,STATUS_COLOUR_MAP:Z}}}),ee={class:"card"},te={class:"card-header border-0 pt-5"},se={class:"card-title align-items-start flex-column"},ae=t("span",{class:"card-label fw-bold fs-3 mb-1"},"Vendor Orders",-1),oe={class:"text-muted mt-1 fw-semobold fs-7"},ne={class:"card-body py-3"},le={key:0,class:"d-flex align-items-center justify-content-center w-100 py-5"},re=t("h4",null,"No Orders",-1),ie=[re],de={key:1,class:"d-flex align-items-center justify-content-center w-100 py-5"},ce=t("div",{class:"spinner-border spinner-border-sm align-middle ms-2 w-25px h-25px"},null,-1),me=[ce],ue={key:2,class:"table-responsive"},pe={class:"table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3"},_e=t("thead",null,[t("tr",{class:"fw-bold text-muted"},[t("th",{class:"min-w-150px"},"Tracking Number"),t("th",{class:"min-w-120px"},"Driver"),t("th",{class:"min-w-140px"},"Origin"),t("th",{class:"min-w-120px"},"Destination"),t("th",{class:"min-w-120px"},"State"),t("th",{class:"min-w-120px"},"Status"),t("th",{class:"min-w-100px text-end"},"Actions")])],-1),he={href:"#",class:"text-dark fw-bold text-hover-primary fs-6"},ge={class:"text-dark fw-bold text-hover-primary fs-6"},fe={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},ve={class:"text-muted fw-semobold text-muted d-block fs-7"},be={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},ye={class:"text-muted fw-semobold text-muted d-block fs-7"},we={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},Pe={class:"text-muted fw-semobold text-muted d-block fs-7"},ke={class:"text-end"},Te=["onClick"],De={class:"px-10"};function Ce(a,c,k,T,D,h){var d;const m=P("KTIcon"),u=P("TableFooter"),p=P("ViewCustomerOrderModal");return i(),r(M,null,[t("div",ee,[t("div",te,[t("h3",se,[ae,t("span",oe,n(a.totalItems)+" Orders",1)])]),t("div",ne,[((d=a.dataToDisplay)==null?void 0:d.length)===0?(i(),r("div",le,ie)):y("",!0),a.dataToDisplay?y("",!0):(i(),r("div",de,me)),a.dataToDisplay!==null?(i(),r("div",ue,[t("table",pe,[_e,t("tbody",null,[(i(!0),r(M,null,Y(a.dataToDisplay,e=>{var g,C,f,v,l,b;return i(),r("tr",{key:e.id},[t("td",null,[t("a",he,n(e.delivery?(g=e.delivery)==null?void 0:g.tracking_number:"Pending Pickup"),1)]),t("td",ge,n(e.delivery?((C=e.delivery)==null?void 0:C.driver.firstName)+" "+((f=e.delivery)==null?void 0:f.driver.lastName):"Pending Pickup"),1),t("td",null,[t("a",fe,n(e.pickup_address),1),t("span",ve,n(e.delivery?a.formatDate((v=e.delivery)==null?void 0:v.pickup_date):"Pending Delivery"),1)]),t("td",null,[t("a",be,n(e.dropoff_address),1),t("span",ye,n(a.formatDate(e.created_at)),1)]),t("td",null,[t("a",we,n(e.pickup_address),1),t("span",Pe,n(e.origin),1)]),t("td",null,[t("span",{class:q([`badge-light-${e!=null&&e.delivery?(l=a.STATUS_COLOUR_MAP[e==null?void 0:e.delivery.status])==null?void 0:l.color:(b=a.STATUS_COLOUR_MAP[e==null?void 0:e.status])==null?void 0:b.color}`,"badge"])},n(e!=null&&e.delivery?e==null?void 0:e.delivery.status:e==null?void 0:e.status),3)]),t("td",ke,[e.delivery?(i(),r("button",{key:0,"data-bs-toggle":"modal","data-bs-target":"#kt_modal_view_customer_order",class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",onClick:J(S=>e.delivery?a.updateViewOrder(e):null,["prevent"])},[w(m,{"icon-name":"switch","icon-class":"fs-3"})],8,Te)):y("",!0)])])}),128))])]),t("div",De,[w(u,{onPageChange:a.pageChange,"current-page":a.currentPage,itemsPerPage:a.itemsPerPage,"onUpdate:itemsPerPage":c[0]||(c[0]=e=>a.itemsPerPage=e),count:a.totalItems,"items-per-page-dropdown-enabled":a.itemsPerPageDropdownEnabled},null,8,["onPageChange","current-page","itemsPerPage","count","items-per-page-dropdown-enabled"])])])):y("",!0)])]),w(p,{CustomerOrderData:a.CustomerViewOrderData},null,8,["CustomerOrderData"])],64)}const xe=U(O,[["render",Ce]]),Se=N({name:"all_vendor_orders_view",components:{MyOrdersTable:xe},props:{},setup(){return{}}});function Ae(a,c,k,T,D,h){const m=P("MyOrdersTable");return i(),r("div",null,[w(m)])}const Fe=U(Se,[["render",Ae]]);export{Fe as default};
