import{g as L}from"./assets.6f11792f.js";import"./Dropdown2.vue_vue_type_script_lang.c72317c6.js";import{T as O}from"./TableFooter.3f00d523.js";import{d as V,G as o,u as U,Y as C,c as z,l as K,m as G,a4 as Y,a3 as S,_ as B,b as l,i as e,t as n,x as P,F as $,e as q,j as _,v as A,k as b,o as i,ab as H}from"./index.f8ca9675.js";import{f as J}from"./formatDate.672d0471.js";import{d as E}from"./defaultData.9a1fdc93.js";import{V as Q}from"./ViewDeliveryModal.509a3104.js";import"./TableFooter.vue_vue_type_script_lang.5421c060.js";import"./ViewDeliveryModal.vue_vue_type_script_lang.2cdbd440.js";const W=V({name:"driver-delivery-taable",components:{TableFooter:O,ViewDeliveryModal:Q},props:{widgetClasses:String},emits:["page-change","on-sort","on-items-select","on-items-per-page-change"],setup(t,{emit:c}){const{API_URL:v,ASSETS_URL:w}=G,D=o({}),h=o(E.DeliveryEmpty),d=o(E.DeliveryEmpty),m=o([]),p=o(10),r=o([0]),u=o(0),a=U(),{token:k}=a,N=o(!0),f=o(1),F=o([]);C(()=>p.value,s=>{f.value=1,c("on-items-per-page-change",s)});const I=z(()=>r.value?r.value.length<=p.value?u.value:r.value.length:0),M=async s=>{h.value=s},R=async s=>{d.value=s};C(()=>f.value,async s=>{const y=await T(s);m.value=y.data,console.log(y.data)});const j=s=>{f.value=s,c("page-change",s)},x=async s=>(await Y.get(v+`fetchDriverDeliveries?page=${s}`,{headers:{Authorization:`Bearer ${k}`}}).then(g=>g.data).catch(g=>{m.value=null,g.response.data.message?S.fire({text:g.response.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Error Fetching Data!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}}):S.fire({text:g.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Error Fetching Data!",heightAuto:!1,customClass:{confirmButton:"btn fw-semobold btn-light-danger"}})})).data,T=async s=>typeof s=="number"?await x(s):await x(1);return K(async()=>{const s=await T(1);D.value=s,m.value=s.data,u.value=s.total,f.value=s.current_page}),{checkedRows:F,getAssetPath:L,pageChange:j,currentPage:f,itemsPerPage:p,totalDeliveries:r,totalItems:I,dataToDisplay:m,itemsPerPageDropdownEnabled:N,ASSETS_URL:w,editProfileData:h,updateEditProfile:M,viewDeliveryData:d,updateViewProfile:R,formatDate:J}}}),X={class:"card-header border-0 pt-5"},Z={class:"card-title align-items-start flex-column"},ee=e("span",{class:"card-label fw-bold fs-3 mb-1"},"Deliveries",-1),te={class:"text-muted mt-1 fw-semobold fs-7"},se={class:"card-body py-3"},ae={key:0,class:"d-flex align-items-center justify-content-center w-100 py-5"},oe=e("h4",null,"No Records",-1),ne=[oe],re={key:1,class:"d-flex align-items-center justify-content-center w-100 py-5"},le=e("div",{class:"spinner-border spinner-border-sm align-middle ms-2 w-25px h-25px"},null,-1),ie=[le],ce={key:2,class:"table-responsive"},de={class:"table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3"},me=e("thead",null,[e("tr",{class:"fw-bold text-muted"},[e("th",{class:"min-w-150px"},"Order Id"),e("th",{class:"min-w-120px"},"Customer"),e("th",{class:"min-w-140px"},"Origin"),e("th",{class:"min-w-120px"},"Destination"),e("th",{class:"min-w-120px"},"State"),e("th",{class:"min-w-120px"},"Status"),e("th",{class:"min-w-100px text-end"},"Actions")])],-1),pe={class:"text-dark fw-bold text-hover-primary fs-6"},ue={class:"text-dark fw-bold text-hover-primary fs-6"},fe={class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},ge={class:"text-muted fw-semobold text-muted d-block fs-7"},he={class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},_e={class:"text-muted fw-semobold text-muted d-block fs-7"},be={class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},ve={class:"text-end"},we=["onClick"],De={class:"px-10"};function ye(t,c,v,w,D,h){var r,u;const d=b("KTIcon"),m=b("TableFooter"),p=b("ViewDeliveryModal");return i(),l($,null,[e("div",{class:A([t.widgetClasses,"card"])},[e("div",X,[e("h3",Z,[ee,e("span",te,n(t.totalItems)+" Deliveries",1)])]),e("div",se,[t.dataToDisplay===null?(i(),l("div",ae,ne)):P("",!0),!((r=t.dataToDisplay)!=null&&r.length)&&t.dataToDisplay?(i(),l("div",re,ie)):P("",!0),((u=t.dataToDisplay)==null?void 0:u.length)&&t.dataToDisplay?(i(),l("div",ce,[e("table",de,[me,e("tbody",null,[(i(!0),l($,null,q(t.dataToDisplay,a=>(i(),l("tr",{key:a.id},[e("td",null,[e("span",pe,n(a.tracking_number),1)]),e("td",ue,n(a.customer.firstName+" "+a.customer.lastName),1),e("td",null,[e("span",fe,n(a.customer_order.pickup_address+""+a.customer_order.pickup_state),1),e("span",ge,n(t.formatDate(a.pickup_date)),1)]),e("td",null,[e("span",he,n(a.customer_order.dropoff_address+""+a.customer_order.dropoff_state),1),e("span",_e,n(t.formatDate(a.delivery_date)),1)]),e("td",null,[e("span",be,n(a.customer_order.pickup_state),1)]),e("td",null,[e("span",{class:A([`badge-light-${a.status}`,"badge"])},n(a.status),3)]),e("td",ve,[e("button",{"data-bs-toggle":"modal","data-bs-target":"#kt_modal_view_delivery",class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",onClick:H(k=>t.updateViewProfile(a),["prevent"])},[_(d,{"icon-name":"switch","icon-class":"fs-3"})],8,we)])]))),128))])]),e("div",De,[_(m,{onPageChange:t.pageChange,"current-page":t.currentPage,itemsPerPage:t.itemsPerPage,"onUpdate:itemsPerPage":c[0]||(c[0]=a=>t.itemsPerPage=a),count:t.totalItems,"items-per-page-dropdown-enabled":t.itemsPerPageDropdownEnabled},null,8,["onPageChange","current-page","itemsPerPage","count","items-per-page-dropdown-enabled"])])])):P("",!0)])],2),_(p,{DeliveryData:t.viewDeliveryData},null,8,["DeliveryData"])],64)}const Pe=B(W,[["render",ye]]),ke=V({name:"driver_records",components:{DriverDeliveryTable:Pe},props:{},setup(){return{}}}),xe={class:"col-12"};function Te(t,c,v,w,D,h){const d=b("DriverDeliveryTable");return i(),l("div",xe,[_(d,{"widget-classes":"mb-5 mb-xl-8"})])}const Ie=B(ke,[["render",Te]]);export{Ie as default};
